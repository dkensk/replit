{"file_contents":{"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1237,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","path":null,"size_bytes":1342,"size_tokens":null},"client/src/lib/UserContext.tsx":{"content":"import React, { createContext, useContext, useState, useCallback, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport type { Profile } from \"@shared/schema\";\nimport * as api from \"./api\";\n\ntype WeeklySchedule = {\n  [key: string]: string;\n};\n\ntype UserProfile = {\n  firstName: string | null;\n  age: number;\n  weight: number;\n  heightFt: number;\n  heightIn: number;\n  goal: \"muscle\" | \"fatloss\" | \"maintain\";\n  position: \"defense\" | \"wing\" | \"center\" | \"goalie\";\n  level: \"house\" | \"a\" | \"aa\" | \"aaa\" | \"junior\";\n  schedule: WeeklySchedule;\n  workoutDuration: number;\n  xp: number;\n  tier: \"Bronze\" | \"Silver\" | \"Gold\" | \"Diamond\" | \"Elite\";\n  workoutHistory: string[];\n  livebarnConnected: boolean;\n  livebarnRink: string | null;\n  onboardingComplete: boolean;\n};\n\ntype UserContextType = {\n  profile: UserProfile;\n  updateProfile: (updates: Partial<UserProfile>) => Promise<void>;\n  refetchProfile: () => Promise<void>;\n  xp: number;\n  macros: {\n    protein: number;\n    carbs: number;\n    fats: number;\n    calories: number;\n  };\n  recommendedMacros: {\n    protein: number;\n    calories: number;\n  };\n  consumedMeals: Record<string, boolean>;\n  toggleConsumedMeal: (mealId: string) => void;\n  setConsumedMeals: React.Dispatch<React.SetStateAction<Record<string, boolean>>>;\n  consumedMacros: {\n    protein: number;\n    calories: number;\n    carbs: number;\n    fats: number;\n  };\n  selectedMeals: Record<string, string>;\n  setSelectedMeals: React.Dispatch<React.SetStateAction<Record<string, string>>>;\n  updateDailyStats: (stats: { protein: number; calories: number; carbs: number; fats: number }) => void;\n  addXp: (amount: number) => void;\n  promoteTier: () => void;\n  logWorkout: () => void;\n  undoWorkout: () => void;\n  isLoading: boolean;\n};\n\nconst defaultProfile: UserProfile = {\n  firstName: null,\n  age: 16,\n  weight: 175,\n  heightFt: 5,\n  heightIn: 10,\n  goal: \"muscle\",\n  position: \"defense\",\n  level: \"aa\",\n  schedule: {},\n  workoutDuration: 60,\n  xp: 0,\n  tier: \"Bronze\",\n  workoutHistory: [],\n  livebarnConnected: false,\n  livebarnRink: null,\n  onboardingComplete: false\n};\n\nconst UserContext = createContext<UserContextType | undefined>(undefined);\n\nexport function UserProvider({ children }: { children: React.ReactNode }) {\n  const queryClient = useQueryClient();\n  \n  // Fetch profile from backend\n  const { data: backendProfile, isLoading } = useQuery({\n    queryKey: [\"profile\"],\n    queryFn: api.fetchProfile,\n  });\n\n  // Fetch workout logs\n  const { data: workoutLogs = [] } = useQuery({\n    queryKey: [\"workouts\"],\n    queryFn: api.fetchWorkoutLogs,\n  });\n\n  // Fetch user schedule from separate table\n  const { data: scheduleData = [] } = useQuery({\n    queryKey: [\"schedule\"],\n    queryFn: api.fetchSchedule,\n  });\n\n  // Fetch workout types for mapping IDs to codes\n  const { data: workoutTypes = [] } = useQuery({\n    queryKey: [\"workoutTypes\"],\n    queryFn: api.fetchWorkoutTypes,\n  });\n\n  // Fetch lookup tables for mapping IDs\n  const { data: goals = [] } = useQuery({\n    queryKey: [\"goals\"],\n    queryFn: api.fetchGoals,\n  });\n\n  const { data: positions = [] } = useQuery({\n    queryKey: [\"positions\"],\n    queryFn: api.fetchPositions,\n  });\n\n  const { data: levels = [] } = useQuery({\n    queryKey: [\"levels\"],\n    queryFn: api.fetchLevels,\n  });\n\n  const { data: tiers = [] } = useQuery({\n    queryKey: [\"tiers\"],\n    queryFn: api.fetchTiers,\n  });\n\n  // Fetch user progress (xp/tier)\n  const { data: userProgress } = useQuery({\n    queryKey: [\"progress\"],\n    queryFn: api.fetchProgress,\n  });\n\n  // Profile update mutation\n  const updateMutation = useMutation({\n    mutationFn: api.updateProfile,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"profile\"] });\n    },\n  });\n\n  // Workout log mutation\n  const workoutMutation = useMutation({\n    mutationFn: ({ date, workoutType }: { date: string; workoutType: string }) =>\n      api.logWorkout(date, workoutType),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"workouts\"] });\n      queryClient.invalidateQueries({ queryKey: [\"profile\"] });\n    },\n  });\n\n  // Promote tier mutation\n  const promoteMutation = useMutation({\n    mutationFn: api.promoteTier,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"profile\"] });\n    },\n  });\n\n  // Undo workout mutation\n  const undoWorkoutMutation = useMutation({\n    mutationFn: (date: string) => api.deleteWorkout(date),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"workouts\"] });\n      queryClient.invalidateQueries({ queryKey: [\"profile\"] });\n    },\n  });\n\n  // Get today's date in YYYY-MM-DD format\n  const getTodayDate = useCallback(() => {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }, []);\n\n  // Fetch today's meal logs from backend\n  const { data: mealLogs = [] } = useQuery({\n    queryKey: [\"meals\", getTodayDate()],\n    queryFn: () => api.fetchMealLogs(getTodayDate()),\n  });\n\n  // Meal log mutations\n  const saveMealMutation = useMutation({\n    mutationFn: (data: { date: string; mealType: string; mealId: string; consumed: boolean }) =>\n      api.saveMealLog(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"meals\"] });\n    },\n  });\n\n  const toggleMealMutation = useMutation({\n    mutationFn: (data: { date: string; mealType: string }) =>\n      api.toggleMeal(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"meals\"] });\n      queryClient.invalidateQueries({ queryKey: [\"profile\"] });\n    },\n  });\n\n  // Initialize meal state from backend data\n  const [consumedMeals, setConsumedMeals] = useState<Record<string, boolean>>({\n    breakfast: false,\n    lunch: false,\n    snack: false,\n    dinner: false\n  });\n\n  const [selectedMeals, setSelectedMeals] = useState<Record<string, string>>({\n    breakfast: \"oatmeal\",\n    lunch: \"chicken_rice\",\n    snack: \"protein_shake\",\n    dinner: \"salmon\"\n  });\n\n  const [consumedMacros, setConsumedMacros] = useState({\n    protein: 0,\n    calories: 0,\n    carbs: 0,\n    fats: 0\n  });\n\n  // Track whether we've loaded initial data from backend\n  const [initialLoadComplete, setInitialLoadComplete] = useState(false);\n\n  // Sync state from backend meal logs when they load (only on initial load)\n  useEffect(() => {\n    if (!initialLoadComplete && mealLogs.length > 0) {\n      const newConsumed: Record<string, boolean> = {\n        breakfast: false,\n        lunch: false,\n        snack: false,\n        dinner: false\n      };\n      const newSelected: Record<string, string> = {\n        breakfast: \"oatmeal\",\n        lunch: \"chicken_rice\",\n        snack: \"protein_shake\",\n        dinner: \"salmon\"\n      };\n      \n      mealLogs.forEach((log: any) => {\n        newConsumed[log.mealType] = log.consumed;\n        // Only use mealId from database if it's a valid meal ID (not the mealType itself)\n        if (log.mealId && log.mealId !== log.mealType) {\n          newSelected[log.mealType] = log.mealId;\n        }\n      });\n      \n      setConsumedMeals(newConsumed);\n      setSelectedMeals(newSelected);\n      setInitialLoadComplete(true);\n    } else if (!initialLoadComplete && mealLogs.length === 0) {\n      setInitialLoadComplete(true);\n    }\n  }, [mealLogs, initialLoadComplete]);\n\n  // Save meal selection when user changes it (after initial load)\n  const prevSelectedMeals = React.useRef(selectedMeals);\n  useEffect(() => {\n    if (!initialLoadComplete) return;\n    \n    const today = getTodayDate();\n    const mealTypes = [\"breakfast\", \"lunch\", \"snack\", \"dinner\"];\n    \n    mealTypes.forEach((mealType) => {\n      const prevMealId = prevSelectedMeals.current[mealType];\n      const newMealId = selectedMeals[mealType];\n      \n      // Only save if the meal selection actually changed\n      // Skip if mealId starts with \"saved_\" or \"custom_\" - those are saved by Diet.tsx directly\n      if (prevMealId !== newMealId && newMealId && !newMealId.startsWith(\"saved_\") && !newMealId.startsWith(\"custom_\")) {\n        saveMealMutation.mutate({\n          date: today,\n          mealType,\n          mealId: newMealId,\n          consumed: consumedMeals[mealType] || false\n        });\n      }\n    });\n    \n    prevSelectedMeals.current = selectedMeals;\n  }, [selectedMeals, initialLoadComplete, getTodayDate, saveMealMutation, consumedMeals]);\n\n  // Build schedule from the separate schedule data\n  const dayNames = [\"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"];\n  const buildSchedule = (): WeeklySchedule => {\n    const schedule: WeeklySchedule = {};\n    \n    if (scheduleData.length > 0 && workoutTypes.length > 0) {\n      scheduleData.forEach((item: any) => {\n        const dayName = dayNames[item.dayOfWeek];\n        if (item.isRestDay) {\n          schedule[dayName] = \"rest\";\n        } else if (item.workoutTypeId) {\n          const wt = workoutTypes.find((w: any) => w.id === item.workoutTypeId);\n          schedule[dayName] = wt?.code || \"rest\";\n        } else {\n          schedule[dayName] = \"rest\";\n        }\n      });\n    }\n    \n    return schedule;\n  };\n\n  // Helper functions to map IDs to codes\n  const getGoalCode = (goalId: number | null): \"muscle\" | \"fatloss\" | \"maintain\" => {\n    if (!goalId) return \"muscle\";\n    const goal = goals.find((g: any) => g.id === goalId);\n    return (goal?.code || \"muscle\") as any;\n  };\n\n  const getPositionCode = (positionId: number | null): \"defense\" | \"wing\" | \"center\" | \"goalie\" => {\n    if (!positionId) return \"defense\";\n    const position = positions.find((p: any) => p.id === positionId);\n    return (position?.code || \"defense\") as any;\n  };\n\n  const getLevelCode = (levelId: number | null): \"house\" | \"a\" | \"aa\" | \"aaa\" | \"junior\" => {\n    if (!levelId) return \"aa\";\n    const level = levels.find((l: any) => l.id === levelId);\n    return (level?.code || \"aa\") as any;\n  };\n\n  const getTierName = (tierId: number | null): \"Bronze\" | \"Silver\" | \"Gold\" | \"Diamond\" | \"Elite\" => {\n    if (!tierId) return \"Bronze\";\n    const tier = tiers.find((t: any) => t.id === tierId);\n    return (tier?.name || \"Bronze\") as any;\n  };\n\n  // Convert backend profile to frontend format\n  const profile: UserProfile = backendProfile\n    ? {\n        firstName: (backendProfile as any).firstName ?? null,\n        age: backendProfile.age,\n        weight: backendProfile.weight,\n        heightFt: backendProfile.heightFt,\n        heightIn: backendProfile.heightIn,\n        goal: getGoalCode(backendProfile.goalId),\n        position: getPositionCode(backendProfile.positionId),\n        level: getLevelCode(backendProfile.levelId),\n        schedule: buildSchedule(),\n        workoutDuration: backendProfile.workoutDuration,\n        xp: userProgress?.totalXp || 0,\n        tier: getTierName(userProgress?.tierId),\n        workoutHistory: workoutLogs.map(log => log.date),\n        livebarnConnected: backendProfile.livebarnConnected ?? false,\n        livebarnRink: backendProfile.livebarnRink ?? null,\n        onboardingComplete: (backendProfile as any).onboardingComplete ?? false,\n      }\n    : defaultProfile;\n\n  const updateProfile = useCallback(async (updates: Partial<UserProfile>): Promise<void> => {\n    return new Promise((resolve, reject) => {\n      updateMutation.mutate(updates as any, {\n        onSuccess: () => resolve(),\n        onError: (error) => reject(error)\n      });\n    });\n  }, [updateMutation]);\n\n  const refetchProfile = useCallback(async (): Promise<void> => {\n    await queryClient.invalidateQueries({ queryKey: [\"/api/profile\"] });\n  }, [queryClient]);\n\n  const addXp = useCallback((amount: number) => {\n    // XP is now managed automatically by the server when logging workouts/meals\n    // Just invalidate the progress query to refresh the data\n    queryClient.invalidateQueries({ queryKey: [\"progress\"] });\n  }, [queryClient]);\n\n  const promoteTier = useCallback(() => {\n    promoteMutation.mutate();\n  }, [promoteMutation]);\n\n  const logWorkout = useCallback(() => {\n    // Use local date to avoid timezone issues\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    const today = `${year}-${month}-${day}`;\n    \n    const dayIndex = now.getDay();\n    const dayNames = [\"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"];\n    const dayName = dayNames[dayIndex];\n    const workoutType = profile.schedule[dayName] || \"rest\";\n    \n    workoutMutation.mutate({ date: today, workoutType });\n  }, [profile.schedule, workoutMutation]);\n\n  const undoWorkout = useCallback(() => {\n    // Use local date to avoid timezone issues\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    const today = `${year}-${month}-${day}`;\n    undoWorkoutMutation.mutate(today);\n  }, [undoWorkoutMutation]);\n\n  const toggleConsumedMeal = useCallback((mealType: string) => {\n    const today = getTodayDate();\n    // Use selected meal ID, with sensible defaults that match baseMeals\n    const defaultMeals: Record<string, string> = {\n      breakfast: \"oatmeal\",\n      lunch: \"chicken_rice\",\n      snack: \"protein_shake\",\n      dinner: \"salmon\"\n    };\n    const currentMealId = selectedMeals[mealType] || defaultMeals[mealType] || \"oatmeal\";\n    const newConsumed = !consumedMeals[mealType];\n    \n    // Optimistically update local state first\n    setConsumedMeals(prev => ({ ...prev, [mealType]: newConsumed }));\n    \n    // Save with the new consumed state directly\n    saveMealMutation.mutate({\n      date: today,\n      mealType,\n      mealId: currentMealId,\n      consumed: newConsumed\n    });\n  }, [getTodayDate, selectedMeals, consumedMeals, saveMealMutation]);\n\n  const updateDailyStats = useCallback((stats: { protein: number; calories: number; carbs: number; fats: number }) => {\n    setConsumedMacros(stats);\n  }, []);\n\n  // Calculate macros for youth hockey athletes based on age and goal\n  // Guidelines for 13-year-old active teen athletes:\n  // - Maintain: 2,300-2,600 cal, protein 0.5-0.7g/lb (70-95g)\n  // - Muscle: 2,500-2,900 cal (+200-300 surplus), protein 90-110g\n  // - Fat loss: 2,000-2,300 cal (small 200-300 deficit)\n  \n  const weightKg = profile.weight * 0.453592;\n  const heightCm = (profile.heightFt * 12 + profile.heightIn) * 2.54;\n  \n  // BMR using Mifflin-St Jeor equation\n  const bmr = 10 * weightKg + 6.25 * heightCm - 5 * profile.age + 5;\n  \n  // Activity multiplier based on hockey level\n  const levelMultiplier = {\n    house: 1.55,\n    a: 1.65,\n    aa: 1.725,\n    aaa: 1.8,\n    junior: 1.9\n  };\n  const activityMultiplier = levelMultiplier[profile.level] || 1.65;\n  \n  // Calculate base maintenance calories\n  let baseCalories = bmr * activityMultiplier;\n  \n  // Apply age-specific calorie ranges based on goal\n  let goalCalories: number;\n  let proteinGrams: number;\n  \n  if (profile.age <= 14) {\n    // 13-14 year old ranges\n    if (profile.goal === \"maintain\") {\n      goalCalories = Math.min(Math.max(baseCalories, 2300), 2600);\n    } else if (profile.goal === \"muscle\") {\n      goalCalories = Math.min(Math.max(baseCalories + 250, 2500), 2900);\n    } else {\n      goalCalories = Math.min(Math.max(baseCalories - 250, 2000), 2300);\n    }\n  } else if (profile.age <= 16) {\n    // 15-16 year old ranges (slightly higher)\n    if (profile.goal === \"maintain\") {\n      goalCalories = Math.min(Math.max(baseCalories, 2400), 2800);\n    } else if (profile.goal === \"muscle\") {\n      goalCalories = Math.min(Math.max(baseCalories + 300, 2600), 3100);\n    } else {\n      goalCalories = Math.min(Math.max(baseCalories - 300, 2200), 2500);\n    }\n  } else {\n    // 17+ year old ranges\n    if (profile.goal === \"maintain\") {\n      goalCalories = Math.round(baseCalories);\n    } else if (profile.goal === \"muscle\") {\n      goalCalories = Math.round(baseCalories + 350);\n    } else {\n      goalCalories = Math.round(Math.max(baseCalories - 350, 2000));\n    }\n  }\n  \n  // Protein: 0.8-1g per pound of body weight for all goals\n  // Muscle/fat loss: 1g per lb, Maintain: 0.9g per lb\n  if (profile.goal === \"muscle\" || profile.goal === \"fatloss\") {\n    proteinGrams = Math.round(profile.weight * 1.0);\n  } else {\n    proteinGrams = Math.round(profile.weight * 0.9);\n  }\n  \n  const calories = Math.round(goalCalories);\n  const protein = proteinGrams;\n  \n  // Fat: 25-30% of calories (essential for growth and hormones)\n  const fats = Math.round((calories * 0.28) / 9);\n  \n  // Carbs: Remaining calories (primary fuel for hockey)\n  const caloriesFromProtein = protein * 4;\n  const caloriesFromFat = fats * 9;\n  const remainingCalories = calories - caloriesFromProtein - caloriesFromFat;\n  const carbs = Math.max(0, Math.round(remainingCalories / 4));\n\n  const recommendedProtein = Math.round(profile.weight * 0.6);\n  const recommendedCalories = Math.round(bmr * activityMultiplier);\n\n  return (\n    <UserContext.Provider\n      value={{\n        profile,\n        updateProfile,\n        refetchProfile,\n        xp: profile.xp,\n        macros: { protein, carbs, fats, calories },\n        recommendedMacros: { protein: recommendedProtein, calories: recommendedCalories },\n        consumedMeals,\n        toggleConsumedMeal,\n        setConsumedMeals,\n        selectedMeals,\n        setSelectedMeals,\n        consumedMacros,\n        updateDailyStats,\n        addXp,\n        promoteTier,\n        logWorkout,\n        undoWorkout,\n        isLoading,\n      }}\n    >\n      {children}\n    </UserContext.Provider>\n  );\n}\n\nexport function useUser() {\n  const context = useContext(UserContext);\n  if (context === undefined) {\n    throw new Error(\"useUser must be used within a UserProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":17939,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1598,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":266,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4280,"size_tokens":null},"vite-plugin-meta-images.ts":{"content":"import type { Plugin } from 'vite';\nimport fs from 'fs';\nimport path from 'path';\n\n/**\n * Vite plugin that updates og:image and twitter:image meta tags\n * to point to the app's opengraph image with the correct Replit domain.\n */\nexport function metaImagesPlugin(): Plugin {\n  return {\n    name: 'vite-plugin-meta-images',\n    transformIndexHtml(html) {\n      const baseUrl = getDeploymentUrl();\n      if (!baseUrl) {\n        log('[meta-images] no Replit deployment domain found, skipping meta tag updates');\n        return html;\n      }\n\n      // Check if opengraph image exists in public directory\n      const publicDir = path.resolve(process.cwd(), 'client', 'public');\n      const opengraphPngPath = path.join(publicDir, 'opengraph.png');\n      const opengraphJpgPath = path.join(publicDir, 'opengraph.jpg');\n      const opengraphJpegPath = path.join(publicDir, 'opengraph.jpeg');\n\n      let imageExt: string | null = null;\n      if (fs.existsSync(opengraphPngPath)) {\n        imageExt = 'png';\n      } else if (fs.existsSync(opengraphJpgPath)) {\n        imageExt = 'jpg';\n      } else if (fs.existsSync(opengraphJpegPath)) {\n        imageExt = 'jpeg';\n      }\n\n      if (!imageExt) {\n        log('[meta-images] OpenGraph image not found, skipping meta tag updates');\n        return html;\n      }\n\n      const imageUrl = `${baseUrl}/opengraph.${imageExt}`;\n\n      log('[meta-images] updating meta image tags to:', imageUrl);\n\n      html = html.replace(\n        /<meta\\s+property=\"og:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta property=\"og:image\" content=\"${imageUrl}\" />`\n      );\n\n      html = html.replace(\n        /<meta\\s+name=\"twitter:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta name=\"twitter:image\" content=\"${imageUrl}\" />`\n      );\n\n      return html;\n    },\n  };\n}\n\nfunction getDeploymentUrl(): string | null {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    log('[meta-images] using internal app domain:', url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    log('[meta-images] using dev domain:', url);\n    return url;\n  }\n\n  return null;\n}\n\nfunction log(...args: any[]): void {\n  if (process.env.NODE_ENV === 'production') {\n    console.log(...args);\n  }\n}\n","path":null,"size_bytes":2333,"size_tokens":null},"client/src/components/ui/button-group.tsx":{"content":"import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nconst buttonGroupVariants = cva(\n  \"flex w-fit items-stretch has-[>[data-slot=button-group]]:gap-2 [&>*]:focus-visible:relative [&>*]:focus-visible:z-10 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1\",\n  {\n    variants: {\n      orientation: {\n        horizontal:\n          \"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none\",\n        vertical:\n          \"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none\",\n      },\n    },\n    defaultVariants: {\n      orientation: \"horizontal\",\n    },\n  }\n)\n\nfunction ButtonGroup({\n  className,\n  orientation,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof buttonGroupVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"button-group\"\n      data-orientation={orientation}\n      className={cn(buttonGroupVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupText({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      className={cn(\n        \"bg-muted shadow-xs flex items-center gap-2 rounded-md border px-4 text-sm font-medium [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupSeparator({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"button-group-separator\"\n      orientation={orientation}\n      className={cn(\n        \"bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ButtonGroup,\n  ButtonGroupSeparator,\n  ButtonGroupText,\n  buttonGroupVariants,\n}\n","path":null,"size_bytes":2209,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1031,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.use(\n  express.json({\n    limit: \"10mb\",\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":2579,"size_tokens":null},"client/src/components/ui/input-group.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nfunction InputGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"input-group\"\n      role=\"group\"\n      className={cn(\n        \"group/input-group border-input dark:bg-input/30 shadow-xs relative flex w-full items-center rounded-md border outline-none transition-[color,box-shadow]\",\n        \"h-9 has-[>textarea]:h-auto\",\n\n        // Variants based on alignment.\n        \"has-[>[data-align=inline-start]]:[&>input]:pl-2\",\n        \"has-[>[data-align=inline-end]]:[&>input]:pr-2\",\n        \"has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3\",\n        \"has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3\",\n\n        // Focus state.\n        \"has-[[data-slot=input-group-control]:focus-visible]:ring-ring has-[[data-slot=input-group-control]:focus-visible]:ring-1\",\n\n        // Error state.\n        \"has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40\",\n\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupAddonVariants = cva(\n  \"text-muted-foreground flex h-auto cursor-text select-none items-center justify-center gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      align: {\n        \"inline-start\":\n          \"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]\",\n        \"inline-end\":\n          \"order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]\",\n        \"block-start\":\n          \"[.border-b]:pb-3 order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5\",\n        \"block-end\":\n          \"[.border-t]:pt-3 order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5\",\n      },\n    },\n    defaultVariants: {\n      align: \"inline-start\",\n    },\n  }\n)\n\nfunction InputGroupAddon({\n  className,\n  align = \"inline-start\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupAddonVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"input-group-addon\"\n      data-align={align}\n      className={cn(inputGroupAddonVariants({ align }), className)}\n      onClick={(e) => {\n        if ((e.target as HTMLElement).closest(\"button\")) {\n          return\n        }\n        e.currentTarget.parentElement?.querySelector(\"input\")?.focus()\n      }}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupButtonVariants = cva(\n  \"flex items-center gap-2 text-sm shadow-none\",\n  {\n    variants: {\n      size: {\n        xs: \"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>svg]:px-2 [&>svg:not([class*='size-'])]:size-3.5\",\n        sm: \"h-8 gap-1.5 rounded-md px-2.5 has-[>svg]:px-2.5\",\n        \"icon-xs\":\n          \"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0\",\n        \"icon-sm\": \"size-8 p-0 has-[>svg]:p-0\",\n      },\n    },\n    defaultVariants: {\n      size: \"xs\",\n    },\n  }\n)\n\nfunction InputGroupButton({\n  className,\n  type = \"button\",\n  variant = \"ghost\",\n  size = \"xs\",\n  ...props\n}: Omit<React.ComponentProps<typeof Button>, \"size\"> &\n  VariantProps<typeof inputGroupButtonVariants>) {\n  return (\n    <Button\n      type={type}\n      data-size={size}\n      variant={variant}\n      className={cn(inputGroupButtonVariants({ size }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupText({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      className={cn(\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupInput({\n  className,\n  ...props\n}: React.ComponentProps<\"input\">) {\n  return (\n    <Input\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupTextarea({\n  className,\n  ...props\n}: React.ComponentProps<\"textarea\">) {\n  return (\n    <Textarea\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupText,\n  InputGroupInput,\n  InputGroupTextarea,\n}\n","path":null,"size_bytes":4971,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1419,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","path":null,"size_bytes":1828,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1410,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7606,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2143,"size_tokens":null},"client/src/components/ui/empty.tsx":{"content":"import { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Empty({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty\"\n      className={cn(\n        \"flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-header\"\n      className={cn(\n        \"flex max-w-sm flex-col items-center gap-2 text-center\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst emptyMediaVariants = cva(\n  \"mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction EmptyMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof emptyMediaVariants>) {\n  return (\n    <div\n      data-slot=\"empty-icon\"\n      data-variant={variant}\n      className={cn(emptyMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-title\"\n      className={cn(\"text-lg font-medium tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <div\n      data-slot=\"empty-description\"\n      className={cn(\n        \"text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-content\"\n      className={cn(\n        \"flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Empty,\n  EmptyHeader,\n  EmptyTitle,\n  EmptyDescription,\n  EmptyContent,\n  EmptyMedia,\n}\n","path":null,"size_bytes":2396,"size_tokens":null},"client/src/lib/api.ts":{"content":"import type { Profile, UpdateProfile, WorkoutLog, MealLog } from \"@shared/schema\";\n\nconst API_BASE = \"/api\";\n\nexport async function fetchProfile(): Promise<Profile> {\n  const res = await fetch(`${API_BASE}/profile`);\n  if (!res.ok) throw new Error(\"Failed to fetch profile\");\n  return res.json();\n}\n\nexport async function updateProfile(updates: UpdateProfile): Promise<Profile> {\n  const res = await fetch(`${API_BASE}/profile`, {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(updates),\n  });\n  if (!res.ok) throw new Error(\"Failed to update profile\");\n  return res.json();\n}\n\nexport async function fetchWorkoutLogs(): Promise<WorkoutLog[]> {\n  const res = await fetch(`${API_BASE}/workouts`);\n  if (!res.ok) throw new Error(\"Failed to fetch workout logs\");\n  return res.json();\n}\n\nexport async function logWorkout(date: string, workoutType: string): Promise<WorkoutLog> {\n  const res = await fetch(`${API_BASE}/workouts`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ date, workoutType }),\n  });\n  if (!res.ok) {\n    const error = await res.json();\n    throw new Error(error.error || \"Failed to log workout\");\n  }\n  return res.json();\n}\n\nexport async function deleteWorkout(date: string): Promise<void> {\n  const res = await fetch(`${API_BASE}/workouts/${date}`, {\n    method: \"DELETE\",\n  });\n  if (!res.ok) {\n    const error = await res.json();\n    throw new Error(error.error || \"Failed to delete workout\");\n  }\n}\n\nexport async function fetchMealLogs(date: string): Promise<MealLog[]> {\n  const res = await fetch(`${API_BASE}/meals/${date}`);\n  if (!res.ok) throw new Error(\"Failed to fetch meal logs\");\n  return res.json();\n}\n\nexport async function upsertMealLog(\n  date: string,\n  mealType: string,\n  mealId: string,\n  consumed: boolean\n): Promise<MealLog> {\n  const res = await fetch(`${API_BASE}/meals`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ date, mealType, mealId, consumed }),\n  });\n  if (!res.ok) throw new Error(\"Failed to save meal log\");\n  return res.json();\n}\n\nexport async function toggleMealConsumed(date: string, mealType: string): Promise<MealLog> {\n  const res = await fetch(`${API_BASE}/meals/toggle`, {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ date, mealType }),\n  });\n  if (!res.ok) throw new Error(\"Failed to toggle meal\");\n  return res.json();\n}\n\nexport async function promoteTier(): Promise<Profile> {\n  const res = await fetch(`${API_BASE}/profile/promote`, {\n    method: \"POST\",\n  });\n  if (!res.ok) {\n    const error = await res.json();\n    throw new Error(error.error || \"Failed to promote tier\");\n  }\n  return res.json();\n}\n\n// Wrapper for saving meal log with object param (includes optional nutrition data)\nexport async function saveMealLog(data: {\n  date: string;\n  mealType: string;\n  mealId: string;\n  consumed: boolean;\n  mealName?: string;\n  calories?: number;\n  protein?: number;\n  carbs?: number;\n  fats?: number;\n}): Promise<MealLog> {\n  const res = await fetch(`${API_BASE}/meals`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(data),\n  });\n  if (!res.ok) throw new Error(\"Failed to save meal log\");\n  return res.json();\n}\n\n// Wrapper for toggling meal with object param\nexport async function toggleMeal(data: { date: string; mealType: string }): Promise<MealLog> {\n  return toggleMealConsumed(data.date, data.mealType);\n}\n\n// Fetch user schedule\nexport async function fetchSchedule(): Promise<any[]> {\n  const res = await fetch(`${API_BASE}/schedule`);\n  if (!res.ok) throw new Error(\"Failed to fetch schedule\");\n  return res.json();\n}\n\n// Fetch workout types\nexport async function fetchWorkoutTypes(): Promise<any[]> {\n  const res = await fetch(`${API_BASE}/lookups/workout-types`);\n  if (!res.ok) throw new Error(\"Failed to fetch workout types\");\n  return res.json();\n}\n\n// Fetch goals lookup\nexport async function fetchGoals(): Promise<any[]> {\n  const res = await fetch(`${API_BASE}/lookups/goals`);\n  if (!res.ok) throw new Error(\"Failed to fetch goals\");\n  return res.json();\n}\n\n// Fetch positions lookup\nexport async function fetchPositions(): Promise<any[]> {\n  const res = await fetch(`${API_BASE}/lookups/positions`);\n  if (!res.ok) throw new Error(\"Failed to fetch positions\");\n  return res.json();\n}\n\n// Fetch levels lookup\nexport async function fetchLevels(): Promise<any[]> {\n  const res = await fetch(`${API_BASE}/lookups/levels`);\n  if (!res.ok) throw new Error(\"Failed to fetch levels\");\n  return res.json();\n}\n\n// Fetch tiers lookup\nexport async function fetchTiers(): Promise<any[]> {\n  const res = await fetch(`${API_BASE}/lookups/tiers`);\n  if (!res.ok) throw new Error(\"Failed to fetch tiers\");\n  return res.json();\n}\n\n// Fetch user progress (xp/tier)\nexport async function fetchProgress(): Promise<any> {\n  const res = await fetch(`${API_BASE}/progress`);\n  if (!res.ok) throw new Error(\"Failed to fetch progress\");\n  return res.json();\n}\n\nexport async function sendChatMessage(\n  messages: { role: string; content: string }[],\n  profile: { position: string; level: string; age: number; weight: number } | null\n): Promise<string> {\n  const res = await fetch(`${API_BASE}/chat`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ messages, profile }),\n  });\n  if (!res.ok) {\n    const error = await res.json();\n    throw new Error(error.error || \"Failed to get AI response\");\n  }\n  const data = await res.json();\n  return data.response;\n}\n","path":null,"size_bytes":5641,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  if (!itemContext) {\n    throw new Error(\"useFormField should be used within <FormItem>\")\n  }\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4175,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4887,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3835,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1037,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2859,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport tailwindcss from \"@tailwindcss/vite\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\nimport { metaImagesPlugin } from \"./vite-plugin-meta-images\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    tailwindcss(),\n    metaImagesPlugin(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  css: {\n    postcss: {\n      plugins: [],\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    allowedHosts: true,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1330,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/kbd.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Kbd({ className, ...props }: React.ComponentProps<\"kbd\">) {\n  return (\n    <kbd\n      data-slot=\"kbd\"\n      className={cn(\n        \"bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium\",\n        \"[&_svg:not([class*='size-'])]:size-3\",\n        \"[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction KbdGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <kbd\n      data-slot=\"kbd-group\"\n      className={cn(\"inline-flex items-center gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Kbd, KbdGroup }\n","path":null,"size_bytes":862,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":768,"size_tokens":null},"client/src/pages/Home.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Zap, Flame, Settings2, Trophy, Crown, ArrowUpCircle, Calendar as CalendarIcon, CheckCircle2, Undo2 } from \"lucide-react\";\nimport heroImage from \"@assets/generated_images/cinematic_hockey_arena_ice_surface.png\";\nimport { useUser } from \"@/lib/UserContext\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { format, isSameDay, parseISO, startOfToday } from \"date-fns\";\n\n// Labels for workout types to display in calendar details\nconst WORKOUT_LABELS: Record<string, string> = {\n  legs_strength: \"Legs - Strength\",\n  legs_explosive: \"Legs - Explosiveness\",\n  upper_body: \"Upper Body Power\",\n  back_biceps: \"Back & Biceps\",\n  chest_triceps: \"Chest & Triceps\",\n  full_body: \"Full Body Athletic\",\n  skills_cardio: \"Skills & Cardio\",\n  active_recovery: \"Active Recovery\",\n  rest: \"Rest Day\"\n};\n\nconst DAYS = [\"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"];\n\nexport default function Home() {\n  const { profile, updateProfile, macros, consumedMacros, addXp, promoteTier, logWorkout, undoWorkout } = useUser();\n  const [isEditing, setIsEditing] = useState(false);\n  \n  // Calendar State\n  const [selectedDate, setSelectedDate] = useState<Date | undefined>(new Date());\n  \n  // Local state for form handling\n  const [formData, setFormData] = useState({\n    weight: profile.weight,\n    heightFt: profile.heightFt,\n    heightIn: profile.heightIn,\n    age: profile.age\n  });\n\n  // Helper function to format date as local YYYY-MM-DD string\n  const formatLocalDate = (date: Date) => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  // Calculate Streak - returns both count and the dates in the streak\n  const { streak, streakDates } = useMemo(() => {\n    const streakDatesSet = new Set<string>();\n    let currentStreak = 0;\n    const sortedHistory = [...(profile.workoutHistory || [])].sort().reverse(); // Newest first\n    \n    if (sortedHistory.length === 0) return { streak: 0, streakDates: streakDatesSet };\n\n    const now = new Date();\n    const today = formatLocalDate(now);\n    const yesterdayDate = new Date(now);\n    yesterdayDate.setDate(yesterdayDate.getDate() - 1);\n    const yesterday = formatLocalDate(yesterdayDate);\n\n    // If latest workout is not today or yesterday, streak is broken (0)\n    if (sortedHistory[0] !== today && sortedHistory[0] !== yesterday) {\n        return { streak: 0, streakDates: streakDatesSet };\n    }\n\n    // Basic streak calculation logic\n    let checkDate = new Date();\n    // Start checking from today if we worked out today, otherwise yesterday\n    if (sortedHistory.includes(today)) {\n      // checkDate is today\n    } else {\n      checkDate.setDate(checkDate.getDate() - 1);\n    }\n    \n    while (true) {\n        const dateStr = formatLocalDate(checkDate);\n        if (profile.workoutHistory.includes(dateStr)) {\n            currentStreak++;\n            streakDatesSet.add(dateStr);\n            checkDate.setDate(checkDate.getDate() - 1);\n        } else {\n            break;\n        }\n    }\n    return { streak: currentStreak, streakDates: streakDatesSet };\n  }, [profile.workoutHistory]);\n\n  const isTodayCompleted = useMemo(() => {\n    // Use local date to avoid timezone issues\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    const today = `${year}-${month}-${day}`;\n    return profile.workoutHistory?.includes(today);\n  }, [profile.workoutHistory]);\n\n  // Update local state when profile changes (e.g. on first load)\n  useEffect(() => {\n    setFormData({\n      weight: profile.weight,\n      heightFt: profile.heightFt,\n      heightIn: profile.heightIn,\n      age: profile.age\n    });\n  }, [profile]);\n\n  const handleSave = () => {\n    updateProfile(formData);\n    setIsEditing(false);\n  };\n\n  const handleCompleteWorkout = () => {\n    if (!isTodayCompleted) {\n      logWorkout();\n    }\n  };\n\n  const getTierColor = (tier: string) => {\n    switch (tier) {\n      case \"Bronze\": return \"text-orange-400\";\n      case \"Silver\": return \"text-gray-300\";\n      case \"Gold\": return \"text-yellow-400\";\n      case \"Diamond\": return \"text-cyan-400\";\n      case \"Elite\": return \"text-red-500\";\n      default: return \"text-primary\";\n    }\n  };\n\n  const getTierBg = (tier: string) => {\n    switch (tier) {\n      case \"Bronze\": return \"bg-orange-500/20\";\n      case \"Silver\": return \"bg-gray-400/20\";\n      case \"Gold\": return \"bg-yellow-500/20\";\n      case \"Diamond\": return \"bg-cyan-500/20\";\n      case \"Elite\": return \"bg-red-500/20\";\n      default: return \"bg-primary/20\";\n    }\n  };\n\n  const getScheduledWorkoutForDate = (date: Date) => {\n    const dayIndex = date.getDay(); // 0 = Sunday\n    const dayName = DAYS[dayIndex];\n    const workoutType = profile.schedule[dayName] || \"rest\";\n    return WORKOUT_LABELS[workoutType] || \"Rest Day\";\n  };\n\n  return (\n    <Layout>\n      {/* Hero Section */}\n      <div className=\"relative h-64 w-full overflow-hidden rounded-b-3xl shadow-2xl\">\n        <div className=\"absolute inset-0 bg-gradient-to-t from-background to-transparent z-10\" />\n        <img \n          src={heroImage} \n          alt=\"Hockey Arena\" \n          className=\"w-full h-full object-cover opacity-80\"\n        />\n        <div className=\"absolute bottom-4 left-6 z-20\">\n          <p className=\"text-sm font-medium text-primary uppercase tracking-wider mb-1\">Welcome back{profile.firstName ? `, ${profile.firstName}` : \"\"}</p>\n          <h1 className=\"text-3xl font-heading font-bold text-white italic\">READY TO <br/>DOMINATE?</h1>\n        </div>\n      </div>\n\n      <div className=\"p-6 space-y-8\">\n        {/* Profile / Stats Editor */}\n        <section>\n          <div className=\"flex justify-between items-center mb-4\">\n            <h2 className=\"text-xl font-heading font-semibold text-white\">Your Stats</h2>\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              className=\"text-primary hover:text-primary/80 hover:bg-primary/10\"\n              onClick={() => isEditing ? handleSave() : setIsEditing(true)}\n            >\n              {isEditing ? \"Save Changes\" : <Settings2 className=\"w-4 h-4\" />}\n            </Button>\n          </div>\n          \n          {isEditing ? (\n             <Card className=\"bg-secondary/50 border-primary/50 backdrop-blur-sm animate-in fade-in zoom-in-95 duration-200\">\n              <CardContent className=\"p-4 grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label>Weight (lbs)</Label>\n                  <Input \n                    type=\"number\" \n                    value={formData.weight}\n                    onChange={(e) => setFormData({...formData, weight: parseInt(e.target.value) || 0})}\n                    className=\"bg-background/50 border-white/10\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label>Age</Label>\n                  <Input \n                    type=\"number\" \n                    value={formData.age}\n                    onChange={(e) => setFormData({...formData, age: parseInt(e.target.value) || 0})}\n                    className=\"bg-background/50 border-white/10\"\n                  />\n                </div>\n                <div className=\"space-y-2 col-span-2\">\n                  <Label>Height</Label>\n                  <div className=\"flex gap-2\">\n                    <div className=\"flex-1 flex items-center gap-2\">\n                      <Input \n                        type=\"number\" \n                        value={formData.heightFt}\n                        onChange={(e) => setFormData({...formData, heightFt: parseInt(e.target.value) || 0})}\n                        className=\"bg-background/50 border-white/10\"\n                      />\n                      <span className=\"text-muted-foreground text-sm\">ft</span>\n                    </div>\n                    <div className=\"flex-1 flex items-center gap-2\">\n                       <Input \n                        type=\"number\" \n                        value={formData.heightIn}\n                        onChange={(e) => setFormData({...formData, heightIn: parseInt(e.target.value) || 0})}\n                        className=\"bg-background/50 border-white/10\"\n                      />\n                      <span className=\"text-muted-foreground text-sm\">in</span>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid grid-cols-3 gap-4\">\n              <Card className=\"bg-secondary/50 border-white/5 backdrop-blur-sm\">\n                <CardContent className=\"p-3 flex flex-col items-center text-center\">\n                  <span className=\"text-xs text-muted-foreground uppercase mb-1\">Weight</span>\n                  <span className=\"text-xl font-bold font-heading text-white\">{profile.weight} <span className=\"text-xs text-muted-foreground font-normal\">lbs</span></span>\n                </CardContent>\n              </Card>\n              <Card className=\"bg-secondary/50 border-white/5 backdrop-blur-sm\">\n                <CardContent className=\"p-3 flex flex-col items-center text-center\">\n                  <span className=\"text-xs text-muted-foreground uppercase mb-1\">Height</span>\n                  <span className=\"text-xl font-bold font-heading text-white\">{profile.heightFt}'{profile.heightIn}\"</span>\n                </CardContent>\n              </Card>\n              <Card className=\"bg-secondary/50 border-white/5 backdrop-blur-sm\">\n                 <CardContent className=\"p-3 flex flex-col items-center text-center\">\n                  <span className=\"text-xs text-muted-foreground uppercase mb-1\">Target</span>\n                  <span className=\"text-xl font-bold font-heading text-primary\">{macros.protein}g</span>\n                  <span className=\"text-[10px] text-muted-foreground\">Protein</span>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </section>\n\n        {/* Daily Stats & Gamification */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <Card className=\"bg-secondary/50 border-white/5 backdrop-blur-sm\">\n            <CardContent className=\"p-4 flex flex-col items-center text-center\">\n              <div className=\"p-2 rounded-full bg-orange-500/20 text-orange-500 mb-2\">\n                <Flame className=\"w-5 h-5\" />\n              </div>\n              <span className=\"text-2xl font-bold font-heading text-white\">{streak}</span>\n              <span className=\"text-xs text-muted-foreground uppercase\">Day Streak</span>\n            </CardContent>\n          </Card>\n          \n          {/* Readiness / Tier Card */}\n          <Card className={cn(\"border-white/5 backdrop-blur-sm relative overflow-hidden\", getTierBg(profile.tier))}>\n            {profile.xp >= 100 && (\n               <div className=\"absolute inset-0 bg-black/60 z-10 flex items-center justify-center p-2\">\n                 <Button size=\"sm\" onClick={promoteTier} className=\"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-bold animate-pulse\">\n                   <ArrowUpCircle className=\"w-4 h-4 mr-1\" />\n                   Promote\n                 </Button>\n               </div>\n            )}\n            <CardContent className=\"p-4 flex flex-col items-center text-center relative z-0\">\n              <div className={cn(\"p-2 rounded-full mb-2 bg-black/20\", getTierColor(profile.tier))}>\n                {profile.tier === \"Diamond\" || profile.tier === \"Elite\" ? <Crown className=\"w-5 h-5\" /> : <Trophy className=\"w-5 h-5\" />}\n              </div>\n              <span className={cn(\"text-2xl font-bold font-heading\", getTierColor(profile.tier))}>{profile.xp}%</span>\n              <span className=\"text-xs text-muted-foreground uppercase tracking-wide font-bold\">{profile.tier} Tier</span>\n              <Progress value={profile.xp} className=\"h-1 mt-2 w-full bg-black/20\" />\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Streak Calendar Section */}\n        <section>\n          <div className=\"flex flex-col gap-4 mb-4\">\n             <div className=\"flex justify-between items-center\">\n                <div className=\"flex items-center gap-2\">\n                    <h2 className=\"text-xl font-heading font-semibold text-white\">Activity Log</h2>\n                </div>\n                {selectedDate && (\n                    <div className=\"text-right\">\n                        <span className=\"text-xs font-bold text-primary uppercase tracking-wider block\">\n                            {format(selectedDate, 'MMMM do yyyy')}\n                        </span>\n                        <span className=\"text-sm font-medium text-white\">\n                             {getScheduledWorkoutForDate(selectedDate)}\n                        </span>\n                    </div>\n                )}\n             </div>\n          </div>\n          <Card className=\"bg-secondary/30 border-white/5 overflow-hidden\">\n             <CardContent className=\"p-4\">\n               <div className=\"w-full flex justify-center overflow-hidden\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={selectedDate}\n                      onSelect={(date) => date && setSelectedDate(date)}\n                      disabled={(date) => date > new Date()}\n                      className=\"pointer-events-auto bg-transparent border-0 p-0 w-full max-w-full\"\n                      modifiers={{\n                        logged: (date) => {\n                          // Use local date to avoid timezone issues\n                          const year = date.getFullYear();\n                          const month = String(date.getMonth() + 1).padStart(2, '0');\n                          const day = String(date.getDate()).padStart(2, '0');\n                          const dateStr = `${year}-${month}-${day}`;\n                          return profile.workoutHistory?.includes(dateStr) || false;\n                        },\n                        today: (date) => {\n                          const now = new Date();\n                          return date.getFullYear() === now.getFullYear() &&\n                                 date.getMonth() === now.getMonth() &&\n                                 date.getDate() === now.getDate();\n                        }\n                      }}\n                      modifiersClassNames={{\n                        logged: \"streak-logged-day\",\n                        today: \"calendar-today\"\n                      }}\n                    />\n               </div>\n             </CardContent>\n          </Card>\n        </section>\n\n        {/* Next Workout */}\n        <section>\n          <div className=\"flex justify-between items-center mb-4\">\n            <h2 className=\"text-xl font-heading font-semibold text-white\">Today's Workout</h2>\n            <Button variant=\"link\" className=\"text-xs text-muted-foreground\">View Schedule</Button>\n          </div>\n          <Card className=\"bg-card border-l-4 border-l-primary overflow-hidden group relative\">\n             <div className=\"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\" />\n            <CardContent className=\"p-5 relative z-10\">\n              <div className=\"flex justify-between items-start mb-2\">\n                <div>\n                  <span className=\"inline-block px-2 py-1 rounded text-[10px] font-bold bg-primary/20 text-primary mb-2 uppercase tracking-wider\">\n                     {profile.schedule[DAYS[new Date().getDay()]] ? \"Training\" : \"Rest\"}\n                  </span>\n                  <h3 className=\"text-lg font-bold text-white\">{getScheduledWorkoutForDate(new Date())}</h3>\n                </div>\n                <div className=\"text-right\">\n                  <span className=\"text-sm font-medium text-muted-foreground\">{profile.workoutDuration} min</span>\n                </div>\n              </div>\n              <div className=\"space-y-2\">\n                 <div className=\"flex items-center text-sm text-muted-foreground\">\n                   <div className=\"w-1.5 h-1.5 rounded-full bg-primary mr-2\" />\n                   See Training tab for details\n                 </div>\n              </div>\n              <div className=\"flex flex-col gap-2 mt-4\">\n                <Button \n                  className={cn(\n                    \"w-full font-bold border transition-all\",\n                    isTodayCompleted \n                      ? \"bg-green-500/20 text-green-500 border-green-500/50 hover:bg-green-500/30\"\n                      : \"bg-primary/10 text-primary border-primary/50 hover:bg-primary/20\"\n                  )}\n                  onClick={handleCompleteWorkout}\n                  disabled={isTodayCompleted}\n                >\n                  {isTodayCompleted ? <><CheckCircle2 className=\"w-4 h-4 mr-2\"/> Workout Completed (+15 XP)</> : \"Complete & Log Workout\"}\n                </Button>\n                {isTodayCompleted && (\n                  <Button \n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"text-muted-foreground hover:text-white\"\n                    onClick={undoWorkout}\n                  >\n                    <Undo2 className=\"w-3 h-3 mr-1\"/> Undo\n                  </Button>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </section>\n\n        {/* Nutrition Summary - Synced with Diet.tsx */}\n        <section>\n           <div className=\"flex justify-between items-center mb-4\">\n            <h2 className=\"text-xl font-heading font-semibold text-white\">Nutrition Progress</h2>\n          </div>\n          <Card className=\"bg-secondary/30 border-white/5\">\n            <CardContent className=\"p-5\">\n              <div className=\"flex justify-between items-end mb-2\">\n                <span className=\"text-sm font-medium text-muted-foreground\">Protein</span>\n                <span className=\"text-sm font-bold text-white\">{consumedMacros.protein}g / {macros.protein}g</span>\n              </div>\n              <Progress value={(consumedMacros.protein / macros.protein) * 100} className=\"h-2 bg-secondary\" />\n              \n              <div className=\"flex justify-between items-end mt-4 mb-2\">\n                <span className=\"text-sm font-medium text-muted-foreground\">Calories</span>\n                <span className=\"text-sm font-bold text-white\">{consumedMacros.calories} / {macros.calories}</span>\n              </div>\n              <Progress value={(consumedMacros.calories / macros.calories) * 100} className=\"h-2 bg-secondary\" />\n            </CardContent>\n          </Card>\n        </section>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":19275,"size_tokens":null},"client/src/index.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  \n  --color-background: hsl(var(--background));\n  --color-foreground: hsl(var(--foreground));\n  \n  --color-card: hsl(var(--card));\n  --color-card-foreground: hsl(var(--card-foreground));\n  \n  --color-popover: hsl(var(--popover));\n  --color-popover-foreground: hsl(var(--popover-foreground));\n  \n  --color-primary: hsl(var(--primary));\n  --color-primary-foreground: hsl(var(--primary-foreground));\n  \n  --color-secondary: hsl(var(--secondary));\n  --color-secondary-foreground: hsl(var(--secondary-foreground));\n  \n  --color-muted: hsl(var(--muted));\n  --color-muted-foreground: hsl(var(--muted-foreground));\n  \n  --color-accent: hsl(var(--accent));\n  --color-accent-foreground: hsl(var(--accent-foreground));\n  \n  --color-destructive: hsl(var(--destructive));\n  --color-destructive-foreground: hsl(var(--destructive-foreground));\n  \n  --color-border: hsl(var(--border));\n  --color-input: hsl(var(--input));\n  --color-ring: hsl(var(--ring));\n  \n  --color-chart-1: hsl(var(--chart-1));\n  --color-chart-2: hsl(var(--chart-2));\n  --color-chart-3: hsl(var(--chart-3));\n  --color-chart-4: hsl(var(--chart-4));\n  --color-chart-5: hsl(var(--chart-5));\n  \n  --font-sans: 'Inter', sans-serif;\n  --font-heading: 'Oswald', sans-serif;\n  \n  --radius: 0.75rem;\n}\n\n:root {\n  /* Ice & Steel Theme - Dark Mode Default mainly */\n  --background: 222 47% 6%;    /* Deep Navy */\n  --foreground: 210 40% 98%;   /* Ice White */\n  \n  --card: 220 39% 11%;\n  --card-foreground: 210 40% 98%;\n  \n  --popover: 220 39% 11%;\n  --popover-foreground: 210 40% 98%;\n  \n  --primary: 190 100% 50%;     /* Electric Ice Blue */\n  --primary-foreground: 222 47% 11%;\n  \n  --secondary: 217 33% 17%;\n  --secondary-foreground: 210 40% 98%;\n  \n  --muted: 217 33% 17%;\n  --muted-foreground: 215 20% 65%;\n  \n  --accent: 190 100% 50%;\n  --accent-foreground: 222 47% 11%;\n  \n  --destructive: 0 62.8% 30.6%;\n  --destructive-foreground: 210 40% 98%;\n  \n  --border: 217 33% 20%;\n  --input: 217 33% 20%;\n  --ring: 190 100% 50%;\n  \n  --radius: 0.75rem;\n  \n  --chart-1: 190 100% 50%;\n  --chart-2: 210 100% 50%;\n  --chart-3: 160 100% 50%;\n  --chart-4: 280 100% 60%;\n  --chart-5: 340 100% 60%;\n}\n\n.dark {\n  /* Same as root since we are going for a dark theme by default */\n  --background: 222 47% 6%;\n  --foreground: 210 40% 98%;\n  \n  --card: 220 39% 11%;\n  --card-foreground: 210 40% 98%;\n  \n  --popover: 220 39% 11%;\n  --popover-foreground: 210 40% 98%;\n  \n  --primary: 190 100% 50%;\n  --primary-foreground: 222 47% 11%;\n  \n  --secondary: 217 33% 17%;\n  --secondary-foreground: 210 40% 98%;\n  \n  --muted: 217 33% 17%;\n  --muted-foreground: 215 20% 65%;\n  \n  --accent: 190 100% 50%;\n  --accent-foreground: 222 47% 11%;\n  \n  --destructive: 0 62.8% 30.6%;\n  --destructive-foreground: 210 40% 98%;\n  \n  --border: 217 33% 20%;\n  --input: 217 33% 20%;\n  --ring: 190 100% 50%;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n  h1, h2, h3, h4, h5, h6 {\n    @apply font-heading uppercase tracking-wide;\n  }\n}\n\n/* Custom utilities */\n.glass-panel {\n  @apply bg-card/60 backdrop-blur-md border border-white/5;\n}\n\n.neon-glow {\n  box-shadow: 0 0 10px hsla(190, 100%, 50%, 0.3), 0 0 20px hsla(190, 100%, 50%, 0.1);\n}\n\n/* Make all calendar day numbers white */\n.rdp-day {\n  color: white !important;\n}\n\n/* Calendar streak day styling - logged workout days get a centered cyan circle */\n.streak-logged-day {\n  background-color: hsl(190 100% 50%) !important;\n  color: hsl(222 47% 11%) !important;\n  font-weight: bold !important;\n  border-radius: 9999px !important;\n  box-shadow: none !important;\n}\n\n/* When a logged day is also selected, keep the same simple circle */\n.streak-logged-day[data-selected-single=\"true\"] {\n  background-color: hsl(190 100% 50%) !important;\n  box-shadow: none !important;\n}\n\n/* Today's date - outlined circle (not filled until workout completed) */\n.calendar-today:not(.streak-logged-day) {\n  background-color: transparent !important;\n  border: 2px solid hsl(190 100% 50%) !important;\n  border-radius: 9999px !important;\n  color: white !important;\n}\n","path":null,"size_bytes":4348,"size_tokens":null},"client/src/components/ui/field.tsx":{"content":"\"use client\"\n\nimport { useMemo } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction FieldSet({ className, ...props }: React.ComponentProps<\"fieldset\">) {\n  return (\n    <fieldset\n      data-slot=\"field-set\"\n      className={cn(\n        \"flex flex-col gap-6\",\n        \"has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLegend({\n  className,\n  variant = \"legend\",\n  ...props\n}: React.ComponentProps<\"legend\"> & { variant?: \"legend\" | \"label\" }) {\n  return (\n    <legend\n      data-slot=\"field-legend\"\n      data-variant={variant}\n      className={cn(\n        \"mb-3 font-medium\",\n        \"data-[variant=legend]:text-base\",\n        \"data-[variant=label]:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-group\"\n      className={cn(\n        \"group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst fieldVariants = cva(\n  \"group/field data-[invalid=true]:text-destructive flex w-full gap-3\",\n  {\n    variants: {\n      orientation: {\n        vertical: [\"flex-col [&>*]:w-full [&>.sr-only]:w-auto\"],\n        horizontal: [\n          \"flex-row items-center\",\n          \"[&>[data-slot=field-label]]:flex-auto\",\n          \"has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px has-[>[data-slot=field-content]]:items-start\",\n        ],\n        responsive: [\n          \"@md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto flex-col [&>*]:w-full [&>.sr-only]:w-auto\",\n          \"@md/field-group:[&>[data-slot=field-label]]:flex-auto\",\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: \"vertical\",\n    },\n  }\n)\n\nfunction Field({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof fieldVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"field\"\n      data-orientation={orientation}\n      className={cn(fieldVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction FieldContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-content\"\n      className={cn(\n        \"group/field-content flex flex-1 flex-col gap-1.5 leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={cn(\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50\",\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>[data-slot=field]]:p-4\",\n        \"has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-label\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug group-data-[disabled=true]/field:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"field-description\"\n      className={cn(\n        \"text-muted-foreground text-sm font-normal leading-normal group-has-[[data-orientation=horizontal]]/field:text-balance\",\n        \"nth-last-2:-mt-1 last:mt-0 [[data-variant=legend]+&]:-mt-1.5\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      data-slot=\"field-separator\"\n      data-content={!!children}\n      className={cn(\n        \"relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2\",\n        className\n      )}\n      {...props}\n    >\n      <Separator className=\"absolute inset-0 top-1/2\" />\n      {children && (\n        <span\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\n          data-slot=\"field-separator-content\"\n        >\n          {children}\n        </span>\n      )}\n    </div>\n  )\n}\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors) {\n      return null\n    }\n\n    if (errors?.length === 1 && errors[0]?.message) {\n      return errors[0].message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {errors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn(\"text-destructive text-sm font-normal\", className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n\nexport {\n  Field,\n  FieldLabel,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n  FieldContent,\n  FieldTitle,\n}\n","path":null,"size_bytes":6044,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\"\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button, buttonVariants } from \"@/components/ui/button\"\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:1.15rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent h-fit w-full\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"default\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-full\", defaultClassNames.root),\n        months: cn(\n          \"relative flex flex-col gap-4 md:flex-row w-full\",\n          defaultClassNames.months\n        ),\n        month: cn(\"flex w-full flex-col gap-2\", defaultClassNames.month),\n        nav: cn(\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\n          defaultClassNames.nav\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_previous\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_next\n        ),\n        month_caption: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\n          defaultClassNames.month_caption\n        ),\n        dropdowns: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\n          defaultClassNames.dropdowns\n        ),\n        dropdown_root: cn(\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\n          defaultClassNames.dropdown_root\n        ),\n        dropdown: cn(\n          \"bg-popover absolute inset-0 opacity-0\",\n          defaultClassNames.dropdown\n        ),\n        caption_label: cn(\n          \"select-none font-medium\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\n          defaultClassNames.caption_label\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\n          defaultClassNames.weekday\n        ),\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\n        week_number_header: cn(\n          \"w-[--cell-size] select-none\",\n          defaultClassNames.week_number_header\n        ),\n        week_number: cn(\n          \"text-muted-foreground select-none text-[0.8rem]\",\n          defaultClassNames.week_number\n        ),\n        day: cn(\n          \"group/day relative flex-1 select-none p-0 text-center flex items-center justify-center\",\n        ),\n        range_start: cn(\n          \"bg-accent rounded-l-md\",\n          defaultClassNames.range_start\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\n        today: cn(\n          \"rounded-full\",\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            )\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground flex items-center justify-center size-8 min-w-8 font-normal leading-none [&>span]:text-xs [&>span]:opacity-70 !rounded-full border-0 ring-0 outline-none focus:ring-0 focus:outline-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n","path":null,"size_bytes":7081,"size_tokens":null},"client/src/pages/Diet.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Button } from \"@/components/ui/button\";\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogFooter } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { AlertCircle, Check, Target, Info, Plus, ChefHat, Camera, Loader2, History, Image } from \"lucide-react\";\nimport foodImage from \"@assets/generated_images/healthy_meal_prep_food.png\";\nimport { useUser } from \"@/lib/UserContext\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\n\ntype SavedCustomMeal = {\n  id: string;\n  name: string;\n  calories: number;\n  protein: number;\n  carbs: number;\n  fats: number;\n  mealType: string;\n  createdAt?: string;\n};\n\ntype MealOption = {\n  id: string;\n  name: string;\n  calories: number;\n  protein: number;\n  carbs: number;\n  fats: number;\n  recipe?: string; \n};\n\ntype MealSection = {\n  id: string;\n  title: string;\n  options: MealOption[];\n};\n\nexport default function Diet() {\n  const { profile, updateProfile, macros, recommendedMacros, consumedMeals, toggleConsumedMeal, selectedMeals, setSelectedMeals, updateDailyStats } = useUser();\n  \n  // State for custom meal entry\n  const [customMeals, setCustomMeals] = useState<Record<string, MealOption[]>>({\n    breakfast: [],\n    lunch: [],\n    snack: [],\n    dinner: []\n  });\n  \n  const [isCustomDialogOpen, setIsCustomDialogOpen] = useState(false);\n  const [currentSectionId, setCurrentSectionId] = useState(\"\");\n  const [newMeal, setNewMeal] = useState({\n    name: \"\",\n    calories: \"\",\n    protein: \"\",\n    carbs: \"\",\n    fats: \"\"\n  });\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n\n  const queryClient = useQueryClient();\n\n  // Get today's date\n  const getTodayDate = () => {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0');\n    const day = String(now.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  // Fetch today's meal logs to restore custom meals\n  const { data: mealLogs = [] } = useQuery<any[]>({\n    queryKey: [\"/api/meals\", getTodayDate()],\n    queryFn: async () => {\n      const res = await fetch(`/api/meals/${getTodayDate()}`);\n      if (!res.ok) throw new Error(\"Failed to fetch meal logs\");\n      return res.json();\n    },\n  });\n\n  // Restore custom meals from meal logs on load\n  useEffect(() => {\n    if (mealLogs.length > 0) {\n      const restoredCustomMeals: Record<string, MealOption[]> = {\n        breakfast: [],\n        lunch: [],\n        snack: [],\n        dinner: []\n      };\n      \n      mealLogs.forEach((log: any) => {\n        // If this is a custom meal (has nutrition data stored), add it to customMeals\n        if (log.mealId?.startsWith(\"custom_\") && log.mealName && log.calories != null) {\n          const meal: MealOption = {\n            id: log.mealId,\n            name: log.mealName,\n            calories: log.calories,\n            protein: log.protein || 0,\n            carbs: log.carbs || 0,\n            fats: log.fats || 0,\n            recipe: \"Custom meal - no recipe instructions.\"\n          };\n          \n          // Only add if not already in the list\n          if (!restoredCustomMeals[log.mealType].some(m => m.id === log.mealId)) {\n            restoredCustomMeals[log.mealType].push(meal);\n          }\n        }\n      });\n      \n      // Merge with existing custom meals (don't overwrite user's current session additions)\n      setCustomMeals(prev => ({\n        breakfast: [...restoredCustomMeals.breakfast, ...prev.breakfast.filter(m => !restoredCustomMeals.breakfast.some(r => r.id === m.id))],\n        lunch: [...restoredCustomMeals.lunch, ...prev.lunch.filter(m => !restoredCustomMeals.lunch.some(r => r.id === m.id))],\n        snack: [...restoredCustomMeals.snack, ...prev.snack.filter(m => !restoredCustomMeals.snack.some(r => r.id === m.id))],\n        dinner: [...restoredCustomMeals.dinner, ...prev.dinner.filter(m => !restoredCustomMeals.dinner.some(r => r.id === m.id))],\n      }));\n    }\n  }, [mealLogs]);\n\n  // Fetch saved custom meals from database\n  const { data: savedCustomMeals = [] } = useQuery<SavedCustomMeal[]>({\n    queryKey: [\"/api/custom-meals\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/custom-meals\");\n      if (!res.ok) throw new Error(\"Failed to fetch custom meals\");\n      return res.json();\n    },\n  });\n\n  // Mutation to save custom meal\n  const saveCustomMealMutation = useMutation({\n    mutationFn: async (meal: { name: string; calories: number; protein: number; carbs: number; fats: number; mealType: string }) => {\n      const res = await fetch(\"/api/custom-meals\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(meal),\n      });\n      if (!res.ok) throw new Error(\"Failed to save custom meal\");\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/custom-meals\"] });\n    },\n  });\n\n  // Mutation to save meal log\n  const saveMealMutation = useMutation({\n    mutationFn: async (data: { date: string; mealType: string; mealId: string; consumed: boolean; mealName?: string; calories?: number; protein?: number; carbs?: number; fats?: number; customMealId?: string }) => {\n      const res = await fetch(\"/api/meals\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(\"Failed to save meal log\");\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/meals\"] });\n    },\n  });\n\n  // Get saved custom meals for a specific meal type (most recent first, limit to 3)\n  const getSavedMealsForType = (mealType: string) => {\n    return [...savedCustomMeals]\n      .filter(m => m.mealType === mealType)\n      .sort((a, b) => new Date(b.createdAt || 0).getTime() - new Date(a.createdAt || 0).getTime())\n      .slice(0, 3);\n  };\n\n  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    setIsAnalyzing(true);\n    \n    const reader = new FileReader();\n    reader.onload = async (event) => {\n      const base64 = event.target?.result as string;\n      setImagePreview(base64);\n      \n      try {\n        const response = await fetch(\"/api/analyze-food\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ imageBase64: base64 }),\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          setNewMeal({\n            name: data.name || \"\",\n            calories: String(data.calories || 0),\n            protein: String(data.protein || 0),\n            carbs: String(data.carbs || 0),\n            fats: String(data.fats || 0),\n          });\n        } else {\n          console.error(\"Failed to analyze food:\", response.status);\n          alert(\"Could not analyze the photo. Please try again or enter the details manually.\");\n        }\n      } catch (error) {\n        console.error(\"Error analyzing food:\", error);\n        alert(\"Could not analyze the photo. Please try again or enter the details manually.\");\n      } finally {\n        setIsAnalyzing(false);\n      }\n    };\n    reader.readAsDataURL(file);\n  };\n\n  // Base meals with simple names AND recipes - Expanded for all ages\n  const baseMeals: MealSection[] = [\n    {\n      id: \"breakfast\",\n      title: \"Breakfast\",\n      options: [\n        { \n          id: \"oatmeal\", \n          name: \"Oatmeal & Berries\", \n          calories: 550, \n          protein: 35, \n          carbs: 75, \n          fats: 12,\n          recipe: \"1. Mix 1 cup oats with 1 scoop whey protein.\\n2. Add hot water or milk and stir well.\\n3. Top with 1/2 cup mixed berries and a tbsp of chia seeds.\"\n        },\n        { \n          id: \"eggs_toast\", \n          name: \"Eggs & Toast\", \n          calories: 520, \n          protein: 40, \n          carbs: 30, \n          fats: 25,\n          recipe: \"1. Scramble or fry 3 large eggs.\\n2. Toast 2 slices of whole wheat bread.\\n3. Serve with a side of spinach or fruit.\"\n        },\n        { \n          id: \"yogurt_parfait\", \n          name: \"Yogurt Parfait\", \n          calories: 450, \n          protein: 35, \n          carbs: 50, \n          fats: 10,\n          recipe: \"1. Fill bowl with 1 cup Greek Yogurt (0% or 2%).\\n2. Layer with 1/2 cup granola and honey.\\n3. Top with fresh strawberries.\"\n        },\n        { \n          id: \"pancakes_protein\", \n          name: \"Protein Pancakes\", \n          calories: 480, \n          protein: 38, \n          carbs: 55, \n          fats: 14,\n          recipe: \"1. Mix 1 cup pancake mix with 1 scoop protein powder.\\n2. Add 1 egg and 3/4 cup milk, stir until smooth.\\n3. Cook on griddle and top with fresh fruit and maple syrup.\"\n        },\n        { \n          id: \"avocado_toast\", \n          name: \"Avocado Toast & Eggs\", \n          calories: 490, \n          protein: 28, \n          carbs: 35, \n          fats: 28,\n          recipe: \"1. Toast 2 slices whole grain bread.\\n2. Mash 1 ripe avocado and spread on toast.\\n3. Top with 2 poached eggs and everything seasoning.\"\n        },\n        { \n          id: \"smoothie_bowl\", \n          name: \"Protein Smoothie Bowl\", \n          calories: 520, \n          protein: 40, \n          carbs: 60, \n          fats: 15,\n          recipe: \"1. Blend frozen berries, banana, Greek yogurt, and protein powder.\\n2. Pour into bowl.\\n3. Top with granola, chia seeds, and sliced almonds.\"\n        },\n        { \n          id: \"breakfast_burrito\", \n          name: \"Breakfast Burrito\", \n          calories: 600, \n          protein: 42, \n          carbs: 45, \n          fats: 28,\n          recipe: \"1. Scramble 3 eggs with diced peppers.\\n2. Add black beans and shredded cheese.\\n3. Wrap in large tortilla with salsa.\"\n        },\n        { \n          id: \"overnight_oats\", \n          name: \"Overnight Oats\", \n          calories: 480, \n          protein: 30, \n          carbs: 65, \n          fats: 14,\n          recipe: \"1. Mix 1 cup oats with 1 cup milk and Greek yogurt.\\n2. Add chia seeds and honey, refrigerate overnight.\\n3. Top with fresh fruit in the morning.\"\n        },\n        { \n          id: \"french_toast\", \n          name: \"French Toast\", \n          calories: 540, \n          protein: 32, \n          carbs: 60, \n          fats: 18,\n          recipe: \"1. Dip bread slices in beaten eggs with cinnamon.\\n2. Cook on buttered griddle until golden.\\n3. Serve with fruit and a drizzle of maple syrup.\"\n        },\n        { \n          id: \"egg_muffins\", \n          name: \"Egg Muffin Cups\", \n          calories: 420, \n          protein: 35, \n          carbs: 15, \n          fats: 26,\n          recipe: \"1. Whisk 6 eggs with diced veggies and cheese.\\n2. Pour into muffin tin and bake at 350F for 20 mins.\\n3. Store extras in fridge for quick breakfasts.\"\n        }\n      ]\n    },\n    {\n      id: \"lunch\",\n      title: \"Lunch\",\n      options: [\n        { \n          id: \"chicken_rice\", \n          name: \"Chicken & Rice\", \n          calories: 650, \n          protein: 50, \n          carbs: 70, \n          fats: 18,\n          recipe: \"1. Grill 6oz chicken breast with salt/pepper.\\n2. Cook 1 cup of jasmine or brown rice.\\n3. Serve with steamed broccoli.\"\n        },\n        { \n          id: \"turkey_wrap\", \n          name: \"Turkey Wrap\", \n          calories: 580, \n          protein: 45, \n          carbs: 55, \n          fats: 20,\n          recipe: \"1. Lay out large whole wheat tortilla.\\n2. Add 5oz sliced turkey, lettuce, tomato, and avocado.\\n3. Roll tight and slice in half.\"\n        },\n        { \n          id: \"beef_stirfry\", \n          name: \"Beef Stir Fry\", \n          calories: 600, \n          protein: 55, \n          carbs: 10, \n          fats: 35,\n          recipe: \"1. Saut sliced lean beef strips in pan.\\n2. Add bell peppers, onions, and snap peas.\\n3. Season with soy sauce and garlic. Serve over cauliflower rice or regular rice.\"\n        },\n        { \n          id: \"tuna_salad\", \n          name: \"Tuna Power Salad\", \n          calories: 520, \n          protein: 48, \n          carbs: 25, \n          fats: 28,\n          recipe: \"1. Mix 2 cans tuna with light mayo and mustard.\\n2. Serve over mixed greens with cherry tomatoes.\\n3. Add hard-boiled egg and olive oil dressing.\"\n        },\n        { \n          id: \"chicken_caesar\", \n          name: \"Chicken Caesar Salad\", \n          calories: 580, \n          protein: 52, \n          carbs: 20, \n          fats: 32,\n          recipe: \"1. Grill and slice 6oz chicken breast.\\n2. Toss romaine with Caesar dressing and parmesan.\\n3. Top with chicken and croutons.\"\n        },\n        { \n          id: \"quinoa_bowl\", \n          name: \"Quinoa Power Bowl\", \n          calories: 620, \n          protein: 45, \n          carbs: 65, \n          fats: 22,\n          recipe: \"1. Cook 1 cup quinoa according to package.\\n2. Top with grilled chicken, chickpeas, and cucumber.\\n3. Drizzle with tahini dressing.\"\n        },\n        { \n          id: \"burrito_bowl\", \n          name: \"Burrito Bowl\", \n          calories: 680, \n          protein: 48, \n          carbs: 70, \n          fats: 24,\n          recipe: \"1. Layer brown rice in bowl.\\n2. Add grilled chicken, black beans, corn, and salsa.\\n3. Top with cheese, sour cream, and guacamole.\"\n        },\n        { \n          id: \"grilled_cheese_soup\", \n          name: \"Grilled Cheese & Soup\", \n          calories: 550, \n          protein: 28, \n          carbs: 50, \n          fats: 28,\n          recipe: \"1. Make grilled cheese with whole grain bread and cheddar.\\n2. Heat up tomato soup.\\n3. Serve together for a classic combo.\"\n        },\n        { \n          id: \"teriyaki_chicken\", \n          name: \"Teriyaki Chicken Bowl\", \n          calories: 640, \n          protein: 52, \n          carbs: 68, \n          fats: 18,\n          recipe: \"1. Cook chicken thighs in teriyaki sauce.\\n2. Serve over white rice with steamed edamame.\\n3. Garnish with sesame seeds and green onion.\"\n        },\n        { \n          id: \"turkey_sandwich\", \n          name: \"Turkey Club Sandwich\", \n          calories: 560, \n          protein: 42, \n          carbs: 45, \n          fats: 24,\n          recipe: \"1. Layer turkey, bacon, lettuce, tomato on toasted bread.\\n2. Add light mayo.\\n3. Serve with side of fruit or chips.\"\n        },\n        { \n          id: \"shrimp_tacos\", \n          name: \"Shrimp Tacos\", \n          calories: 520, \n          protein: 40, \n          carbs: 48, \n          fats: 20,\n          recipe: \"1. Saut shrimp with taco seasoning.\\n2. Serve in corn tortillas with cabbage slaw.\\n3. Top with lime crema and cilantro.\"\n        }\n      ]\n    },\n    {\n      id: \"snack\",\n      title: \"Snack\",\n      options: [\n        { \n          id: \"protein_shake\", \n          name: \"Protein Shake\", \n          calories: 350, \n          protein: 40, \n          carbs: 40, \n          fats: 5,\n          recipe: \"1. Add 1 scoop whey isolate to shaker.\\n2. Add 1 banana and 1 cup almond milk.\\n3. Shake or blend with ice.\"\n        },\n        { \n          id: \"rice_cakes_pb\", \n          name: \"PB & Rice Cakes\", \n          calories: 300, \n          protein: 10, \n          carbs: 35, \n          fats: 14,\n          recipe: \"1. Take 3 plain rice cakes.\\n2. Spread 1 tbsp peanut butter across them.\\n3. Top with sliced banana if desired.\"\n        },\n        { \n          id: \"protein_bar\", \n          name: \"Protein Bar\", \n          calories: 240, \n          protein: 20, \n          carbs: 25, \n          fats: 9,\n          recipe: \"1. Unwrap and enjoy.\\n2. Drink 500ml water with it for digestion.\"\n        },\n        { \n          id: \"trail_mix\", \n          name: \"Trail Mix & Fruit\", \n          calories: 320, \n          protein: 12, \n          carbs: 35, \n          fats: 18,\n          recipe: \"1. Mix almonds, walnuts, and dried cranberries.\\n2. Add a handful of dark chocolate chips.\\n3. Pair with an apple or banana.\"\n        },\n        { \n          id: \"greek_yogurt\", \n          name: \"Greek Yogurt & Honey\", \n          calories: 280, \n          protein: 25, \n          carbs: 30, \n          fats: 8,\n          recipe: \"1. Scoop 1 cup Greek yogurt into bowl.\\n2. Drizzle with 1 tbsp honey.\\n3. Sprinkle with cinnamon and walnuts.\"\n        },\n        { \n          id: \"cottage_cheese\", \n          name: \"Cottage Cheese & Fruit\", \n          calories: 260, \n          protein: 28, \n          carbs: 22, \n          fats: 8,\n          recipe: \"1. Scoop 1 cup cottage cheese into bowl.\\n2. Top with pineapple chunks or peaches.\\n3. Add a drizzle of honey.\"\n        },\n        { \n          id: \"apple_almond\", \n          name: \"Apple & Almond Butter\", \n          calories: 290, \n          protein: 8, \n          carbs: 35, \n          fats: 16,\n          recipe: \"1. Slice 1 medium apple.\\n2. Serve with 2 tbsp almond butter for dipping.\\n3. Sprinkle with cinnamon.\"\n        },\n        { \n          id: \"hard_boiled_eggs\", \n          name: \"Hard Boiled Eggs\", \n          calories: 210, \n          protein: 18, \n          carbs: 2, \n          fats: 14,\n          recipe: \"1. Boil 3 eggs for 10-12 minutes.\\n2. Cool and peel.\\n3. Season with salt and pepper.\"\n        },\n        { \n          id: \"beef_jerky\", \n          name: \"Beef Jerky & Cheese\", \n          calories: 280, \n          protein: 32, \n          carbs: 8, \n          fats: 14,\n          recipe: \"1. Grab 2oz beef jerky.\\n2. Pair with 1oz cheese stick.\\n3. Great grab-and-go option.\"\n        },\n        { \n          id: \"hummus_veggies\", \n          name: \"Hummus & Veggies\", \n          calories: 220, \n          protein: 8, \n          carbs: 25, \n          fats: 12,\n          recipe: \"1. Scoop 4 tbsp hummus into bowl.\\n2. Cut carrots, celery, and cucumber.\\n3. Dip and enjoy.\"\n        },\n        { \n          id: \"smoothie\", \n          name: \"Fruit Smoothie\", \n          calories: 340, \n          protein: 30, \n          carbs: 45, \n          fats: 6,\n          recipe: \"1. Blend 1 cup frozen berries with 1 scoop protein.\\n2. Add 1 cup milk and banana.\\n3. Blend until smooth.\"\n        },\n        { \n          id: \"energy_balls\", \n          name: \"Energy Balls\", \n          calories: 260, \n          protein: 12, \n          carbs: 28, \n          fats: 14,\n          recipe: \"1. Mix oats, peanut butter, honey, and chocolate chips.\\n2. Roll into 6 balls.\\n3. Refrigerate for 30 mins before eating.\"\n        }\n      ]\n    },\n    {\n      id: \"dinner\",\n      title: \"Dinner\",\n      options: [\n        { \n          id: \"salmon\", \n          name: \"Salmon & Rice\", \n          calories: 700, \n          protein: 45, \n          carbs: 60, \n          fats: 30,\n          recipe: \"1. Bake 6oz salmon fillet at 400F for 12-15 mins.\\n2. Serve with 1 cup wild rice.\\n3. Add asparagus on the side.\"\n        },\n        { \n          id: \"steak\", \n          name: \"Steak & Potato\", \n          calories: 750, \n          protein: 60, \n          carbs: 50, \n          fats: 35,\n          recipe: \"1. Pan sear 8oz sirloin steak (medium rare).\\n2. Bake or boil 1 medium sweet potato.\\n3. Season simple with salt/pepper.\"\n        },\n        { \n          id: \"pasta\", \n          name: \"Pasta Bolognese\", \n          calories: 800, \n          protein: 50, \n          carbs: 90, \n          fats: 25,\n          recipe: \"1. Brown lean ground beef/turkey in pot.\\n2. Add marinara sauce and simmer.\\n3. Serve over 2 cups cooked pasta.\"\n        },\n        { \n          id: \"chicken_breast\", \n          name: \"Baked Chicken Breast\", \n          calories: 650, \n          protein: 55, \n          carbs: 45, \n          fats: 22,\n          recipe: \"1. Season chicken breast with herbs and olive oil.\\n2. Bake at 400F for 25 minutes.\\n3. Serve with roasted vegetables and quinoa.\"\n        },\n        { \n          id: \"pork_chops\", \n          name: \"Grilled Pork Chops\", \n          calories: 680, \n          protein: 52, \n          carbs: 40, \n          fats: 32,\n          recipe: \"1. Season pork chops with garlic and rosemary.\\n2. Grill 4-5 minutes per side.\\n3. Serve with mashed potatoes and green beans.\"\n        },\n        { \n          id: \"shrimp_pasta\", \n          name: \"Shrimp Alfredo\", \n          calories: 720, \n          protein: 48, \n          carbs: 65, \n          fats: 30,\n          recipe: \"1. Saut shrimp in garlic butter.\\n2. Cook fettuccine and toss with alfredo sauce.\\n3. Combine and top with parmesan.\"\n        },\n        { \n          id: \"turkey_meatballs\", \n          name: \"Turkey Meatballs\", \n          calories: 620, \n          protein: 50, \n          carbs: 55, \n          fats: 22,\n          recipe: \"1. Mix ground turkey with breadcrumbs and egg.\\n2. Bake meatballs at 400F for 20 mins.\\n3. Serve over whole wheat pasta with marinara.\"\n        },\n        { \n          id: \"fish_tacos\", \n          name: \"Fish Tacos\", \n          calories: 580, \n          protein: 42, \n          carbs: 52, \n          fats: 24,\n          recipe: \"1. Season tilapia with cumin and grill.\\n2. Serve in corn tortillas with cabbage slaw.\\n3. Top with lime crema and fresh cilantro.\"\n        },\n        { \n          id: \"chicken_stir_fry\", \n          name: \"Chicken Stir Fry\", \n          calories: 640, \n          protein: 52, \n          carbs: 55, \n          fats: 20,\n          recipe: \"1. Slice chicken breast and stir fry with vegetables.\\n2. Add soy sauce and sesame oil.\\n3. Serve over brown rice.\"\n        },\n        { \n          id: \"bbq_chicken\", \n          name: \"BBQ Chicken & Cornbread\", \n          calories: 720, \n          protein: 55, \n          carbs: 65, \n          fats: 28,\n          recipe: \"1. Grill chicken thighs with BBQ sauce.\\n2. Serve with baked beans and cornbread.\\n3. Add coleslaw on the side.\"\n        },\n        { \n          id: \"stuffed_peppers\", \n          name: \"Stuffed Bell Peppers\", \n          calories: 580, \n          protein: 42, \n          carbs: 48, \n          fats: 24,\n          recipe: \"1. Mix ground turkey with rice and tomato sauce.\\n2. Stuff into halved bell peppers.\\n3. Bake at 375F for 35 minutes with cheese on top.\"\n        },\n        { \n          id: \"cod_veggies\", \n          name: \"Baked Cod & Veggies\", \n          calories: 520, \n          protein: 48, \n          carbs: 35, \n          fats: 18,\n          recipe: \"1. Season cod with lemon and dill.\\n2. Bake at 400F with zucchini and tomatoes.\\n3. Serve with a side of brown rice.\"\n        }\n      ]\n    }\n  ];\n\n  // Merge base meals with custom meals\n  const meals = baseMeals.map(section => ({\n    ...section,\n    options: [...section.options, ...customMeals[section.id]]\n  }));\n\n  const handleAddCustomMeal = () => {\n    if (!newMeal.name || !currentSectionId) return;\n    \n    const mealId = `custom_${Date.now()}`;\n    const meal: MealOption = {\n      id: mealId,\n      name: newMeal.name,\n      calories: parseInt(newMeal.calories) || 0,\n      protein: parseInt(newMeal.protein) || 0,\n      carbs: parseInt(newMeal.carbs) || 0,\n      fats: parseInt(newMeal.fats) || 0,\n      recipe: \"Custom meal - no recipe instructions.\"\n    };\n    \n    // Save to database\n    saveCustomMealMutation.mutate({\n      name: newMeal.name,\n      calories: parseInt(newMeal.calories) || 0,\n      protein: parseInt(newMeal.protein) || 0,\n      carbs: parseInt(newMeal.carbs) || 0,\n      fats: parseInt(newMeal.fats) || 0,\n      mealType: currentSectionId,\n    });\n    \n    setCustomMeals(prev => ({\n      ...prev,\n      [currentSectionId]: [...prev[currentSectionId], meal]\n    }));\n    \n    // Auto-select the new custom meal\n    setSelectedMeals(prev => ({\n      ...prev,\n      [currentSectionId]: mealId\n    }));\n    \n    setIsCustomDialogOpen(false);\n    setNewMeal({ name: \"\", calories: \"\", protein: \"\", carbs: \"\", fats: \"\" });\n    setImagePreview(null);\n  };\n\n  // Quickly add a saved custom meal to the current section\n  const handleQuickAddSavedMeal = (savedMeal: SavedCustomMeal, sectionId: string) => {\n    // Use a unique ID for this meal instance\n    const mealId = `saved_${savedMeal.id}_${Date.now()}`;\n    const meal: MealOption = {\n      id: mealId,\n      name: savedMeal.name,\n      calories: savedMeal.calories,\n      protein: savedMeal.protein,\n      carbs: savedMeal.carbs,\n      fats: savedMeal.fats,\n      recipe: \"Custom meal - no recipe instructions.\"\n    };\n    \n    // Add to custom meals UI immediately\n    setCustomMeals(prev => ({\n      ...prev,\n      [sectionId]: [...prev[sectionId], meal]\n    }));\n    \n    // Auto-select the meal\n    setSelectedMeals(prev => ({\n      ...prev,\n      [sectionId]: mealId\n    }));\n  };\n\n  const calculateTotalConsumed = () => {\n    let total = { calories: 0, protein: 0, carbs: 0, fats: 0 };\n    \n    meals.forEach(section => {\n      // Only count if checked\n      if (consumedMeals[section.id]) {\n        const selectedId = selectedMeals[section.id];\n        const option = section.options.find(opt => opt.id === selectedId);\n        if (option) {\n          total.calories += option.calories;\n          total.protein += option.protein;\n          total.carbs += option.carbs;\n          total.fats += option.fats;\n        }\n      }\n    });\n    \n    return total;\n  };\n\n  const current = calculateTotalConsumed();\n\n  // Sync totals to context whenever they change\n  useEffect(() => {\n    updateDailyStats(current);\n  }, [JSON.stringify(current), updateDailyStats]);\n\n  // Save meal selections with nutrition data when they change\n  const prevSelectedRef = useRef(selectedMeals);\n  useEffect(() => {\n    const mealTypes = [\"breakfast\", \"lunch\", \"snack\", \"dinner\"];\n    const today = getTodayDate();\n    \n    mealTypes.forEach(mealType => {\n      const prevId = prevSelectedRef.current[mealType];\n      const newId = selectedMeals[mealType];\n      \n      if (prevId !== newId && newId) {\n        // Find the meal in our options\n        const section = meals.find(s => s.id === mealType);\n        const meal = section?.options.find(o => o.id === newId);\n        \n        if (meal) {\n          // Save with nutrition data\n          fetch(\"/api/meals\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              date: today,\n              mealType,\n              mealId: newId,\n              consumed: consumedMeals[mealType] || false,\n              mealName: meal.name,\n              calories: meal.calories,\n              protein: meal.protein,\n              carbs: meal.carbs,\n              fats: meal.fats,\n            }),\n          }).catch(console.error);\n        }\n      }\n    });\n    \n    prevSelectedRef.current = selectedMeals;\n  }, [selectedMeals, meals, consumedMeals]);\n\n  const toggleConsumed = (mealId: string, e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent accordion toggle\n    toggleConsumedMeal(mealId);\n  };\n\n  return (\n    <Layout>\n      <div className=\"relative h-48 w-full overflow-hidden rounded-b-3xl shadow-xl mb-6\">\n        <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/60 to-transparent z-10\" />\n        <img src={foodImage} alt=\"Food\" className=\"w-full h-full object-cover opacity-60\" />\n        <div className=\"absolute bottom-4 left-6 z-20 w-[90%]\">\n          <div className=\"flex justify-between items-end mb-2\">\n            <h1 className=\"text-3xl font-heading font-bold text-white uppercase\">Nutrition</h1>\n            <div className=\"bg-black/30 backdrop-blur-md rounded-lg p-1 border border-white/10\">\n              <Select \n                value={profile.goal} \n                onValueChange={(val: any) => updateProfile({ goal: val })}\n              >\n                <SelectTrigger className=\"h-8 border-none bg-transparent text-white w-[130px] focus:ring-0\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"muscle\">Build Muscle</SelectItem>\n                  <SelectItem value=\"maintain\">Maintain</SelectItem>\n                  <SelectItem value=\"fatloss\">Lose Fat</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n          \n          <div className=\"flex gap-4 text-xs font-medium text-white/80 bg-black/20 p-2 rounded-lg backdrop-blur-sm inline-flex\">\n            <div className=\"flex items-center gap-1\">\n              <Target className=\"w-3 h-3 text-primary\" />\n              <span>Target: {macros.calories} kcal</span>\n            </div>\n             <div className=\"flex items-center gap-1\">\n              <Info className=\"w-3 h-3 text-muted-foreground\" />\n              <span className=\"text-muted-foreground\">Rec: {recommendedMacros.calories}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"px-4 pb-20 space-y-6\">\n        {/* Macros */}\n        <div className=\"grid grid-cols-2 gap-3\">\n            <Card className=\"bg-secondary/30 border-white/5 text-center\">\n              <CardContent className=\"p-3\">\n                <span className=\"text-xs uppercase text-muted-foreground font-bold block mb-1\">Protein Consumed</span>\n                <div className=\"flex justify-center items-end gap-2\">\n                   <span className=\"text-2xl font-heading font-bold text-white\">{current.protein}g</span>\n                   <span className=\"text-[10px] text-muted-foreground mb-1\">/ {macros.protein}g goal</span>\n                </div>\n                <Progress value={(current.protein / macros.protein) * 100} className=\"h-1 mt-2 bg-blue-500/20\" />\n              </CardContent>\n            </Card>\n            <Card className=\"bg-secondary/30 border-white/5 text-center\">\n              <CardContent className=\"p-3\">\n                <span className=\"text-xs uppercase text-muted-foreground font-bold block mb-1\">Calories Consumed</span>\n                <div className=\"flex justify-center items-end gap-2\">\n                   <span className=\"text-2xl font-heading font-bold text-white\">{current.calories}</span>\n                   <span className=\"text-[10px] text-muted-foreground mb-1\">/ {macros.calories} goal</span>\n                </div>\n                <Progress value={(current.calories / macros.calories) * 100} className=\"h-1 mt-2 bg-primary/20\" />\n              </CardContent>\n            </Card>\n        </div>\n\n        {/* Meals Selection Accordion */}\n        <div className=\"space-y-4\">\n          <h2 className=\"text-xl font-heading font-bold text-white\">Today's Menu</h2>\n          <Accordion type=\"single\" collapsible className=\"w-full space-y-2\">\n            {meals.map((section) => {\n              const selectedOption = section.options.find(opt => opt.id === selectedMeals[section.id]);\n              const isChecked = consumedMeals[section.id];\n              \n              return (\n                <AccordionItem key={section.id} value={section.id} className={cn(\n                  \"border-none rounded-xl overflow-hidden border border-white/5 transition-colors\",\n                  isChecked ? \"bg-primary/5 border-primary/20\" : \"bg-card\"\n                )}>\n                  <AccordionTrigger className=\"px-4 py-3 hover:no-underline hover:bg-white/5 group\">\n                    <div className=\"flex items-center w-full gap-3\">\n                       <div \n                         className={cn(\n                           \"h-6 w-6 rounded-full border-2 flex items-center justify-center transition-colors z-20\",\n                           isChecked ? \"bg-primary border-primary\" : \"border-muted-foreground group-hover:border-white\"\n                         )}\n                         onClick={(e) => toggleConsumed(section.id, e)}\n                       >\n                         {isChecked && <Check className=\"w-3.5 h-3.5 text-black font-bold\" />}\n                       </div>\n                       \n                       <div className=\"flex flex-col items-start text-left w-full\">\n                        <div className=\"flex justify-between w-full pr-4\">\n                          <span className={cn(\n                            \"text-xs font-bold uppercase tracking-wider transition-colors\",\n                            isChecked ? \"text-primary\" : \"text-muted-foreground\"\n                          )}>{section.title}</span>\n                          <span className=\"text-xs text-muted-foreground\">{selectedOption?.calories} kcal</span>\n                        </div>\n                        <span className={cn(\n                          \"text-lg font-bold mt-1 transition-all\",\n                          isChecked ? \"text-white/50 line-through\" : \"text-white\"\n                        )}>{selectedOption?.name}</span>\n                      </div>\n                    </div>\n                  </AccordionTrigger>\n                  <AccordionContent className=\"px-4 pb-4 pt-0 pl-14\">\n                    {/* Selected Meal Recipe - Only show if not checked (or maybe always show?) - Showing always is better for utility */}\n                    {selectedOption?.recipe && (\n                      <div className=\"bg-secondary/30 rounded-lg p-3 mb-4 border border-white/5\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                           <ChefHat className=\"w-4 h-4 text-primary\" />\n                           <span className=\"text-xs font-bold text-white uppercase\">Preparation</span>\n                        </div>\n                        <p className=\"text-xs text-muted-foreground whitespace-pre-line leading-relaxed\">\n                          {selectedOption.recipe}\n                        </p>\n                      </div>\n                    )}\n\n                    <div className=\"space-y-2 mt-2\">\n                      <p className=\"text-xs text-muted-foreground uppercase mb-2 font-bold\">Swap Meal:</p>\n                      {section.options.map((option) => (\n                        <div \n                          key={option.id}\n                          onClick={() => !isChecked && setSelectedMeals(prev => ({ ...prev, [section.id]: option.id }))}\n                          className={cn(\n                            \"p-3 rounded-lg border transition-all flex justify-between items-center\",\n                            selectedMeals[section.id] === option.id \n                              ? \"bg-primary/10 border-primary\" \n                              : \"bg-secondary/50 border-transparent\",\n                            !isChecked && \"cursor-pointer hover:bg-secondary\",\n                            isChecked && \"opacity-50 cursor-not-allowed\"\n                          )}\n                        >\n                          <div>\n                            <p className={cn(\"font-bold text-sm\", selectedMeals[section.id] === option.id ? \"text-primary\" : \"text-white\")}>\n                              {option.name}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground mt-1\">\n                              <span className=\"text-primary font-bold\">{option.protein}g Protein</span>  {option.carbs}g Carbs  {option.fats}g Fat\n                            </p>\n                          </div>\n                          {selectedMeals[section.id] === option.id && (\n                            <Check className=\"w-4 h-4 text-primary\" />\n                          )}\n                        </div>\n                      ))}\n                      \n                      {/* Add Custom Meal Button */}\n                      <Button \n                        variant=\"ghost\" \n                        className=\"w-full justify-start text-primary hover:text-primary hover:bg-primary/10 mt-2\"\n                        onClick={() => {\n                          setCurrentSectionId(section.id);\n                          setIsCustomDialogOpen(true);\n                        }}\n                        disabled={isChecked}\n                        data-testid={`button-add-custom-${section.id}`}\n                      >\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Add Custom Meal...\n                      </Button>\n                      \n                      {/* Saved Custom Meals - Quick Add */}\n                      {getSavedMealsForType(section.id).length > 0 && (\n                        <div className=\"mt-4 pt-4 border-t border-white/10\">\n                          <div className=\"bg-gradient-to-r from-primary/5 to-primary/10 rounded-xl p-4 border border-primary/20\">\n                            <div className=\"flex items-center gap-2 mb-3\">\n                              <div className=\"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center\">\n                                <History className=\"w-4 h-4 text-primary\" />\n                              </div>\n                              <div>\n                                <p className=\"text-sm font-bold text-white\">Your Saved Meals</p>\n                                <p className=\"text-xs text-muted-foreground\">Quickly add a previous meal</p>\n                              </div>\n                            </div>\n                            <div className=\"space-y-2\">\n                              {getSavedMealsForType(section.id).map((savedMeal) => (\n                                <div\n                                  key={savedMeal.id}\n                                  onClick={() => !isChecked && handleQuickAddSavedMeal(savedMeal, section.id)}\n                                  className={cn(\n                                    \"p-3 rounded-lg bg-secondary/60 border border-white/5 transition-all flex justify-between items-center group\",\n                                    !isChecked && \"cursor-pointer hover:bg-primary/10 hover:border-primary/30\",\n                                    isChecked && \"opacity-50 cursor-not-allowed\"\n                                  )}\n                                  data-testid={`button-quick-add-${savedMeal.id}`}\n                                >\n                                  <div className=\"flex-1 min-w-0\">\n                                    <p className=\"font-medium text-sm text-white truncate group-hover:text-primary transition-colors\">\n                                      {savedMeal.name}\n                                    </p>\n                                    <p className=\"text-xs text-muted-foreground mt-0.5\">\n                                      <span className=\"text-primary font-semibold\">{savedMeal.protein}g protein</span>\n                                      <span className=\"mx-1\"></span>\n                                      <span>{savedMeal.calories} cal</span>\n                                    </p>\n                                  </div>\n                                  <div className=\"flex items-center gap-2 ml-2\">\n                                    <div className=\"w-7 h-7 rounded-full bg-primary/20 flex items-center justify-center group-hover:bg-primary/30 transition-colors\">\n                                      <Plus className=\"w-4 h-4 text-primary\" />\n                                    </div>\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </AccordionContent>\n                </AccordionItem>\n              );\n            })}\n          </Accordion>\n        </div>\n      </div>\n\n      {/* Custom Meal Dialog */}\n      <Dialog open={isCustomDialogOpen} onOpenChange={(open) => {\n        setIsCustomDialogOpen(open);\n        if (!open) {\n          setImagePreview(null);\n          setNewMeal({ name: \"\", calories: \"\", protein: \"\", carbs: \"\", fats: \"\" });\n        }\n      }}>\n        <DialogContent className=\"bg-card border-white/10 text-white max-w-sm p-5\">\n          <DialogHeader className=\"pb-2\">\n            <DialogTitle className=\"text-lg\">Add Custom Meal</DialogTitle>\n          </DialogHeader>\n          \n          <div className=\"space-y-4\">\n            {/* Photo Upload - Compact */}\n            <div className=\"flex items-center gap-3\">\n              {imagePreview ? (\n                <div className=\"relative w-16 h-16 flex-shrink-0\">\n                  <img \n                    src={imagePreview} \n                    alt=\"Food\" \n                    className=\"w-16 h-16 object-cover rounded-lg border border-white/10\"\n                  />\n                  {isAnalyzing && (\n                    <div className=\"absolute inset-0 bg-black/70 flex items-center justify-center rounded-lg\">\n                      <Loader2 className=\"w-4 h-4 animate-spin text-primary\" />\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"flex gap-2\">\n                  <label \n                    htmlFor=\"food-photo-camera\" \n                    className=\"w-14 h-14 flex-shrink-0 border-2 border-dashed border-primary/40 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-primary/5 transition-colors gap-0.5\"\n                  >\n                    <Camera className=\"w-5 h-5 text-primary\" />\n                    <span className=\"text-[9px] text-primary\">Camera</span>\n                  </label>\n                  <label \n                    htmlFor=\"food-photo-gallery\" \n                    className=\"w-14 h-14 flex-shrink-0 border-2 border-dashed border-primary/40 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-primary/5 transition-colors gap-0.5\"\n                  >\n                    <Image className=\"w-5 h-5 text-primary\" />\n                    <span className=\"text-[9px] text-primary\">Gallery</span>\n                  </label>\n                </div>\n              )}\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-white\">\n                  {isAnalyzing ? \"Analyzing photo...\" : imagePreview ? \"Photo captured\" : \"Add a photo\"}\n                </p>\n                <p className=\"text-xs text-muted-foreground\">\n                  {imagePreview ? (\n                    <button \n                      className=\"text-primary hover:underline\"\n                      onClick={() => {\n                        setImagePreview(null);\n                        setNewMeal({ name: \"\", calories: \"\", protein: \"\", carbs: \"\", fats: \"\" });\n                      }}\n                    >\n                      Clear & retry\n                    </button>\n                  ) : \"AI detects nutrition automatically\"}\n                </p>\n              </div>\n              <input\n                id=\"food-photo-camera\"\n                type=\"file\"\n                accept=\"image/*\"\n                capture=\"environment\"\n                className=\"hidden\"\n                onChange={handleImageUpload}\n                data-testid=\"input-food-photo-camera\"\n              />\n              <input\n                id=\"food-photo-gallery\"\n                type=\"file\"\n                accept=\"image/*\"\n                className=\"hidden\"\n                onChange={handleImageUpload}\n                data-testid=\"input-food-photo-gallery\"\n              />\n            </div>\n\n            <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n              <div className=\"flex-1 border-t border-white/10\"></div>\n              <span>or enter manually</span>\n              <div className=\"flex-1 border-t border-white/10\"></div>\n            </div>\n\n            {/* Meal Name */}\n            <Input \n              placeholder=\"Meal name (e.g., Turkey Sandwich)\" \n              className=\"bg-secondary/50 border-white/10 h-10\"\n              value={newMeal.name}\n              onChange={(e) => setNewMeal({...newMeal, name: e.target.value})}\n              data-testid=\"input-meal-name\"\n            />\n            \n            {/* Nutrition Grid - Compact 4-column */}\n            <div className=\"grid grid-cols-4 gap-2\">\n              <div className=\"space-y-1\">\n                <Label className=\"text-[10px] text-muted-foreground uppercase\">Cal</Label>\n                <Input \n                  type=\"number\" \n                  placeholder=\"0\" \n                  className=\"bg-secondary/50 border-white/10 h-9 text-sm px-2\"\n                  value={newMeal.calories}\n                  onChange={(e) => setNewMeal({...newMeal, calories: e.target.value})}\n                  data-testid=\"input-meal-calories\"\n                />\n              </div>\n              <div className=\"space-y-1\">\n                <Label className=\"text-[10px] text-muted-foreground uppercase\">Protein</Label>\n                <Input \n                  type=\"number\" \n                  placeholder=\"0\" \n                  className=\"bg-secondary/50 border-white/10 h-9 text-sm px-2\"\n                  value={newMeal.protein}\n                  onChange={(e) => setNewMeal({...newMeal, protein: e.target.value})}\n                  data-testid=\"input-meal-protein\"\n                />\n              </div>\n              <div className=\"space-y-1\">\n                <Label className=\"text-[10px] text-muted-foreground uppercase\">Carbs</Label>\n                <Input \n                  type=\"number\" \n                  placeholder=\"0\" \n                  className=\"bg-secondary/50 border-white/10 h-9 text-sm px-2\"\n                  value={newMeal.carbs}\n                  onChange={(e) => setNewMeal({...newMeal, carbs: e.target.value})}\n                  data-testid=\"input-meal-carbs\"\n                />\n              </div>\n              <div className=\"space-y-1\">\n                <Label className=\"text-[10px] text-muted-foreground uppercase\">Fats</Label>\n                <Input \n                  type=\"number\" \n                  placeholder=\"0\" \n                  className=\"bg-secondary/50 border-white/10 h-9 text-sm px-2\"\n                  value={newMeal.fats}\n                  onChange={(e) => setNewMeal({...newMeal, fats: e.target.value})}\n                  data-testid=\"input-meal-fats\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter className=\"pt-4 gap-2 sm:gap-2\">\n            <Button variant=\"outline\" size=\"sm\" onClick={() => setIsCustomDialogOpen(false)} data-testid=\"button-cancel-meal\" className=\"flex-1\">Cancel</Button>\n            <Button size=\"sm\" onClick={handleAddCustomMeal} disabled={!newMeal.name || isAnalyzing} data-testid=\"button-add-meal\" className=\"flex-1\">Add Meal</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":47130,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8608,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport {\n  insertProfileSchema,\n  updateProfileSchema,\n  insertWorkoutLogSchema,\n  insertMealLogSchema,\n  insertCustomMealSchema,\n} from \"@shared/schema\";\nimport { z } from \"zod\";\nimport OpenAI from \"openai\";\nimport { setupAuth } from \"./auth\";\n\nconst openai = new OpenAI({\n  apiKey: process.env.AI_INTEGRATIONS_OPENAI_API_KEY,\n  baseURL: process.env.AI_INTEGRATIONS_OPENAI_BASE_URL,\n});\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n  setupAuth(app);\n\n  // Get profile for the current session\n  app.get(\"/api/profile\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      \n      const profile = await storage.getProfileByUserId(userId);\n      \n      if (!profile) {\n        return res.status(404).json({ error: \"Profile not found\" });\n      }\n\n      res.json(profile);\n    } catch (error) {\n      console.error(\"Error fetching profile:\", error);\n      res.status(500).json({ error: \"Failed to fetch profile\" });\n    }\n  });\n\n  // Update profile\n  app.patch(\"/api/profile\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const updates = updateProfileSchema.parse(req.body);\n      \n      const updated = await storage.updateProfile(userId, updates);\n      \n      if (!updated) {\n        return res.status(404).json({ error: \"Profile not found\" });\n      }\n\n      res.json(updated);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      }\n      console.error(\"Error updating profile:\", error);\n      res.status(500).json({ error: \"Failed to update profile\" });\n    }\n  });\n\n  // Get workout history\n  app.get(\"/api/workouts\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const logs = await storage.getWorkoutLogs(userId);\n      res.json(logs);\n    } catch (error) {\n      console.error(\"Error fetching workouts:\", error);\n      res.status(500).json({ error: \"Failed to fetch workouts\" });\n    }\n  });\n\n  // Log a workout\n  app.post(\"/api/workouts\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const data = insertWorkoutLogSchema.parse({\n        ...req.body,\n        userId: userId,\n      });\n\n      // Check if workout already logged for this date\n      const existing = await storage.getWorkoutLogByDate(userId, data.date);\n      if (existing) {\n        return res.status(400).json({ error: \"Workout already logged for this date\" });\n      }\n\n      const log = await storage.logWorkout(data);\n\n      // Add XP to user progress\n      await storage.addXpEvent({\n        userId: userId,\n        xpAmount: 15,\n        eventType: \"workout_completed\",\n        sourceId: log.id,\n        description: \"Completed workout\",\n      });\n      await storage.updateUserXp(userId, 15);\n\n      res.json(log);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      }\n      console.error(\"Error logging workout:\", error);\n      res.status(500).json({ error: \"Failed to log workout\" });\n    }\n  });\n\n  // Delete/undo a workout\n  app.delete(\"/api/workouts/:date\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const { date } = req.params;\n      \n      await storage.deleteWorkoutByDate(userId, date);\n      \n      // Remove XP from user progress\n      await storage.addXpEvent({\n        userId: userId,\n        xpAmount: -15,\n        eventType: \"workout_undone\",\n        sourceId: null,\n        description: \"Workout undone\",\n      });\n      await storage.updateUserXp(userId, -15);\n      \n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting workout:\", error);\n      res.status(500).json({ error: \"Failed to delete workout\" });\n    }\n  });\n\n  // Get meal logs for a date\n  app.get(\"/api/meals/:date\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const { date } = req.params;\n      const logs = await storage.getMealLogsForDate(userId, date);\n      \n      // Enrich logs with mealType code for frontend compatibility\n      const mealTypes = await storage.getMealTypes();\n      const enrichedLogs = logs.map(log => {\n        const mealType = mealTypes.find(mt => mt.id === log.mealTypeId);\n        return {\n          ...log,\n          mealType: mealType?.code || \"unknown\",\n        };\n      });\n      \n      res.json(enrichedLogs);\n    } catch (error) {\n      console.error(\"Error fetching meal logs:\", error);\n      res.status(500).json({ error: \"Failed to fetch meal logs\" });\n    }\n  });\n\n  // Upsert meal selection\n  app.post(\"/api/meals\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const { mealType, mealId, mealName, calories, protein, carbs, fats, customMealId, ...rest } = req.body;\n      \n      // Resolve mealType code to mealTypeId\n      const mealTypes = await storage.getMealTypes();\n      const mealTypeRecord = mealTypes.find(mt => mt.code === mealType);\n      \n      if (!mealTypeRecord) {\n        return res.status(400).json({ error: `Invalid meal type: ${mealType}` });\n      }\n\n      const data = insertMealLogSchema.parse({\n        ...rest,\n        userId: userId,\n        mealTypeId: mealTypeRecord.id,\n        customMealId: customMealId || null,\n      });\n\n      const log = await storage.upsertMealLog(data);\n      res.json(log);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      }\n      console.error(\"Error upserting meal log:\", error);\n      res.status(500).json({ error: \"Failed to save meal log\" });\n    }\n  });\n\n  // Toggle meal consumed status\n  app.patch(\"/api/meals/toggle\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const { date, mealType } = req.body;\n\n      if (!date || !mealType) {\n        return res.status(400).json({ error: \"Missing date or mealType\" });\n      }\n\n      // Resolve mealType code to mealTypeId\n      const mealTypes = await storage.getMealTypes();\n      const mealTypeRecord = mealTypes.find(mt => mt.code === mealType);\n      \n      if (!mealTypeRecord) {\n        return res.status(400).json({ error: \"Invalid meal type\" });\n      }\n\n      const updated = await storage.toggleMealConsumed(userId, date, mealTypeRecord.id);\n      \n      if (!updated) {\n        return res.status(404).json({ error: \"Meal log not found\" });\n      }\n\n      // Add XP if meal was marked as consumed, remove if unchecked\n      if (updated.consumed) {\n        await storage.addXpEvent({\n          userId: userId,\n          xpAmount: 5,\n          eventType: \"meal_consumed\",\n          sourceId: updated.id,\n          description: \"Meal consumed\",\n        });\n        await storage.updateUserXp(userId, 5);\n      } else {\n        await storage.addXpEvent({\n          userId: userId,\n          xpAmount: -5,\n          eventType: \"meal_unchecked\",\n          sourceId: updated.id,\n          description: \"Meal unchecked\",\n        });\n        await storage.updateUserXp(userId, -5);\n      }\n\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error toggling meal:\", error);\n      res.status(500).json({ error: \"Failed to toggle meal status\" });\n    }\n  });\n\n  // Get saved custom meals\n  app.get(\"/api/custom-meals\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const meals = await storage.getCustomMeals(userId);\n      \n      // Enrich with mealType code for frontend compatibility\n      const mealTypes = await storage.getMealTypes();\n      const enrichedMeals = meals.map(meal => {\n        const mealType = mealTypes.find(mt => mt.id === meal.mealTypeId);\n        return {\n          ...meal,\n          mealType: mealType?.code || null,\n        };\n      });\n      \n      res.json(enrichedMeals);\n    } catch (error) {\n      console.error(\"Error fetching custom meals:\", error);\n      res.status(500).json({ error: \"Failed to fetch custom meals\" });\n    }\n  });\n\n  // Save a custom meal\n  app.post(\"/api/custom-meals\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const { mealType, ...rest } = req.body;\n      \n      // Resolve mealType code to mealTypeId if provided\n      let mealTypeId = null;\n      if (mealType) {\n        const mealTypes = await storage.getMealTypes();\n        const mealTypeRecord = mealTypes.find(mt => mt.code === mealType);\n        if (mealTypeRecord) {\n          mealTypeId = mealTypeRecord.id;\n        }\n      }\n\n      const data = insertCustomMealSchema.parse({\n        ...rest,\n        userId: userId,\n        mealTypeId,\n      });\n\n      const meal = await storage.createCustomMeal(data);\n      res.json(meal);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      }\n      console.error(\"Error saving custom meal:\", error);\n      res.status(500).json({ error: \"Failed to save custom meal\" });\n    }\n  });\n\n  // Promote tier\n  app.post(\"/api/profile/promote\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      \n      // Get user progress\n      let progress = await storage.getUserProgress(userId);\n      if (!progress) {\n        progress = await storage.initUserProgress(userId);\n      }\n\n      // Get tiers from database\n      const tiersData = await storage.getTiers();\n      const sortedTiers = tiersData.sort((a, b) => a.displayOrder - b.displayOrder);\n      \n      // Find current tier\n      const currentTier = sortedTiers.find(t => t.id === progress!.tierId) || sortedTiers[0];\n      \n      // Check if XP is enough for promotion (using tier's maxXp)\n      if (progress.totalXp < (currentTier?.maxXp || 100)) {\n        return res.status(400).json({ error: \"Not enough XP to promote\" });\n      }\n\n      // Find next tier\n      const currentIndex = sortedTiers.findIndex(t => t.id === currentTier?.id);\n      const nextTier = currentIndex < sortedTiers.length - 1 ? sortedTiers[currentIndex + 1] : currentTier;\n\n      // Update progress: reset XP to 0 and set new tier\n      await storage.promoteUserTier(userId, nextTier.id);\n\n      const updatedProgress = await storage.getUserProgress(userId);\n      res.json(updatedProgress);\n    } catch (error) {\n      console.error(\"Error promoting tier:\", error);\n      res.status(500).json({ error: \"Failed to promote tier\" });\n    }\n  });\n\n  // Analyze food image with AI vision\n  app.post(\"/api/analyze-food\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const { imageBase64 } = req.body;\n\n      if (!imageBase64) {\n        return res.status(400).json({ error: \"Image data required\" });\n      }\n\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"user\",\n            content: [\n              {\n                type: \"text\",\n                text: `Analyze this food image and estimate the nutritional content. Provide ONLY a JSON response in this exact format, no other text:\n{\n  \"name\": \"Name of the food/meal\",\n  \"calories\": estimated calories (number),\n  \"protein\": estimated protein in grams (number),\n  \"carbs\": estimated carbs in grams (number),\n  \"fats\": estimated fats in grams (number)\n}\n\nBe reasonable with portion sizes. If you cannot identify the food, provide your best guess. Always return valid JSON.`,\n              },\n              {\n                type: \"image_url\",\n                image_url: {\n                  url: imageBase64.startsWith(\"data:\") \n                    ? imageBase64 \n                    : `data:image/jpeg;base64,${imageBase64}`,\n                },\n              },\n            ],\n          },\n        ],\n        max_tokens: 300,\n      });\n\n      const content = response.choices[0]?.message?.content || \"\";\n      \n      // Parse the JSON response\n      try {\n        // Extract JSON from response (in case there's extra text)\n        const jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n          const nutritionData = JSON.parse(jsonMatch[0]);\n          res.json(nutritionData);\n        } else {\n          res.status(500).json({ error: \"Could not parse nutrition data\" });\n        }\n      } catch (parseError) {\n        console.error(\"JSON parse error:\", parseError, content);\n        res.status(500).json({ error: \"Failed to parse nutrition data\" });\n      }\n    } catch (error) {\n      console.error(\"Error analyzing food:\", error);\n      res.status(500).json({ error: \"Failed to analyze food image\" });\n    }\n  });\n\n  // ============================================\n  // LOOKUP TABLE ROUTES (3NF)\n  // ============================================\n\n  app.get(\"/api/lookups/goals\", async (req, res) => {\n    try {\n      const data = await storage.getGoals();\n      res.json(data);\n    } catch (error) {\n      console.error(\"Error fetching goals:\", error);\n      res.status(500).json({ error: \"Failed to fetch goals\" });\n    }\n  });\n\n  app.get(\"/api/lookups/positions\", async (req, res) => {\n    try {\n      const data = await storage.getPositions();\n      res.json(data);\n    } catch (error) {\n      console.error(\"Error fetching positions:\", error);\n      res.status(500).json({ error: \"Failed to fetch positions\" });\n    }\n  });\n\n  app.get(\"/api/lookups/levels\", async (req, res) => {\n    try {\n      const data = await storage.getCompetitionLevels();\n      res.json(data);\n    } catch (error) {\n      console.error(\"Error fetching competition levels:\", error);\n      res.status(500).json({ error: \"Failed to fetch levels\" });\n    }\n  });\n\n  app.get(\"/api/lookups/tiers\", async (req, res) => {\n    try {\n      const data = await storage.getTiers();\n      res.json(data);\n    } catch (error) {\n      console.error(\"Error fetching tiers:\", error);\n      res.status(500).json({ error: \"Failed to fetch tiers\" });\n    }\n  });\n\n  app.get(\"/api/lookups/workout-types\", async (req, res) => {\n    try {\n      const data = await storage.getWorkoutTypes();\n      res.json(data);\n    } catch (error) {\n      console.error(\"Error fetching workout types:\", error);\n      res.status(500).json({ error: \"Failed to fetch workout types\" });\n    }\n  });\n\n  app.get(\"/api/lookups/meal-types\", async (req, res) => {\n    try {\n      const data = await storage.getMealTypes();\n      res.json(data);\n    } catch (error) {\n      console.error(\"Error fetching meal types:\", error);\n      res.status(500).json({ error: \"Failed to fetch meal types\" });\n    }\n  });\n\n  app.get(\"/api/meal-catalog\", async (req, res) => {\n    try {\n      const mealType = req.query.mealType as string | undefined;\n      const data = await storage.getMealCatalog(mealType);\n      res.json(data);\n    } catch (error) {\n      console.error(\"Error fetching meal catalog:\", error);\n      res.status(500).json({ error: \"Failed to fetch meal catalog\" });\n    }\n  });\n\n  // ============================================\n  // XP/PROGRESS ROUTES\n  // ============================================\n\n  app.get(\"/api/progress\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      let progress = await storage.getUserProgress(userId);\n      \n      if (!progress) {\n        progress = await storage.initUserProgress(userId);\n      }\n      \n      res.json(progress);\n    } catch (error) {\n      console.error(\"Error fetching progress:\", error);\n      res.status(500).json({ error: \"Failed to fetch progress\" });\n    }\n  });\n\n  app.get(\"/api/progress/xp-history\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const limit = parseInt(req.query.limit as string) || 50;\n      const events = await storage.getXpEvents(userId, limit);\n      res.json(events);\n    } catch (error) {\n      console.error(\"Error fetching XP history:\", error);\n      res.status(500).json({ error: \"Failed to fetch XP history\" });\n    }\n  });\n\n  // ============================================\n  // USER SCHEDULE ROUTES\n  // ============================================\n\n  app.get(\"/api/schedule\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const schedule = await storage.getUserSchedule(userId);\n      res.json(schedule);\n    } catch (error) {\n      console.error(\"Error fetching schedule:\", error);\n      res.status(500).json({ error: \"Failed to fetch schedule\" });\n    }\n  });\n\n  app.put(\"/api/schedule\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const userId = req.user?.id;\n      const { schedule } = req.body;\n      \n      if (!Array.isArray(schedule)) {\n        return res.status(400).json({ error: \"Schedule must be an array\" });\n      }\n      \n      const result = await storage.setUserSchedule(userId, schedule);\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error updating schedule:\", error);\n      res.status(500).json({ error: \"Failed to update schedule\" });\n    }\n  });\n\n  // AI Chat endpoint\n  app.post(\"/api/chat\", async (req, res) => {\n    try {\n      if (!req.isAuthenticated() || !req.user) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n      const { messages, profile } = req.body;\n\n      if (!messages || !Array.isArray(messages)) {\n        return res.status(400).json({ error: \"Messages array required\" });\n      }\n\n      const systemPrompt = `You are Coach AI, an expert hockey training assistant. ${\n        profile\n          ? `The user is a ${profile.position} playing at the ${profile.level} level, ${profile.age} years old, weighing ${profile.weight} lbs.`\n          : \"\"\n      }\n\nYou provide personalized advice on:\n- Hockey-specific workouts and training\n- Nutrition for athletes\n- Skill development drills\n- Game strategy and positioning\n- Mental preparation\n\nKeep responses concise (2-3 sentences), actionable, and encouraging. Use hockey terminology appropriately.`;\n\n      const chatMessages = [\n        { role: \"system\" as const, content: systemPrompt },\n        ...messages.map((m: { role: string; content: string }) => ({\n          role: m.role === \"user\" ? (\"user\" as const) : (\"assistant\" as const),\n          content: m.content,\n        })),\n      ];\n\n      const completion = await openai.chat.completions.create({\n        model: \"gpt-4o-mini\",\n        messages: chatMessages,\n        max_tokens: 200,\n        temperature: 0.7,\n      });\n\n      const response = completion.choices[0]?.message?.content || \"I'm having trouble responding right now. Please try again.\";\n\n      res.json({ response });\n    } catch (error) {\n      console.error(\"Error in chat:\", error);\n      res.status(500).json({ error: \"Failed to get AI response\" });\n    }\n  });\n\n  return httpServer;\n}\n","path":null,"size_bytes":20731,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3007,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nconst queryClient = new QueryClient();\n\ncreateRoot(document.getElementById(\"root\")!).render(\n  <QueryClientProvider client={queryClient}>\n    <App />\n  </QueryClientProvider>\n);\n","path":null,"size_bytes":347,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/pages/AI.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport BottomNav from \"@/components/layout/BottomNav\";\nimport { Send, Bot } from \"lucide-react\";\nimport { useState, useRef, useEffect } from \"react\";\nimport { useUser } from \"@/lib/UserContext\";\nimport { sendChatMessage } from \"@/lib/api\";\n\nexport default function AI() {\n  const { profile } = useUser();\n  const [messages, setMessages] = useState([\n    { role: \"assistant\", content: `Hi! I'm Coach AI. I know you're a ${profile.position} playing at the ${profile.level} level. Ask me about your training, nutrition, or skill development!` }\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [isTyping, setIsTyping] = useState(false);\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [messages, isTyping]);\n\n  const handleSend = async () => {\n    if (!input.trim() || isTyping) return;\n    \n    const userMsg = input;\n    const newMessages = [...messages, { role: \"user\", content: userMsg }];\n    setMessages(newMessages);\n    setInput(\"\");\n    setIsTyping(true);\n\n    try {\n      const response = await sendChatMessage(\n        newMessages,\n        profile ? {\n          position: profile.position,\n          level: profile.level,\n          age: profile.age,\n          weight: profile.weight,\n        } : null\n      );\n      setMessages(prev => [...prev, { role: \"assistant\", content: response }]);\n    } catch (error) {\n      console.error(\"Chat error:\", error);\n      setMessages(prev => [...prev, { role: \"assistant\", content: \"Sorry, I'm having trouble connecting right now. Please try again in a moment.\" }]);\n    } finally {\n      setIsTyping(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex flex-col bg-background\">\n      {/* Header */}\n      <div className=\"p-4 bg-card/80 backdrop-blur-md border-b border-white/5 z-10 flex-shrink-0\">\n        <div className=\"flex items-center gap-3 max-w-md mx-auto\">\n          <div className=\"relative\">\n            <div className=\"p-2 bg-primary/20 rounded-full text-primary neon-glow animate-pulse-slow\">\n              <Bot className=\"w-6 h-6\" />\n            </div>\n            <div className=\"absolute -bottom-1 -right-1 bg-green-500 w-3 h-3 rounded-full border-2 border-background\"></div>\n          </div>\n          <div>\n            <h1 className=\"font-heading font-bold text-white text-xl flex items-center gap-2\" data-testid=\"text-coach-title\">\n              Coach AI <Badge variant=\"outline\" className=\"text-[10px] border-primary/50 text-primary h-5\">GPT-4</Badge>\n            </h1>\n            <p className=\"text-xs text-muted-foreground\">Powered by OpenAI</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Messages Area */}\n      <div className=\"flex-1 overflow-y-auto bg-black/20\">\n        <div className=\"max-w-md mx-auto p-4 min-h-full flex flex-col justify-end\">\n          <div className=\"space-y-4\">\n            {messages.map((msg, i) => (\n              <div\n                key={i}\n                data-testid={`message-${msg.role}-${i}`}\n                className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'} animate-in slide-in-from-bottom-2 duration-300`}\n              >\n                <div\n                  className={`max-w-[85%] p-4 rounded-2xl text-sm shadow-sm ${\n                    msg.role === 'user'\n                      ? 'bg-primary text-primary-foreground rounded-tr-none'\n                      : 'bg-card text-white rounded-tl-none border border-white/10'\n                  }`}\n                >\n                  {msg.content}\n                </div>\n              </div>\n            ))}\n            {isTyping && (\n              <div className=\"flex justify-start animate-in fade-in duration-300\" data-testid=\"typing-indicator\">\n                <div className=\"bg-card text-white rounded-2xl rounded-tl-none border border-white/10 p-4 flex gap-1 items-center h-12\">\n                  <div className=\"w-2 h-2 bg-primary/50 rounded-full animate-bounce [animation-delay:-0.3s]\"></div>\n                  <div className=\"w-2 h-2 bg-primary/50 rounded-full animate-bounce [animation-delay:-0.15s]\"></div>\n                  <div className=\"w-2 h-2 bg-primary/50 rounded-full animate-bounce\"></div>\n                </div>\n              </div>\n            )}\n          </div>\n          <div ref={scrollRef} />\n        </div>\n      </div>\n\n      {/* Input Area */}\n      <div className=\"flex-shrink-0 p-4 bg-background border-t border-white/5 pb-24\">\n        <div className=\"max-w-md mx-auto\">\n          <div className=\"flex gap-2\">\n            <Input \n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder=\"Ask about workouts, diet, or skills...\" \n              className=\"bg-secondary border-white/10 focus-visible:ring-primary text-white\"\n              onKeyDown={(e) => e.key === 'Enter' && handleSend()}\n              data-testid=\"input-chat\"\n            />\n            <Button \n              size=\"icon\" \n              onClick={handleSend} \n              disabled={!input.trim() || isTyping} \n              className=\"bg-primary text-primary-foreground hover:bg-primary/90 transition-all\"\n              data-testid=\"button-send\"\n            >\n              <Send className=\"w-4 h-4\" />\n            </Button>\n          </div>\n          <div className=\"flex justify-center mt-2 gap-2\">\n            <button \n              onClick={() => setInput(\"Give me a drill for better hands\")} \n              className=\"text-[10px] text-muted-foreground hover:text-primary transition-colors border border-white/5 rounded-full px-2 py-1\"\n              data-testid=\"button-suggestion-1\"\n            >\n              \"Better hands drill\"\n            </button>\n            <button \n              onClick={() => setInput(\"What should I eat before a game?\")} \n              className=\"text-[10px] text-muted-foreground hover:text-primary transition-colors border border-white/5 rounded-full px-2 py-1\"\n              data-testid=\"button-suggestion-2\"\n            >\n              \"Pre-game meal?\"\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Bottom Nav */}\n      <div className=\"fixed bottom-0 left-0 right-0 z-50\">\n        <BottomNav />\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6437,"size_tokens":null},"client/src/components/ui/sonner.tsx":{"content":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","path":null,"size_bytes":894,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5124,"size_tokens":null},"client/src/pages/Onboarding.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { ChevronRight } from \"lucide-react\";\nimport { useUser } from \"@/lib/UserContext\";\n\nexport default function Onboarding() {\n  const [, setLocation] = useLocation();\n  const { updateProfile, refetchProfile } = useUser();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    firstName: \"\",\n    age: \"\",\n    weight: \"\",\n    heightFt: \"\",\n    heightIn: \"\",\n    position: \"defense\",\n    level: \"aa\",\n    goal: \"muscle\"\n  });\n\n  const handleSubmit = async () => {\n    if (!formData.firstName || !formData.weight || !formData.heightFt) {\n      return;\n    }\n    \n    setIsSubmitting(true);\n    try {\n      await updateProfile({\n        firstName: formData.firstName,\n        age: parseInt(formData.age) || 13,\n        weight: parseInt(formData.weight),\n        heightFt: parseInt(formData.heightFt),\n        heightIn: parseInt(formData.heightIn) || 0,\n        position: formData.position as any,\n        level: formData.level as any,\n        goal: formData.goal as any,\n        onboardingComplete: true\n      });\n      \n      if (refetchProfile) {\n        await refetchProfile();\n      }\n      \n      setLocation(\"/\");\n    } catch (error) {\n      console.error(\"Failed to save profile:\", error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-6 flex flex-col justify-center max-w-md mx-auto relative overflow-hidden\">\n      <div className=\"absolute top-[-20%] right-[-20%] w-[300px] h-[300px] bg-primary/20 rounded-full blur-[80px]\" />\n      \n      <div className=\"relative z-10 space-y-8\">\n        <div className=\"space-y-2\">\n          <h1 className=\"text-4xl font-heading font-bold text-white uppercase italic\">\n            Edge<span className=\"text-primary\">Hockey</span>\n          </h1>\n          <p className=\"text-muted-foreground text-lg\">Let's set up your player profile.</p>\n        </div>\n\n        <div className=\"space-y-6 animate-in slide-in-from-right-10 fade-in duration-300\">\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>First Name *</Label>\n              <Input \n                data-testid=\"input-first-name\"\n                type=\"text\" \n                placeholder=\"Your name\" \n                className=\"bg-secondary border-transparent\"\n                value={formData.firstName}\n                onChange={(e) => setFormData({ ...formData, firstName: e.target.value })}\n              />\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label>Age</Label>\n                <Input \n                  data-testid=\"input-age\"\n                  type=\"number\" \n                  placeholder=\"Your age\" \n                  className=\"bg-secondary border-transparent\"\n                  value={formData.age}\n                  onChange={(e) => setFormData({ ...formData, age: e.target.value })}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Weight (lbs) *</Label>\n                <Input \n                  data-testid=\"input-weight\"\n                  type=\"number\" \n                  placeholder=\"Weight in lbs\" \n                  className=\"bg-secondary border-transparent\"\n                  value={formData.weight}\n                  onChange={(e) => setFormData({ ...formData, weight: e.target.value })}\n                />\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label>Height *</Label>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Input \n                  data-testid=\"input-height-ft\"\n                  type=\"number\" \n                  placeholder=\"Feet\" \n                  className=\"bg-secondary border-transparent\"\n                  value={formData.heightFt}\n                  onChange={(e) => setFormData({ ...formData, heightFt: e.target.value })}\n                />\n                <Input \n                  data-testid=\"input-height-in\"\n                  type=\"number\" \n                  placeholder=\"Inches\" \n                  className=\"bg-secondary border-transparent\"\n                  value={formData.heightIn}\n                  onChange={(e) => setFormData({ ...formData, heightIn: e.target.value })}\n                />\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label>Position</Label>\n              <Select value={formData.position} onValueChange={(v) => setFormData({ ...formData, position: v })}>\n                <SelectTrigger data-testid=\"select-position\" className=\"bg-secondary border-transparent\">\n                  <SelectValue placeholder=\"Select position\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"defense\">Defense</SelectItem>\n                  <SelectItem value=\"wing\">Wing</SelectItem>\n                  <SelectItem value=\"center\">Center</SelectItem>\n                  <SelectItem value=\"goalie\">Goalie</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label>Level</Label>\n              <Select value={formData.level} onValueChange={(v) => setFormData({ ...formData, level: v })}>\n                <SelectTrigger data-testid=\"select-level\" className=\"bg-secondary border-transparent\">\n                  <SelectValue placeholder=\"Select level\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"house\">House League</SelectItem>\n                  <SelectItem value=\"a\">A</SelectItem>\n                  <SelectItem value=\"aa\">AA</SelectItem>\n                  <SelectItem value=\"aaa\">AAA</SelectItem>\n                  <SelectItem value=\"junior\">Junior</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label>Goal</Label>\n              <Select value={formData.goal} onValueChange={(v) => setFormData({ ...formData, goal: v })}>\n                <SelectTrigger data-testid=\"select-goal\" className=\"bg-secondary border-transparent\">\n                  <SelectValue placeholder=\"Select goal\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"muscle\">Build Muscle</SelectItem>\n                  <SelectItem value=\"fatloss\">Fat Loss</SelectItem>\n                  <SelectItem value=\"maintain\">Maintain</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n          \n          <Button \n            data-testid=\"button-start-training\"\n            className=\"w-full bg-primary text-primary-foreground font-bold hover:bg-primary/90 h-12 text-lg shadow-[0_0_20px_rgba(0,240,255,0.3)]\" \n            onClick={handleSubmit}\n            disabled={isSubmitting || !formData.firstName || !formData.weight || !formData.heightFt}\n          >\n            {isSubmitting ? \"Setting up...\" : \"Start Training\"} <ChevronRight className=\"ml-2 w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":7580,"size_tokens":null},"client/src/pages/Review.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Video, Calendar, Clock, MapPin, Play, Download, Scissors, AlertCircle, LogOut } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useUser } from \"@/lib/UserContext\";\n\nexport default function Review() {\n  const { profile, updateProfile } = useUser();\n  const [isLive, setIsLive] = useState(false);\n  \n  // Use profile data for connection and rink\n  const isConnected = profile.livebarnConnected;\n  const selectedRink = profile.livebarnRink || \"\";\n\n  const handleConnect = () => {\n    // Save connection to profile (persisted)\n    updateProfile({ livebarnConnected: true });\n  };\n\n  const handleDisconnect = () => {\n    // Disconnect and clear rink selection\n    updateProfile({ livebarnConnected: false, livebarnRink: null });\n  };\n\n  const handleRinkChange = (rink: string) => {\n    // Save rink selection to profile\n    updateProfile({ livebarnRink: rink });\n  };\n\n  return (\n    <Layout>\n      <div className=\"relative h-48 w-full overflow-hidden rounded-b-3xl shadow-xl mb-6 bg-black\">\n        <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/20 to-transparent z-10\" />\n        \n        {/* Mock LiveBarn Header Background */}\n        <div className=\"absolute inset-0 flex items-center justify-center opacity-30\">\n             <div className=\"text-4xl font-black text-red-600 uppercase tracking-tighter transform -rotate-12 select-none\">\n               LIVEBARN\n             </div>\n        </div>\n\n        <div className=\"absolute bottom-4 left-6 z-20 w-[90%]\">\n          <h1 className=\"text-3xl font-heading font-bold text-white uppercase mb-1\">Game Review</h1>\n          <p className=\"text-muted-foreground text-sm flex items-center gap-2\">\n            <Video className=\"w-4 h-4 text-red-500\" />\n            Powered by LiveBarn\n          </p>\n        </div>\n      </div>\n\n      <div className=\"px-4 pb-20 space-y-6\">\n        {/* Connection Status Card */}\n        {!isConnected ? (\n          <Card className=\"bg-card border-white/5\">\n            <CardContent className=\"p-6 text-center space-y-4\">\n              <div className=\"w-16 h-16 bg-red-600/20 rounded-full flex items-center justify-center mx-auto mb-2\">\n                <Video className=\"w-8 h-8 text-red-500\" />\n              </div>\n              <div>\n                <h2 className=\"text-xl font-bold text-white mb-2\">Connect to LiveBarn</h2>\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  Link your account to access live streams and on-demand replays of your games.\n                </p>\n              </div>\n              <div className=\"space-y-3\">\n                 <Input placeholder=\"Email / Username\" className=\"bg-secondary/50 border-white/10\" />\n                 <Input type=\"password\" placeholder=\"Password\" className=\"bg-secondary/50 border-white/10\" />\n                 <Button onClick={handleConnect} className=\"w-full bg-red-600 hover:bg-red-700 text-white font-bold\">\n                   Connect Account\n                 </Button>\n              </div>\n              <p className=\"text-[10px] text-muted-foreground mt-2\">\n                By connecting, you agree to LiveBarn's Terms of Service.\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <>\n            {/* Connected Status */}\n            <div className=\"flex justify-between items-center\">\n              <div className=\"flex items-center gap-2 text-sm text-green-500\">\n                <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\n                Connected to LiveBarn\n              </div>\n              <Button \n                variant=\"ghost\" \n                size=\"sm\" \n                onClick={handleDisconnect}\n                className=\"text-muted-foreground hover:text-red-500 text-xs\"\n              >\n                <LogOut className=\"w-3 h-3 mr-1\" />\n                Disconnect\n              </Button>\n            </div>\n\n            {/* Game Selector Controls */}\n            <Card className=\"bg-secondary/30 border-white/5\">\n              <CardContent className=\"p-4 space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label className=\"text-xs uppercase text-muted-foreground\">Date</Label>\n                    <div className=\"relative\">\n                      <Calendar className=\"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground\" />\n                      <Input type=\"date\" className=\"pl-9 bg-card border-white/10 text-sm\" />\n                    </div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label className=\"text-xs uppercase text-muted-foreground\">Time</Label>\n                    <div className=\"relative\">\n                      <Clock className=\"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground\" />\n                      <Input type=\"time\" className=\"pl-9 bg-card border-white/10 text-sm\" />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label className=\"text-xs uppercase text-muted-foreground\">Venue</Label>\n                  <Select value={selectedRink} onValueChange={handleRinkChange}>\n                    <SelectTrigger className=\"bg-card border-white/10\">\n                      <div className=\"flex items-center gap-2\">\n                        <MapPin className=\"w-4 h-4 text-red-500\" />\n                        <SelectValue placeholder=\"Select Rink\" />\n                      </div>\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"rink1\">Center Ice Arena - Rink A</SelectItem>\n                      <SelectItem value=\"rink2\">Center Ice Arena - Rink B</SelectItem>\n                      <SelectItem value=\"rink3\">North Stars Complex - Main</SelectItem>\n                      <SelectItem value=\"rink4\">Community Center - East</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <Button className=\"w-full bg-primary/20 hover:bg-primary/30 text-primary border border-primary/50 font-bold\">\n                  <Play className=\"w-4 h-4 mr-2 fill-current\" />\n                  Load Footage\n                </Button>\n              </CardContent>\n            </Card>\n\n            {/* Video Player Mockup */}\n            <div className=\"space-y-2\">\n               <div className=\"flex justify-between items-center px-1\">\n                 <h3 className=\"font-bold text-white flex items-center gap-2\">\n                   {isLive ? (\n                     <span className=\"flex items-center gap-1.5 text-red-500 text-xs uppercase tracking-wider animate-pulse\">\n                       <span className=\"w-2 h-2 rounded-full bg-red-500\"></span>\n                       Live\n                     </span>\n                   ) : (\n                     <span className=\"text-sm text-muted-foreground\">Replay Mode</span>\n                   )}\n                 </h3>\n                 <div className=\"flex gap-2\">\n                    <Button variant=\"ghost\" size=\"sm\" className={`h-6 text-[10px] uppercase ${isLive ? 'bg-red-500/10 text-red-500' : 'text-muted-foreground'}`} onClick={() => setIsLive(true)}>Live</Button>\n                    <Button variant=\"ghost\" size=\"sm\" className={`h-6 text-[10px] uppercase ${!isLive ? 'bg-primary/10 text-primary' : 'text-muted-foreground'}`} onClick={() => setIsLive(false)}>VOD</Button>\n                 </div>\n               </div>\n               \n               <div className=\"aspect-video bg-black rounded-xl overflow-hidden relative group border border-white/10 shadow-2xl\">\n                 {/* Video Placeholder Content */}\n                 <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"text-center\">\n                       {selectedRink ? (\n                         <>\n                           <div className=\"w-16 h-16 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform cursor-pointer\">\n                             <Play className=\"w-8 h-8 text-white fill-white ml-1\" />\n                           </div>\n                           <p className=\"text-white/50 text-xs font-mono\">CAM-01  1080p  60FPS</p>\n                         </>\n                       ) : (\n                         <div className=\"flex flex-col items-center text-muted-foreground\">\n                            <AlertCircle className=\"w-10 h-10 mb-2 opacity-50\" />\n                            <p className=\"text-sm\">Select a rink to view feed</p>\n                         </div>\n                       )}\n                    </div>\n                 </div>\n\n                 {/* Mock UI Overlay */}\n                 <div className=\"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <div className=\"h-1 bg-white/20 rounded-full mb-4 overflow-hidden\">\n                      <div className=\"h-full w-1/3 bg-red-600 relative\">\n                        <div className=\"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-lg\"></div>\n                      </div>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                       <div className=\"flex gap-4 text-white\">\n                          <Play className=\"w-5 h-5 fill-white\" />\n                          <span className=\"text-sm font-mono\">04:20 / 15:00</span>\n                       </div>\n                       <div className=\"flex gap-2\">\n                          <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-white hover:bg-white/20 rounded-full\">\n                            <Scissors className=\"w-4 h-4\" />\n                          </Button>\n                          <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-white hover:bg-white/20 rounded-full\">\n                            <Download className=\"w-4 h-4\" />\n                          </Button>\n                       </div>\n                    </div>\n                 </div>\n               </div>\n            </div>\n\n            {/* Saved Clips Section */}\n            <div>\n              <h3 className=\"font-bold text-white mb-3 mt-6\">Your Clips</h3>\n              <div className=\"grid grid-cols-2 gap-3\">\n                 {[1, 2].map((i) => (\n                   <Card key={i} className=\"bg-card border-white/5 overflow-hidden group cursor-pointer hover:border-primary/50 transition-colors\">\n                     <div className=\"aspect-video bg-secondary relative\">\n                        <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40\">\n                          <Play className=\"w-8 h-8 text-white fill-white\" />\n                        </div>\n                     </div>\n                     <CardContent className=\"p-3\">\n                       <h4 className=\"font-bold text-sm text-white truncate\">Nice Goal vs Hawks</h4>\n                       <p className=\"text-[10px] text-muted-foreground\">Oct 12  0:15s</p>\n                     </CardContent>\n                   </Card>\n                 ))}\n                 <Card className=\"bg-secondary/20 border-white/5 border-dashed flex items-center justify-center aspect-[4/3] col-span-2 sm:col-span-1 h-full min-h-[100px]\">\n                    <div className=\"text-center\">\n                      <p className=\"text-xs text-muted-foreground\">Create new clip</p>\n                    </div>\n                 </Card>\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":12154,"size_tokens":null},"client/src/components/layout/Layout.tsx":{"content":"import BottomNav from \"./BottomNav\";\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function Layout({ children }: LayoutProps) {\n  return (\n    <div className=\"min-h-screen bg-background text-foreground font-sans pb-28\">\n      <main className=\"max-w-md mx-auto min-h-screen relative overflow-hidden\">\n        {/* Background Glow Effects */}\n        <div className=\"fixed top-0 left-0 w-full h-96 bg-primary/10 rounded-full blur-[100px] -translate-y-1/2 pointer-events-none\" />\n        <div className=\"fixed bottom-0 right-0 w-full h-96 bg-blue-600/10 rounded-full blur-[100px] translate-y-1/2 pointer-events-none\" />\n        \n        <div className=\"relative z-10\">\n          {children}\n        </div>\n      </main>\n      <BottomNav />\n    </div>\n  );\n}\n","path":null,"size_bytes":779,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"pg\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1417,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload\n            .filter((item) => item.type !== \"none\")\n            .map((item, index) => {\n              const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n              const itemConfig = getPayloadConfigFromPayload(config, item, key)\n              const indicatorColor = color || item.payload.fill || item.color\n\n              return (\n                <div\n                  key={item.dataKey}\n                  className={cn(\n                    \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                    indicator === \"dot\" && \"items-center\"\n                  )}\n                >\n                  {formatter && item?.value !== undefined && item.name ? (\n                    formatter(item.value, item.name, item, index, item.payload)\n                  ) : (\n                    <>\n                      {itemConfig?.icon ? (\n                        <itemConfig.icon />\n                      ) : (\n                        !hideIndicator && (\n                          <div\n                            className={cn(\n                              \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                              {\n                                \"h-2.5 w-2.5\": indicator === \"dot\",\n                                \"w-1\": indicator === \"line\",\n                                \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                  indicator === \"dashed\",\n                                \"my-0.5\": nestLabel && indicator === \"dashed\",\n                              }\n                            )}\n                            style={\n                              {\n                                \"--color-bg\": indicatorColor,\n                                \"--color-border\": indicatorColor,\n                              } as React.CSSProperties\n                            }\n                          />\n                        )\n                      )}\n                      <div\n                        className={cn(\n                          \"flex flex-1 justify-between leading-none\",\n                          nestLabel ? \"items-end\" : \"items-center\"\n                        )}\n                      >\n                        <div className=\"grid gap-1.5\">\n                          {nestLabel ? tooltipLabel : null}\n                          <span className=\"text-muted-foreground\">\n                            {itemConfig?.label || item.name}\n                          </span>\n                        </div>\n                        {item.value && (\n                          <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                            {item.value.toLocaleString()}\n                          </span>\n                        )}\n                      </div>\n                    </>\n                  )}\n                </div>\n              )\n            })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload\n          .filter((item) => item.type !== \"none\")\n          .map((item) => {\n            const key = `${nameKey || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n            return (\n              <div\n                key={item.value}\n                className={cn(\n                  \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n                )}\n              >\n                {itemConfig?.icon && !hideIcon ? (\n                  <itemConfig.icon />\n                ) : (\n                  <div\n                    className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                    style={{\n                      backgroundColor: item.color,\n                    }}\n                  />\n                )}\n                {itemConfig?.label}\n              </div>\n            )\n          })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10763,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":792,"size_tokens":null},"client/src/pages/Skills.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Play, Lock, CheckCircle2 } from \"lucide-react\";\nimport skillsImage from \"@assets/generated_images/hockey_stick_and_puck_on_ice.png\";\nimport { useUser } from \"@/lib/UserContext\";\n\n// Comprehensive drill data - Expanded with \"Reliable Source\" Quality Data\n// Updated: No drills locked, added instructions\nconst ALL_DRILLS = [\n  // --- DEFENSE ---\n  { \n    id: 101, \n    title: \"Mohawk Transitions\", \n    type: \"Skating\", \n    positions: [\"defense\"], \n    levels: [\"a\", \"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"3 cones in a triangle pattern.\",\n    instructions: \"1. Skate forward to first cone.\\n2. Open hips into mohawk (heels together).\\n3. Glide around cone maintaining speed.\\n4. Accelerate out.\"\n  },\n  { \n    id: 102, \n    title: \"Backward Crossovers (Overspeed)\", \n    type: \"Skating\", \n    positions: [\"defense\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Full circle (faceoff circle).\",\n    instructions: \"1. Skate backward around the circle.\\n2. Focus on powerful under-push.\\n3. Maintain low center of gravity.\\n4. Increase speed until uncomfortable.\"\n  },\n  { \n    id: 103, \n    title: \"Pivot & Gap Control\", \n    type: \"Skating\", \n    positions: [\"defense\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Partner or cone at blue line.\",\n    instructions: \"1. Skate backward from red line.\\n2. As partner attacks, match their speed (gap).\\n3. Pivot to forward when they commit wide.\\n4. Angle them to the boards.\"\n  },\n  { \n    id: 104, \n    title: \"Basic Backward Skating\", \n    type: \"Skating\", \n    positions: [\"defense\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"Open ice space.\",\n    instructions: \"1. Start in athletic stance.\\n2. Push with one leg while gliding backward.\\n3. Alternate legs in C-cut motion.\\n4. Keep head up and chest forward.\"\n  },\n  { \n    id: 105, \n    title: \"Tight Turn Recovery\", \n    type: \"Skating\", \n    positions: [\"defense\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"4 cones in a square.\",\n    instructions: \"1. Skate backward to first cone.\\n2. Execute tight turn around cone.\\n3. Sprint forward to next cone.\\n4. Repeat around the square.\"\n  },\n  { \n    id: 201, \n    title: \"Blue Line Walking\", \n    type: \"Shooting\", \n    positions: [\"defense\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Pucks at blue line.\",\n    instructions: \"1. Receive puck at blue line.\\n2. Drag puck laterally to change shooting angle.\\n3. Head up, find lane through traffic.\\n4. Snap shot low for tip.\"\n  },\n  { \n    id: 202, \n    title: \"D-Zone Retrieval & Outlet\", \n    type: \"Passing\", \n    positions: [\"defense\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Dump puck into corner.\",\n    instructions: \"1. Retrieve puck with shoulder check.\\n2. Use net as protection (wheel or reverse).\\n3. Head up immediately.\\n4. Make crisp first pass to winger.\"\n  },\n  { \n    id: 203, \n    title: \"First Pass Under Pressure\", \n    type: \"Passing\", \n    positions: [\"defense\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Partner applying forecheck pressure.\",\n    instructions: \"1. Retrieve puck.\\n2. Fake one way to freeze forechecker.\\n3. Escape turn opposite way.\\n4. Execute pass.\"\n  },\n  { \n    id: 204, \n    title: \"Basic Breakout Pass\", \n    type: \"Passing\", \n    positions: [\"defense\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"Puck behind net, partner at boards.\",\n    instructions: \"1. Retrieve puck from behind net.\\n2. Look up to find open teammate.\\n3. Make tape-to-tape pass to boards.\\n4. Follow your pass for support.\"\n  },\n  { \n    id: 205, \n    title: \"Point Shot Accuracy\", \n    type: \"Shooting\", \n    positions: [\"defense\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Pucks at the point, targets in net.\",\n    instructions: \"1. Keep shot low and on net.\\n2. Focus on quick release.\\n3. Aim for corners or rebounds.\\n4. Follow through toward target.\"\n  },\n\n  // --- FORWARD (WING) ---\n  { \n    id: 301, \n    title: \"Board Battle Fundamentals\", \n    type: \"Skills\", \n    positions: [\"wing\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Boards with partner.\",\n    instructions: \"1. Establish body position first.\\n2. Use lower body strength to seal off defender.\\n3. Protect puck with stick and body.\\n4. Work puck to open ice.\"\n  },\n  { \n    id: 302, \n    title: \"Net Front Presence\", \n    type: \"Shooting\", \n    positions: [\"wing\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Position in front of net.\",\n    instructions: \"1. Establish position in crease area.\\n2. Keep stick on ice for tips/deflections.\\n3. Screen goalie without interference.\\n4. Be ready for rebounds.\"\n  },\n  { \n    id: 303, \n    title: \"Wide Attack Entry\", \n    type: \"Skating\", \n    positions: [\"wing\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Start at red line near boards.\",\n    instructions: \"1. Receive pass while in motion.\\n2. Use speed down the wing.\\n3. Drive wide around defender.\\n4. Cut to net or pass to slot.\"\n  },\n  { \n    id: 304, \n    title: \"Cycle Game Basics\", \n    type: \"Skills\", \n    positions: [\"wing\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Corner with partner.\",\n    instructions: \"1. Protect puck along boards.\\n2. Read teammate's positioning.\\n3. Execute give-and-go or reversal.\\n4. Support cycle from high position.\"\n  },\n  { \n    id: 305, \n    title: \"One-Timer from Wing\", \n    type: \"Shooting\", \n    positions: [\"wing\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Receive pass from slot area.\",\n    instructions: \"1. Open body to passer.\\n2. Wind up before puck arrives.\\n3. Strike puck cleanly without stopping.\\n4. Follow through low and hard.\"\n  },\n\n  // --- FORWARD (CENTER) ---\n  { \n    id: 401, \n    title: \"Quick Release Snap Shot\", \n    type: \"Shooting\", \n    positions: [\"wing\", \"center\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Pucks in slot.\",\n    instructions: \"1. Receive pass.\\n2. No dust (don't stickhandle unnecessarily).\\n3. Pull puck into body.\\n4. Snap shot immediately.\"\n  },\n  { \n    id: 402, \n    title: \"Shoot in Stride\", \n    type: \"Shooting\", \n    positions: [\"wing\", \"center\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Skate down wing.\",\n    instructions: \"1. Skate full speed down wing.\\n2. Release shot while feet are moving.\\n3. Shoot off outside foot for surprise factor.\"\n  },\n  { \n    id: 403, \n    title: \"Faceoff Fundamentals\", \n    type: \"Skills\", \n    positions: [\"center\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Faceoff dot with partner.\",\n    instructions: \"1. Low stance, strong base.\\n2. Watch linesman's hand.\\n3. Tie up opponent's stick first.\\n4. Win back to teammate or kick to yourself.\"\n  },\n  { \n    id: 404, \n    title: \"Backcheck & Support\", \n    type: \"Skating\", \n    positions: [\"center\"], \n    levels: [\"house\", \"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Full ice transition drill.\",\n    instructions: \"1. On turnover, sprint back immediately.\\n2. Pick up high threat first.\\n3. Communicate with defense.\\n4. Support play in D-zone.\"\n  },\n  { \n    id: 405, \n    title: \"Slot Scoring\", \n    type: \"Shooting\", \n    positions: [\"center\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Pucks in slot area.\",\n    instructions: \"1. Find soft spots in coverage.\\n2. Get open for pass.\\n3. Quick shot release, aim corners.\\n4. Follow shot for rebound.\"\n  },\n  { \n    id: 406, \n    title: \"Low Support Play\", \n    type: \"Skills\", \n    positions: [\"center\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"O-zone with wingers.\",\n    instructions: \"1. Read where support is needed.\\n2. Provide passing option low.\\n3. Cycle puck to create space.\\n4. Move to scoring position.\"\n  },\n  { \n    id: 504, \n    title: \"Pavel Datsyuk Cutbacks\", \n    type: \"Skills\", \n    positions: [\"wing\", \"center\"], \n    levels: [\"aaa\", \"junior\"], \n    locked: false,\n    setup: \"2 cones near half-wall.\",\n    instructions: \"1. Attack cone with speed.\\n2. Hard stop/cutback to open space.\\n3. Accelerate in new direction.\\n4. Protect puck with body.\"\n  },\n  \n  // --- UNIVERSAL (ALL POSITIONS) ---\n  { \n    id: 901, \n    title: \"Explosive Starts\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Goal line.\",\n    instructions: \"1. Athletic stance.\\n2. First 3 steps are quick running steps (toes).\\n3. Transition to full stride.\\n4. Stay low.\"\n  },\n  { \n    id: 902, \n    title: \"Basic Skating Stride\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"Open ice.\",\n    instructions: \"1. Push fully with each stride.\\n2. Recover skate under body.\\n3. Keep knees bent throughout.\\n4. Arms swing naturally.\"\n  },\n  { \n    id: 903, \n    title: \"Stickhandling Through Traffic\", \n    type: \"Skills\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Random obstacles/pucks scattered.\",\n    instructions: \"1. Stickhandle through 'minefield' of obstacles.\\n2. Don't touch any obstacles.\\n3. Keep head up scanning environment.\\n4. Use toe drags and wide reaches.\"\n  },\n  { \n    id: 904, \n    title: \"Basic Puck Control\", \n    type: \"Skills\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"Open ice with puck.\",\n    instructions: \"1. Cup puck softly with blade.\\n2. Move puck side to side.\\n3. Keep head up as much as possible.\\n4. Practice forehand and backhand.\"\n  },\n  { \n    id: 905, \n    title: \"Edge Work Basics\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Circle or open ice.\",\n    instructions: \"1. Glide on inside edges around circle.\\n2. Switch to outside edges.\\n3. Practice one-foot glides.\\n4. Feel blade edges grip ice.\"\n  },\n  { \n    id: 906, \n    title: \"Crossover Technique\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Faceoff circle.\",\n    instructions: \"1. Skate around circle forward.\\n2. Cross outside leg over inside leg.\\n3. Push with inside leg under body.\\n4. Build speed with each crossover.\"\n  },\n  { \n    id: 907, \n    title: \"Two-Touch Passing\", \n    type: \"Passing\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Partner 15-20 feet away.\",\n    instructions: \"1. Receive pass and control.\\n2. Set puck quickly.\\n3. Make return pass.\\n4. Increase speed as comfortable.\"\n  },\n  { \n    id: 908, \n    title: \"One-Touch Passing\", \n    type: \"Passing\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Partner 15-20 feet away.\",\n    instructions: \"1. Receive and pass in one motion.\\n2. Cushion puck slightly on reception.\\n3. Direct puck to partner's tape.\\n4. Build rhythm and speed.\"\n  },\n  { \n    id: 909, \n    title: \"Wrist Shot Fundamentals\", \n    type: \"Shooting\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"Stationary with pucks.\",\n    instructions: \"1. Puck starts near back foot.\\n2. Pull puck forward, shifting weight.\\n3. Snap wrists at release point.\\n4. Follow through to target.\"\n  },\n  { \n    id: 910, \n    title: \"Backhand Shot\", \n    type: \"Shooting\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Stationary or in motion.\",\n    instructions: \"1. Cup puck on backhand.\\n2. Pull across body.\\n3. Snap wrists while rolling blade.\\n4. Aim for far side of net.\"\n  },\n  { \n    id: 911, \n    title: \"Stopping Techniques\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"Open ice.\",\n    instructions: \"1. Turn both skates perpendicular.\\n2. Dig edges into ice.\\n3. Bend knees and sit back.\\n4. Practice both sides.\"\n  },\n  { \n    id: 912, \n    title: \"Agility Figure 8s\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Two cones 20 feet apart.\",\n    instructions: \"1. Skate figure 8 pattern around cones.\\n2. Use tight crossovers on turns.\\n3. Alternate directions each rep.\\n4. Add puck when comfortable.\"\n  },\n  { \n    id: 913, \n    title: \"Saucer Pass\", \n    type: \"Passing\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Obstacle between you and partner.\",\n    instructions: \"1. Open blade face slightly.\\n2. Lift puck with spin.\\n3. Puck should land flat for partner.\\n4. Practice varying distances.\"\n  },\n  { \n    id: 914, \n    title: \"Toe Drag Moves\", \n    type: \"Skills\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Stationary or with cones.\",\n    instructions: \"1. Pull puck toward body with toe of blade.\\n2. Fake one way, drag other.\\n3. Practice inside and outside toe drags.\\n4. Use to evade defenders.\"\n  },\n  { \n    id: 915, \n    title: \"Deking Fundamentals\", \n    type: \"Skills\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"a\", \"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Approach cone or partner.\",\n    instructions: \"1. Sell the fake with head and shoulders.\\n2. Move puck opposite direction.\\n3. Accelerate past defender.\\n4. Protect puck with body.\"\n  },\n\n  // --- GOALIE DRILLS ---\n  { \n    id: 601, \n    title: \"Basic Stance & Ready Position\", \n    type: \"Skills\", \n    positions: [\"goalie\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"In crease, facing shooter.\",\n    instructions: \"1. Feet shoulder-width apart.\\n2. Knees bent, weight on balls of feet.\\n3. Glove and blocker up and ready.\\n4. Stick flat on ice in front.\"\n  },\n  { \n    id: 602, \n    title: \"Butterfly Technique\", \n    type: \"Skills\", \n    positions: [\"goalie\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"In crease.\",\n    instructions: \"1. Drop to knees simultaneously.\\n2. Flare pads outward to seal ice.\\n3. Keep upper body tall.\\n4. Recover quickly to feet.\"\n  },\n  { \n    id: 603, \n    title: \"T-Push Movement\", \n    type: \"Skating\", \n    positions: [\"goalie\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Post to post.\",\n    instructions: \"1. Lead with front skate.\\n2. Push off back skate powerfully.\\n3. Glide across crease.\\n4. Set up square to new angle.\"\n  },\n  { \n    id: 604, \n    title: \"Butterfly Slide\", \n    type: \"Skating\", \n    positions: [\"goalie\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"In crease, post to post.\",\n    instructions: \"1. Drop into butterfly.\\n2. Push laterally with lead leg.\\n3. Keep pads sealed to ice while sliding.\\n4. Arrive set and square.\"\n  },\n  { \n    id: 605, \n    title: \"Post Integration\", \n    type: \"Skills\", \n    positions: [\"goalie\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"At goal post.\",\n    instructions: \"1. Seal post with pad.\\n2. Blocker protects short side.\\n3. Glove ready for pass out.\\n4. Eyes track puck carrier.\"\n  },\n  { \n    id: 606, \n    title: \"Rebound Control\", \n    type: \"Skills\", \n    positions: [\"goalie\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Partner shooting pucks.\",\n    instructions: \"1. Absorb shots into body.\\n2. Direct rebounds to corners.\\n3. Cover loose pucks quickly.\\n4. Track puck through traffic.\"\n  },\n  { \n    id: 607, \n    title: \"Glove Saves\", \n    type: \"Skills\", \n    positions: [\"goalie\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Partner with pucks.\",\n    instructions: \"1. Track puck into glove.\\n2. Catch in pocket, not webbing.\\n3. Bring glove to body after catch.\\n4. Squeeze immediately.\"\n  },\n  { \n    id: 608, \n    title: \"Blocker Saves & Direction\", \n    type: \"Skills\", \n    positions: [\"goalie\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Partner shooting.\",\n    instructions: \"1. Angle blocker toward corner.\\n2. Firm wrist on impact.\\n3. Direct puck to safe area.\\n4. Recover to ready position.\"\n  },\n  { \n    id: 609, \n    title: \"Puck Tracking Drills\", \n    type: \"Skills\", \n    positions: [\"goalie\"], \n    levels: [\"house\", \"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Multiple shooters.\",\n    instructions: \"1. Eyes follow puck at all times.\\n2. Track through screens.\\n3. Find puck after pass.\\n4. Anticipate shot release.\"\n  },\n  { \n    id: 610, \n    title: \"Crease Movement Patterns\", \n    type: \"Skating\", \n    positions: [\"goalie\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Full crease.\",\n    instructions: \"1. Post to post movements.\\n2. Out and back to challenge.\\n3. Lateral shuffles.\\n4. Combine with saves.\"\n  },\n  { \n    id: 611, \n    title: \"Breakaway Technique\", \n    type: \"Skills\", \n    positions: [\"goalie\"], \n    levels: [\"a\", \"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Shooter from center ice.\",\n    instructions: \"1. Challenge aggressively.\\n2. Read shooter's hands.\\n3. Stay patient, don't commit early.\\n4. Poke check or butterfly at release.\"\n  },\n  { \n    id: 612, \n    title: \"Playing the Puck\", \n    type: \"Skills\", \n    positions: [\"goalie\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Dump-ins behind net.\",\n    instructions: \"1. Communicate with defense.\\n2. Stop puck cleanly.\\n3. Set up for tape-to-tape pass.\\n4. Return to crease quickly.\"\n  },\n\n  // --- MORE HOUSE/BEGINNER DRILLS ---\n  { \n    id: 916, \n    title: \"Forward Skating Basics\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\"], \n    locked: false,\n    setup: \"Open ice.\",\n    instructions: \"1. Bend knees, lean forward slightly.\\n2. Push out and back with each stride.\\n3. Glide and recover.\\n4. Keep arms relaxed.\"\n  },\n  { \n    id: 917, \n    title: \"Balance & Edge Control\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\", \"goalie\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"Open ice.\",\n    instructions: \"1. Glide on one foot.\\n2. Hold for 5 seconds.\\n3. Switch feet.\\n4. Practice inside and outside edges.\"\n  },\n  { \n    id: 918, \n    title: \"Basic Passing\", \n    type: \"Passing\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\"], \n    locked: false,\n    setup: \"Partner 10 feet away.\",\n    instructions: \"1. Cup puck on blade.\\n2. Sweep toward target.\\n3. Follow through pointing at partner.\\n4. Receive pass with soft hands.\"\n  },\n  { \n    id: 919, \n    title: \"Receiving Passes\", \n    type: \"Passing\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"Partner passing pucks.\",\n    instructions: \"1. Present blade as target.\\n2. Cushion puck on reception.\\n3. Control before next move.\\n4. Keep eyes on puck.\"\n  },\n  { \n    id: 920, \n    title: \"Skating with Puck\", \n    type: \"Skills\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\"], \n    locked: false,\n    setup: \"Open ice with puck.\",\n    instructions: \"1. Keep puck in front of body.\\n2. Look up periodically.\\n3. Use long strides.\\n4. Cup puck gently.\"\n  },\n  { \n    id: 921, \n    title: \"Basic Body Positioning\", \n    type: \"Skills\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\"], \n    locked: false,\n    setup: \"With partner.\",\n    instructions: \"1. Stay between opponent and net.\\n2. Use body, not stick.\\n3. Keep feet moving.\\n4. Maintain balance.\"\n  },\n  { \n    id: 922, \n    title: \"Slap Shot Introduction\", \n    type: \"Shooting\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"a\", \"aa\"], \n    locked: false,\n    setup: \"Stationary with pucks.\",\n    instructions: \"1. Wind up stick behind body.\\n2. Strike ice before puck.\\n3. Follow through high.\\n4. Transfer weight forward.\"\n  },\n  { \n    id: 923, \n    title: \"Power Skating Drills\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Full ice.\",\n    instructions: \"1. Deep knee bend throughout.\\n2. Full extension on each stride.\\n3. Quick recovery under body.\\n4. Drive arms for power.\"\n  },\n  { \n    id: 924, \n    title: \"Stick Protection\", \n    type: \"Skills\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"house\", \"a\", \"aa\"], \n    locked: false,\n    setup: \"Puck with defender nearby.\",\n    instructions: \"1. Keep body between puck and defender.\\n2. Extend stick away from checker.\\n3. Use free arm for balance.\\n4. Pivot to maintain protection.\"\n  },\n  { \n    id: 925, \n    title: \"Quick Feet Agility\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\", \"goalie\"], \n    levels: [\"house\", \"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"In place or with cones.\",\n    instructions: \"1. Quick choppy steps in place.\\n2. Move laterally on command.\\n3. Forward and back sprints.\\n4. React to visual cues.\"\n  },\n  { \n    id: 926, \n    title: \"2-on-1 Rush Attack\", \n    type: \"Skills\", \n    positions: [\"wing\", \"center\"], \n    levels: [\"a\", \"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"With partner vs one defender.\",\n    instructions: \"1. Wide entry, spread defense.\\n2. Puck carrier drives wide.\\n3. Trailer fills middle lane.\\n4. Pass or shoot based on read.\"\n  },\n  { \n    id: 927, \n    title: \"Defensive Zone Coverage\", \n    type: \"Skills\", \n    positions: [\"defense\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"5v5 in D-zone.\",\n    instructions: \"1. Cover your man or zone.\\n2. Communicate with partner.\\n3. Box out in front of net.\\n4. Clear rebounds quickly.\"\n  },\n  { \n    id: 928, \n    title: \"Forecheck Pressure\", \n    type: \"Skills\", \n    positions: [\"wing\", \"center\"], \n    levels: [\"a\", \"aa\", \"aaa\"], \n    locked: false,\n    setup: \"Enter offensive zone.\",\n    instructions: \"1. First man pressures puck.\\n2. Second man supports/angles.\\n3. Third man covers high.\\n4. Force turnovers.\"\n  },\n  { \n    id: 929, \n    title: \"Neutral Zone Transition\", \n    type: \"Skating\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"Full ice.\",\n    instructions: \"1. Quick transition on turnover.\\n2. Head up, find open ice.\\n3. Support puck carrier.\\n4. Attack with speed.\"\n  },\n  { \n    id: 930, \n    title: \"Penalty Kill Positioning\", \n    type: \"Skills\", \n    positions: [\"defense\", \"wing\", \"center\"], \n    levels: [\"aa\", \"aaa\", \"junior\"], \n    locked: false,\n    setup: \"4v5 in D-zone.\",\n    instructions: \"1. Maintain box formation.\\n2. Pressure puck on perimeter.\\n3. Block shooting lanes.\\n4. Clear when possible.\"\n  }\n];\n\nexport default function Skills() {\n  const { profile, updateProfile } = useUser();\n\n  // Filter drills based on user profile\n  const recommendedDrills = ALL_DRILLS.filter(drill => \n    drill.positions.includes(profile.position) && \n    (drill.levels.includes(profile.level) || drill.levels.includes(\"all\"))\n  );\n\n  return (\n    <Layout>\n      <div className=\"relative h-48 w-full overflow-hidden rounded-b-3xl shadow-xl mb-6\">\n        <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/50 to-transparent z-10\" />\n        <img src={skillsImage} alt=\"Skills\" className=\"w-full h-full object-cover opacity-70\" />\n        <div className=\"absolute bottom-4 left-6 z-20 w-[90%]\">\n           <h1 className=\"text-3xl font-heading font-bold text-white uppercase mb-2\">Skill Lab</h1>\n           \n           <div className=\"flex gap-2 w-full\">\n             <Select \n               value={profile.position} \n               onValueChange={(val: any) => updateProfile({ position: val })}\n             >\n                <SelectTrigger className=\"bg-background/20 backdrop-blur-md border-white/10 text-white h-8 text-xs font-medium\">\n                  <SelectValue placeholder=\"Position\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"defense\">Defense</SelectItem>\n                  <SelectItem value=\"wing\">Wing</SelectItem>\n                  <SelectItem value=\"center\">Center</SelectItem>\n                  <SelectItem value=\"goalie\">Goalie</SelectItem>\n                </SelectContent>\n             </Select>\n             <Select \n               value={profile.level}\n               onValueChange={(val: any) => updateProfile({ level: val })}\n             >\n                <SelectTrigger className=\"bg-background/20 backdrop-blur-md border-white/10 text-white h-8 text-xs font-medium\">\n                  <SelectValue placeholder=\"Level\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"house\">House</SelectItem>\n                  <SelectItem value=\"a\">A</SelectItem>\n                  <SelectItem value=\"aa\">AA</SelectItem>\n                  <SelectItem value=\"aaa\">AAA</SelectItem>\n                  <SelectItem value=\"junior\">Junior</SelectItem>\n                </SelectContent>\n             </Select>\n           </div>\n        </div>\n      </div>\n\n      <div className=\"px-4 pb-20\">\n        <div className=\"flex items-center justify-between mb-4\">\n           <h2 className=\"text-lg font-bold text-white\">Recommended for You</h2>\n           <span className=\"text-xs text-muted-foreground bg-secondary px-2 py-1 rounded\">\n             {recommendedDrills.length} Drills\n           </span>\n        </div>\n\n        <div className=\"grid grid-cols-1 gap-4\">\n          {recommendedDrills.length > 0 ? (\n            recommendedDrills.map((drill) => (\n              <Dialog key={drill.id}>\n                <DialogTrigger asChild>\n                  <Card className=\"bg-card border-white/5 overflow-hidden group hover:border-primary/50 cursor-pointer transition-colors\">\n                    <CardContent className=\"p-0 flex h-24\">\n                      <div className=\"w-24 bg-secondary flex items-center justify-center relative group-hover:bg-primary/20 transition-colors\">\n                        <Play className=\"w-8 h-8 text-white fill-white relative z-10 group-hover:scale-110 transition-transform\" />\n                      </div>\n                      <div className=\"p-4 flex-1 flex flex-col justify-center\">\n                        <div className=\"flex justify-between items-start mb-1\">\n                          <Badge variant=\"outline\" className=\"border-primary/30 text-primary text-[10px] uppercase\">{drill.type}</Badge>\n                          <div className=\"flex gap-1\">\n                             {drill.levels.slice(0, 2).map(l => (\n                               <span key={l} className=\"text-[10px] text-muted-foreground uppercase font-bold\">{l}</span>\n                             ))}\n                          </div>\n                        </div>\n                        <h3 className=\"font-bold text-lg text-white group-hover:text-primary transition-colors\">{drill.title}</h3>\n                      </div>\n                    </CardContent>\n                  </Card>\n                </DialogTrigger>\n                <DialogContent className=\"bg-card border-white/10 text-white\">\n                  <DialogHeader>\n                    <DialogTitle>{drill.title}</DialogTitle>\n                  </DialogHeader>\n                  <div className=\"space-y-4 py-4\">\n                    <div className=\"bg-secondary/30 p-3 rounded-lg border border-white/5\">\n                      <span className=\"text-xs font-bold text-primary uppercase mb-1 block\">Setup</span>\n                      <p className=\"text-sm text-gray-300\">{drill.setup}</p>\n                    </div>\n                    \n                    <div>\n                      <span className=\"text-xs font-bold text-primary uppercase mb-2 block\">Instructions</span>\n                      <div className=\"space-y-2\">\n                        {drill.instructions?.split('\\n').map((step, i) => (\n                          <div key={i} className=\"flex gap-3 text-sm text-gray-300\">\n                             <CheckCircle2 className=\"w-4 h-4 text-primary shrink-0 mt-0.5\" />\n                             <span>{step}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </DialogContent>\n              </Dialog>\n            ))\n          ) : (\n            <div className=\"text-center py-10 text-muted-foreground\">\n              <p>No specific drills found for this combination.</p>\n              <p className=\"text-xs mt-2\">Try adjusting filters.</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":29447,"size_tokens":null},"client/src/components/layout/BottomNav.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { Dumbbell, Utensils, Trophy, MessageSquare, Home, User } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\nexport default function BottomNav() {\n  const [location] = useLocation();\n\n  const navItems = [\n    { href: \"/\", icon: Home, label: \"Home\" },\n    { href: \"/workouts\", icon: Dumbbell, label: \"Train\" },\n    { href: \"/diet\", icon: Utensils, label: \"Diet\" },\n    { href: \"/skills\", icon: Trophy, label: \"Skills\" },\n    { href: \"/ai\", icon: MessageSquare, label: \"AI\" },\n    { href: \"/profile\", icon: User, label: \"Profile\" },\n  ];\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 z-50 bg-card/90 backdrop-blur-xl border-t border-white/5 pb-safe\">\n      <div className=\"flex justify-around items-center h-16 px-1 max-w-md mx-auto\">\n        {navItems.map((item) => {\n          const isActive = location === item.href;\n          return (\n            <Link key={item.href} href={item.href}>\n              <div\n                className={cn(\n                  \"flex flex-col items-center justify-center w-14 h-full gap-1 transition-all duration-200 cursor-pointer\", // Reduced width from 16 to 14\n                  isActive ? \"text-primary scale-105\" : \"text-muted-foreground hover:text-white\"\n                )}\n              >\n                <item.icon className={cn(\"w-5 h-5\", isActive && \"neon-glow\")} /> {/* Reduced icon size from 6 to 5 */}\n                <span className=\"text-[9px] font-medium uppercase tracking-wider truncate max-w-full\"> {/* Reduced text size */}\n                  {item.label}\n                </span>\n              </div>\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n","path":null,"size_bytes":1698,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n\" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n           // @replit: no hover, and add primary border\n           \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm border-destructive-border\",\n        outline:\n          // @replit Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color. Uses shadow-xs. no shadow on active\n          // No hover state\n          \" border [border-color:var(--button-outline)] shadow-xs active:shadow-none \",\n        secondary:\n          // @replit border, no hover, no shadow, secondary border.\n          \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // @replit no hover, transparent border\n        ghost: \"border border-transparent\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // @replit changed sizes\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2356,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1486,"size_tokens":null},"server/storage.ts":{"content":"import { \n  type User, \n  type InsertUser,\n  type Profile,\n  type InsertProfile,\n  type UpdateProfile,\n  type WorkoutLog,\n  type InsertWorkoutLog,\n  type MealLog,\n  type InsertMealLog,\n  type CustomMeal,\n  type InsertCustomMeal,\n  type Goal,\n  type Position,\n  type CompetitionLevel,\n  type Tier,\n  type WorkoutType,\n  type MealType,\n  type MealCatalogItem,\n  type UserWorkoutSchedule,\n  type InsertUserWorkoutSchedule,\n  type UserProgress,\n  type InsertUserProgress,\n  type XpEvent,\n  type InsertXpEvent,\n  users,\n  profiles,\n  workoutLogs,\n  mealLogs,\n  customMeals,\n  goals,\n  positions,\n  competitionLevels,\n  tiers,\n  workoutTypes,\n  mealTypes,\n  mealCatalog,\n  userWorkoutSchedule,\n  userProgress,\n  xpEvents\n} from \"@shared/schema\";\nimport { db, pool } from \"../db/index\";\nimport { eq, and, desc, asc, gte, lte } from \"drizzle-orm\";\nimport session from \"express-session\";\nimport connectPg from \"connect-pg-simple\";\n\nexport interface IStorage {\n  // Session store\n  sessionStore: session.Store;\n\n  // User methods\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Profile methods\n  getProfileByUserId(userId: string): Promise<Profile | undefined>;\n  createProfile(profile: InsertProfile): Promise<Profile>;\n  updateProfile(userId: string, updates: UpdateProfile): Promise<Profile | undefined>;\n  \n  // Workout log methods\n  getWorkoutLogs(userId: string): Promise<WorkoutLog[]>;\n  logWorkout(log: InsertWorkoutLog): Promise<WorkoutLog>;\n  getWorkoutLogByDate(userId: string, date: string): Promise<WorkoutLog | undefined>;\n  deleteWorkoutByDate(userId: string, date: string): Promise<boolean>;\n  \n  // Meal log methods\n  getMealLogsForDate(userId: string, date: string): Promise<MealLog[]>;\n  upsertMealLog(log: InsertMealLog): Promise<MealLog>;\n  toggleMealConsumed(userId: string, date: string, mealTypeId: number): Promise<MealLog | undefined>;\n  \n  // Custom meal methods\n  getCustomMeals(userId: string): Promise<CustomMeal[]>;\n  createCustomMeal(meal: InsertCustomMeal): Promise<CustomMeal>;\n\n  // Lookup table methods\n  getGoals(): Promise<Goal[]>;\n  getPositions(): Promise<Position[]>;\n  getCompetitionLevels(): Promise<CompetitionLevel[]>;\n  getTiers(): Promise<Tier[]>;\n  getWorkoutTypes(): Promise<WorkoutType[]>;\n  getMealTypes(): Promise<MealType[]>;\n  getMealCatalog(mealTypeCode?: string): Promise<MealCatalogItem[]>;\n\n  // User workout schedule methods\n  getUserSchedule(userId: string): Promise<UserWorkoutSchedule[]>;\n  setUserSchedule(userId: string, schedule: Omit<InsertUserWorkoutSchedule, 'userId'>[]): Promise<UserWorkoutSchedule[]>;\n\n  // XP and progress methods\n  getUserProgress(userId: string): Promise<UserProgress | undefined>;\n  initUserProgress(userId: string): Promise<UserProgress>;\n  addXpEvent(event: InsertXpEvent): Promise<XpEvent>;\n  getXpEvents(userId: string, limit?: number): Promise<XpEvent[]>;\n  updateUserXp(userId: string, xpChange: number): Promise<UserProgress | undefined>;\n  promoteUserTier(userId: string, newTierId: number): Promise<UserProgress | undefined>;\n}\n\nconst PostgresSessionStore = connectPg(session);\n\nexport class DatabaseStorage implements IStorage {\n  sessionStore: session.Store;\n\n  constructor() {\n    this.sessionStore = new PostgresSessionStore({ \n      pool, \n      createTableIfMissing: true \n    });\n  }\n\n  // User methods\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(insertUser).returning();\n    return user;\n  }\n\n  // Profile methods\n  async getProfileByUserId(userId: string): Promise<Profile | undefined> {\n    const [profile] = await db.select().from(profiles).where(eq(profiles.userId, userId));\n    return profile;\n  }\n\n  async createProfile(profile: InsertProfile): Promise<Profile> {\n    const [newProfile] = await db.insert(profiles).values(profile).returning();\n    return newProfile;\n  }\n\n  async updateProfile(userId: string, updates: UpdateProfile): Promise<Profile | undefined> {\n    const [updated] = await db\n      .update(profiles)\n      .set({ ...updates, updatedAt: new Date() })\n      .where(eq(profiles.userId, userId))\n      .returning();\n    return updated;\n  }\n\n  // Workout log methods\n  async getWorkoutLogs(userId: string): Promise<WorkoutLog[]> {\n    return await db.select().from(workoutLogs).where(eq(workoutLogs.userId, userId));\n  }\n\n  async logWorkout(log: InsertWorkoutLog): Promise<WorkoutLog> {\n    const [workoutLog] = await db.insert(workoutLogs).values(log).returning();\n    return workoutLog;\n  }\n\n  async getWorkoutLogByDate(userId: string, date: string): Promise<WorkoutLog | undefined> {\n    const [log] = await db\n      .select()\n      .from(workoutLogs)\n      .where(and(eq(workoutLogs.userId, userId), eq(workoutLogs.date, date)));\n    return log;\n  }\n\n  async deleteWorkoutByDate(userId: string, date: string): Promise<boolean> {\n    const result = await db\n      .delete(workoutLogs)\n      .where(and(eq(workoutLogs.userId, userId), eq(workoutLogs.date, date)));\n    return true;\n  }\n\n  // Meal log methods\n  async getMealLogsForDate(userId: string, date: string): Promise<MealLog[]> {\n    return await db\n      .select()\n      .from(mealLogs)\n      .where(and(eq(mealLogs.userId, userId), eq(mealLogs.date, date)));\n  }\n\n  async upsertMealLog(log: InsertMealLog): Promise<MealLog> {\n    if (!log.mealTypeId) {\n      throw new Error(\"mealTypeId is required\");\n    }\n    \n    const existing = await db\n      .select()\n      .from(mealLogs)\n      .where(\n        and(\n          eq(mealLogs.userId, log.userId),\n          eq(mealLogs.date, log.date),\n          eq(mealLogs.mealTypeId, log.mealTypeId)\n        )\n      )\n      .orderBy(asc(mealLogs.createdAt));\n\n    if (existing.length > 0) {\n      // Delete any duplicates (keep only the first one)\n      if (existing.length > 1) {\n        const idsToDelete = existing.slice(1).map(e => e.id);\n        for (const id of idsToDelete) {\n          await db.delete(mealLogs).where(eq(mealLogs.id, id));\n        }\n      }\n      \n      const [updated] = await db\n        .update(mealLogs)\n        .set({ \n          mealCatalogId: log.mealCatalogId,\n          customMealId: log.customMealId,\n          consumed: log.consumed,\n        })\n        .where(eq(mealLogs.id, existing[0].id))\n        .returning();\n      return updated;\n    } else {\n      const [newLog] = await db.insert(mealLogs).values(log).returning();\n      return newLog;\n    }\n  }\n\n  async toggleMealConsumed(userId: string, date: string, mealTypeId: number): Promise<MealLog | undefined> {\n    const [existing] = await db\n      .select()\n      .from(mealLogs)\n      .where(\n        and(\n          eq(mealLogs.userId, userId),\n          eq(mealLogs.date, date),\n          eq(mealLogs.mealTypeId, mealTypeId)\n        )\n      );\n\n    if (existing) {\n      const [updated] = await db\n        .update(mealLogs)\n        .set({ consumed: !existing.consumed })\n        .where(eq(mealLogs.id, existing.id))\n        .returning();\n      return updated;\n    }\n    return undefined;\n  }\n\n  // Custom meal methods\n  async getCustomMeals(userId: string): Promise<CustomMeal[]> {\n    return await db\n      .select()\n      .from(customMeals)\n      .where(eq(customMeals.userId, userId))\n      .orderBy(desc(customMeals.createdAt));\n  }\n\n  async createCustomMeal(meal: InsertCustomMeal): Promise<CustomMeal> {\n    const [newMeal] = await db.insert(customMeals).values(meal).returning();\n    return newMeal;\n  }\n\n  // Lookup table methods\n  async getGoals(): Promise<Goal[]> {\n    return await db.select().from(goals);\n  }\n\n  async getPositions(): Promise<Position[]> {\n    return await db.select().from(positions);\n  }\n\n  async getCompetitionLevels(): Promise<CompetitionLevel[]> {\n    return await db.select().from(competitionLevels);\n  }\n\n  async getTiers(): Promise<Tier[]> {\n    return await db.select().from(tiers).orderBy(asc(tiers.displayOrder));\n  }\n\n  async getWorkoutTypes(): Promise<WorkoutType[]> {\n    return await db.select().from(workoutTypes);\n  }\n\n  async getMealTypes(): Promise<MealType[]> {\n    return await db.select().from(mealTypes).orderBy(asc(mealTypes.displayOrder));\n  }\n\n  async getMealCatalog(mealTypeCode?: string): Promise<MealCatalogItem[]> {\n    if (mealTypeCode) {\n      const mealType = await db.select().from(mealTypes).where(eq(mealTypes.code, mealTypeCode));\n      if (mealType.length > 0) {\n        return await db.select().from(mealCatalog)\n          .where(and(eq(mealCatalog.mealTypeId, mealType[0].id), eq(mealCatalog.isActive, true)));\n      }\n      return [];\n    }\n    return await db.select().from(mealCatalog).where(eq(mealCatalog.isActive, true));\n  }\n\n  // User workout schedule methods\n  async getUserSchedule(userId: string): Promise<UserWorkoutSchedule[]> {\n    return await db.select().from(userWorkoutSchedule)\n      .where(eq(userWorkoutSchedule.userId, userId))\n      .orderBy(asc(userWorkoutSchedule.dayOfWeek));\n  }\n\n  async setUserSchedule(userId: string, schedule: Omit<InsertUserWorkoutSchedule, 'userId'>[]): Promise<UserWorkoutSchedule[]> {\n    await db.delete(userWorkoutSchedule).where(eq(userWorkoutSchedule.userId, userId));\n    if (schedule.length === 0) return [];\n    const values = schedule.map(s => ({ ...s, userId }));\n    return await db.insert(userWorkoutSchedule).values(values).returning();\n  }\n\n  // XP and progress methods\n  async getUserProgress(userId: string): Promise<UserProgress | undefined> {\n    const [progress] = await db.select().from(userProgress).where(eq(userProgress.userId, userId));\n    return progress;\n  }\n\n  async initUserProgress(userId: string): Promise<UserProgress> {\n    const existing = await this.getUserProgress(userId);\n    if (existing) return existing;\n    \n    const [bronzeTier] = await db.select().from(tiers).where(eq(tiers.name, \"Bronze\"));\n    const [progress] = await db.insert(userProgress).values({\n      userId,\n      totalXp: 0,\n      tierId: bronzeTier?.id,\n      currentStreak: 0,\n      longestStreak: 0,\n    }).returning();\n    return progress;\n  }\n\n  async addXpEvent(event: InsertXpEvent): Promise<XpEvent> {\n    const [xpEvent] = await db.insert(xpEvents).values(event).returning();\n    return xpEvent;\n  }\n\n  async getXpEvents(userId: string, limit: number = 50): Promise<XpEvent[]> {\n    return await db.select().from(xpEvents)\n      .where(eq(xpEvents.userId, userId))\n      .orderBy(desc(xpEvents.createdAt))\n      .limit(limit);\n  }\n\n  async updateUserXp(userId: string, xpChange: number): Promise<UserProgress | undefined> {\n    let progress = await this.getUserProgress(userId);\n    if (!progress) {\n      progress = await this.initUserProgress(userId);\n    }\n    \n    const newXp = Math.max(0, progress.totalXp + xpChange);\n    \n    const allTiers = await this.getTiers();\n    const newTier = allTiers.find(t => newXp >= t.minXp && newXp <= t.maxXp);\n    \n    const [updated] = await db.update(userProgress)\n      .set({ \n        totalXp: newXp, \n        tierId: newTier?.id,\n        updatedAt: new Date() \n      })\n      .where(eq(userProgress.userId, userId))\n      .returning();\n    \n    return updated;\n  }\n\n  async promoteUserTier(userId: string, newTierId: number): Promise<UserProgress | undefined> {\n    const [updated] = await db.update(userProgress)\n      .set({ \n        totalXp: 0,\n        tierId: newTierId,\n        updatedAt: new Date() \n      })\n      .where(eq(userProgress.userId, userId))\n      .returning();\n    \n    return updated;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":11877,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5745,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4419,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":649,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route, Redirect, useLocation } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport NotFound from \"@/pages/not-found\";\nimport Home from \"@/pages/Home\";\nimport Onboarding from \"@/pages/Onboarding\";\nimport Workouts from \"@/pages/Workouts\";\nimport Diet from \"@/pages/Diet\";\nimport Skills from \"@/pages/Skills\";\nimport Review from \"@/pages/Review\";\nimport AI from \"@/pages/AI\";\nimport Profile from \"@/pages/Profile\";\nimport AuthPage from \"@/pages/AuthPage\";\nimport { UserProvider, useUser } from \"./lib/UserContext\";\nimport { AuthProvider, useAuth } from \"./hooks/use-auth\";\nimport { ProtectedRoute } from \"./lib/protected-route\";\nimport { Loader2 } from \"lucide-react\";\n\nfunction OnboardingCheck({ children }: { children: React.ReactNode }) {\n  const { profile, isLoading } = useUser();\n  const [location] = useLocation();\n  \n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n  \n  if (!profile.onboardingComplete && location !== \"/onboarding\") {\n    return <Redirect to=\"/onboarding\" />;\n  }\n  \n  if (profile.onboardingComplete && location === \"/onboarding\") {\n    return <Redirect to=\"/\" />;\n  }\n  \n  return <>{children}</>;\n}\n\nfunction AppRoutes() {\n  return (\n    <UserProvider>\n      <OnboardingCheck>\n        <Switch>\n          <Route path=\"/\" component={Home} />\n          <Route path=\"/onboarding\" component={Onboarding} />\n          <Route path=\"/workouts\" component={Workouts} />\n          <Route path=\"/diet\" component={Diet} />\n          <Route path=\"/skills\" component={Skills} />\n          <Route path=\"/review\" component={Review} />\n          <Route path=\"/ai\" component={AI} />\n          <Route path=\"/profile\" component={Profile} />\n          <Route component={NotFound} />\n        </Switch>\n      </OnboardingCheck>\n    </UserProvider>\n  );\n}\n\nfunction Router() {\n  const { user, isLoading } = useAuth();\n  \n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n  \n  return (\n    <Switch>\n      <Route path=\"/auth\" component={AuthPage} />\n      {!user ? (\n        <Route>\n          <Redirect to=\"/auth\" />\n        </Route>\n      ) : (\n        <Route>\n          <AppRoutes />\n        </Route>\n      )}\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <AuthProvider>\n          <Toaster />\n          <Router />\n        </AuthProvider>\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":2920,"size_tokens":null},"db/index.ts":{"content":"import { drizzle } from \"drizzle-orm/node-postgres\";\nimport pg from \"pg\";\n\nconst connectionString = process.env.DATABASE_URL!;\n\nexport const pool = new pg.Pool({\n  connectionString,\n});\n\nexport const db = drizzle({ client: pool });\n","path":null,"size_bytes":232,"size_tokens":null},"client/src/components/ui/item.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction ItemGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      role=\"list\"\n      data-slot=\"item-group\"\n      className={cn(\"group/item-group flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"item-separator\"\n      orientation=\"horizontal\"\n      className={cn(\"my-0\", className)}\n      {...props}\n    />\n  )\n}\n\nconst itemVariants = cva(\n  \"group/item [a]:hover:bg-accent/50 focus-visible:border-ring focus-visible:ring-ring/50 [a]:transition-colors flex flex-wrap items-center rounded-md border border-transparent text-sm outline-none transition-colors duration-100 focus-visible:ring-[3px]\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border-border\",\n        muted: \"bg-muted/50\",\n      },\n      size: {\n        default: \"gap-4 p-4 \",\n        sm: \"gap-2.5 px-4 py-3\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Item({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> &\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n  return (\n    <Comp\n      data-slot=\"item\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(itemVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nconst itemMediaVariants = cva(\n  \"flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted size-8 rounded-sm border [&_svg:not([class*='size-'])]:size-4\",\n        image:\n          \"size-10 overflow-hidden rounded-sm [&_img]:size-full [&_img]:object-cover\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction ItemMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof itemMediaVariants>) {\n  return (\n    <div\n      data-slot=\"item-media\"\n      data-variant={variant}\n      className={cn(itemMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction ItemContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-content\"\n      className={cn(\n        \"flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-title\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"item-description\"\n      className={cn(\n        \"text-muted-foreground line-clamp-2 text-balance text-sm font-normal leading-normal\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemActions({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-actions\"\n      className={cn(\"flex items-center gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-header\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-footer\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Item,\n  ItemMedia,\n  ItemContent,\n  ItemActions,\n  ItemGroup,\n  ItemSeparator,\n  ItemTitle,\n  ItemDescription,\n  ItemHeader,\n  ItemFooter,\n}\n","path":null,"size_bytes":4494,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // @replit\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \",\n  {\n    variants: {\n      variant: {\n        default:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary:\n          // @replit no hover because we use hover-elevate\n          \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n          // @replit shadow-xs\" - use badge outline variable\n        outline: \"text-foreground border [border-color:var(--badge-outline)]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1522,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7406,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/pages/Workouts.tsx":{"content":"import Layout from \"@/components/layout/Layout\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { CheckCircle2, Clock, Calendar, PlayCircle, RefreshCw, Dumbbell, Activity, Move } from \"lucide-react\";\nimport gymImage from \"@assets/generated_images/athletic_gym_training_equipment.png\";\nimport { useUser } from \"@/lib/UserContext\";\nimport { useState, useEffect } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst WORKOUT_TYPES = [\n  { id: \"legs_strength\", label: \"Legs - Strength\" },\n  { id: \"legs_explosive\", label: \"Legs - Explosiveness\" },\n  { id: \"upper_body\", label: \"Upper Body Power\" },\n  { id: \"back_biceps\", label: \"Back & Biceps\" },\n  { id: \"chest_triceps\", label: \"Chest & Triceps\" },\n  { id: \"full_body\", label: \"Full Body Athletic\" },\n  { id: \"skills_cardio\", label: \"Skills & Cardio\" },\n  { id: \"active_recovery\", label: \"Active Recovery\" },\n  { id: \"rest\", label: \"Rest Day\" },\n];\n\nconst DAYS = [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\", \"sunday\"];\n\n// Exercise Database - Expanded with \"Reliable Source\" Quality Data for All Ages\nconst EXERCISES: Record<string, Array<{ id: string, name: string, category: string }>> = {\n  \"legs_compound\": [\n    { id: \"back_squat\", name: \"Back Squat\", category: \"legs_compound\" },\n    { id: \"front_squat\", name: \"Front Squat\", category: \"legs_compound\" },\n    { id: \"leg_press\", name: \"Leg Press\", category: \"legs_compound\" },\n    { id: \"hack_squat\", name: \"Hack Squat\", category: \"legs_compound\" },\n    { id: \"safety_bar_squat\", name: \"Safety Bar Squat\", category: \"legs_compound\" },\n    { id: \"zercher_squat\", name: \"Zercher Squat\", category: \"legs_compound\" },\n    { id: \"goblet_squat\", name: \"Goblet Squat\", category: \"legs_compound\" },\n    { id: \"bodyweight_squat\", name: \"Bodyweight Squat\", category: \"legs_compound\" },\n    { id: \"box_squat\", name: \"Box Squat\", category: \"legs_compound\" },\n    { id: \"pause_squat\", name: \"Pause Squat\", category: \"legs_compound\" },\n    { id: \"anderson_squat\", name: \"Anderson Squat\", category: \"legs_compound\" },\n    { id: \"sissy_squat\", name: \"Sissy Squat\", category: \"legs_compound\" }\n  ],\n  \"legs_hinge\": [\n    { id: \"rdl\", name: \"Romanian Deadlift\", category: \"legs_hinge\" },\n    { id: \"trap_bar\", name: \"Trap Bar Deadlift\", category: \"legs_hinge\" },\n    { id: \"good_morning\", name: \"Good Mornings\", category: \"legs_hinge\" },\n    { id: \"kettlebell_swing\", name: \"Kettlebell Swing\", category: \"legs_hinge\" },\n    { id: \"single_leg_rdl\", name: \"Single Leg RDL\", category: \"legs_hinge\" },\n    { id: \"conventional_deadlift\", name: \"Conventional Deadlift\", category: \"legs_hinge\" },\n    { id: \"sumo_deadlift\", name: \"Sumo Deadlift\", category: \"legs_hinge\" },\n    { id: \"hip_thrust\", name: \"Barbell Hip Thrust\", category: \"legs_hinge\" },\n    { id: \"glute_bridge\", name: \"Glute Bridge\", category: \"legs_hinge\" },\n    { id: \"cable_pull_through\", name: \"Cable Pull Through\", category: \"legs_hinge\" },\n    { id: \"hyperextension\", name: \"Back Extension\", category: \"legs_hinge\" },\n    { id: \"nordic_curl\", name: \"Nordic Hamstring Curl\", category: \"legs_hinge\" }\n  ],\n  \"legs_unilateral\": [\n    { id: \"split_squat\", name: \"Bulgarian Split Squat\", category: \"legs_unilateral\" },\n    { id: \"walking_lunges\", name: \"Walking Lunges\", category: \"legs_unilateral\" },\n    { id: \"reverse_lunges\", name: \"Reverse Lunges\", category: \"legs_unilateral\" },\n    { id: \"step_ups\", name: \"Box Step Ups\", category: \"legs_unilateral\" },\n    { id: \"cossack_squat\", name: \"Cossack Squat\", category: \"legs_unilateral\" },\n    { id: \"lateral_lunges\", name: \"Lateral Lunges\", category: \"legs_unilateral\" },\n    { id: \"curtsy_lunges\", name: \"Curtsy Lunges\", category: \"legs_unilateral\" },\n    { id: \"pistol_squat\", name: \"Pistol Squat\", category: \"legs_unilateral\" },\n    { id: \"single_leg_press\", name: \"Single Leg Press\", category: \"legs_unilateral\" },\n    { id: \"single_leg_squat\", name: \"Single Leg Squat to Box\", category: \"legs_unilateral\" },\n    { id: \"rear_foot_elevated_split\", name: \"Rear Foot Elevated Split Squat\", category: \"legs_unilateral\" }\n  ],\n  \"legs_explosive\": [\n    { id: \"box_jumps\", name: \"Box Jumps\", category: \"legs_explosive\" },\n    { id: \"broad_jumps\", name: \"Broad Jumps\", category: \"legs_explosive\" },\n    { id: \"power_clean\", name: \"Power Clean\", category: \"legs_explosive\" },\n    { id: \"depth_jumps\", name: \"Depth Jumps\", category: \"legs_explosive\" },\n    { id: \"skater_jumps\", name: \"Skater Jumps\", category: \"legs_explosive\" },\n    { id: \"hurdle_hops\", name: \"Hurdle Hops\", category: \"legs_explosive\" },\n    { id: \"vertical_jump\", name: \"Vertical Jump\", category: \"legs_explosive\" },\n    { id: \"tuck_jumps\", name: \"Tuck Jumps\", category: \"legs_explosive\" },\n    { id: \"split_jump\", name: \"Split Jumps\", category: \"legs_explosive\" },\n    { id: \"single_leg_hop\", name: \"Single Leg Hops\", category: \"legs_explosive\" },\n    { id: \"lateral_bounds\", name: \"Lateral Bounds\", category: \"legs_explosive\" },\n    { id: \"hang_clean\", name: \"Hang Clean\", category: \"legs_explosive\" },\n    { id: \"jump_squat\", name: \"Jump Squat\", category: \"legs_explosive\" },\n    { id: \"medicine_ball_slam\", name: \"Medicine Ball Slam\", category: \"legs_explosive\" },\n    { id: \"sprint_starts\", name: \"Sprint Starts\", category: \"legs_explosive\" },\n    { id: \"burpee_variant\", name: \"Burpees\", category: \"legs_explosive\" }\n  ],\n  \"calves\": [\n    { id: \"standing_calf_raise\", name: \"Standing Calf Raise\", category: \"calves\" },\n    { id: \"seated_calf_raise\", name: \"Seated Calf Raise\", category: \"calves\" },\n    { id: \"single_leg_calf_raise\", name: \"Single Leg Calf Raise\", category: \"calves\" },\n    { id: \"donkey_calf_raise\", name: \"Donkey Calf Raise\", category: \"calves\" },\n    { id: \"calf_press\", name: \"Calf Press (Leg Press)\", category: \"calves\" },\n    { id: \"jump_rope\", name: \"Jump Rope\", category: \"calves\" },\n    { id: \"tibialis_raise\", name: \"Tibialis Raise\", category: \"calves\" }\n  ],\n  \"upper_push\": [\n    { id: \"bench_press\", name: \"Bench Press\", category: \"upper_push\" },\n    { id: \"overhead_press\", name: \"Overhead Press\", category: \"upper_push\" },\n    { id: \"incline_dumbbell_press\", name: \"Incline DB Press\", category: \"upper_push\" },\n    { id: \"db_press\", name: \"DB Press\", category: \"upper_push\" },\n    { id: \"db_shoulder_press\", name: \"DB Shoulder Press\", category: \"upper_push\" },\n    { id: \"dips\", name: \"Weighted Dips\", category: \"upper_push\" },\n    { id: \"landmine_press\", name: \"Landmine Press\", category: \"upper_push\" },\n    { id: \"pushups\", name: \"Weighted Pushups\", category: \"upper_push\" },\n    { id: \"decline_bench\", name: \"Decline Bench Press\", category: \"upper_push\" },\n    { id: \"dumbbell_bench\", name: \"Dumbbell Bench Press\", category: \"upper_push\" },\n    { id: \"floor_press\", name: \"Floor Press\", category: \"upper_push\" },\n    { id: \"pike_pushup\", name: \"Pike Pushups\", category: \"upper_push\" },\n    { id: \"arnold_press\", name: \"Arnold Press\", category: \"upper_push\" },\n    { id: \"push_press\", name: \"Push Press\", category: \"upper_push\" },\n    { id: \"cable_fly\", name: \"Cable Fly\", category: \"upper_push\" },\n    { id: \"dumbbell_fly\", name: \"Dumbbell Fly\", category: \"upper_push\" },\n    { id: \"machine_chest_press\", name: \"Machine Chest Press\", category: \"upper_push\" },\n    { id: \"incline_bench\", name: \"Incline Bench Press\", category: \"upper_push\" },\n    { id: \"close_grip_pushup\", name: \"Close Grip Pushups\", category: \"upper_push\" }\n  ],\n  \"upper_pull\": [\n    { id: \"pullups\", name: \"Pull Ups\", category: \"upper_pull\" },\n    { id: \"barbell_row\", name: \"Barbell Row\", category: \"upper_pull\" },\n    { id: \"face_pulls\", name: \"Face Pulls\", category: \"upper_pull\" },\n    { id: \"single_arm_row\", name: \"Single Arm DB Row\", category: \"upper_pull\" },\n    { id: \"lat_pulldown\", name: \"Lat Pulldown\", category: \"upper_pull\" },\n    { id: \"tbar_row\", name: \"T-Bar Row\", category: \"upper_pull\" },\n    { id: \"chin_ups\", name: \"Chin Ups\", category: \"upper_pull\" },\n    { id: \"pendlay_row\", name: \"Pendlay Row\", category: \"upper_pull\" },\n    { id: \"cable_row\", name: \"Seated Cable Row\", category: \"upper_pull\" },\n    { id: \"inverted_row\", name: \"Inverted Row\", category: \"upper_pull\" },\n    { id: \"meadows_row\", name: \"Meadows Row\", category: \"upper_pull\" },\n    { id: \"chest_supported_row\", name: \"Chest Supported Row\", category: \"upper_pull\" },\n    { id: \"straight_arm_pulldown\", name: \"Straight Arm Pulldown\", category: \"upper_pull\" },\n    { id: \"rear_delt_fly\", name: \"Rear Delt Fly\", category: \"upper_pull\" },\n    { id: \"band_pull_apart\", name: \"Band Pull Apart\", category: \"upper_pull\" }\n  ],\n  \"isolation_bicep\": [\n    { id: \"barbell_curl\", name: \"Barbell Curl\", category: \"isolation_bicep\" },\n    { id: \"hammer_curl\", name: \"Hammer Curl\", category: \"isolation_bicep\" },\n    { id: \"preacher_curl\", name: \"Preacher Curl\", category: \"isolation_bicep\" },\n    { id: \"incline_curl\", name: \"Incline DB Curl\", category: \"isolation_bicep\" },\n    { id: \"concentration_curl\", name: \"Concentration Curl\", category: \"isolation_bicep\" },\n    { id: \"cable_curl\", name: \"Cable Curl\", category: \"isolation_bicep\" },\n    { id: \"spider_curl\", name: \"Spider Curl\", category: \"isolation_bicep\" },\n    { id: \"ez_bar_curl\", name: \"EZ Bar Curl\", category: \"isolation_bicep\" },\n    { id: \"reverse_curl\", name: \"Reverse Curl\", category: \"isolation_bicep\" },\n    { id: \"drag_curl\", name: \"Drag Curl\", category: \"isolation_bicep\" }\n  ],\n  \"isolation_tricep\": [\n    { id: \"skull_crusher\", name: \"Skull Crushers\", category: \"isolation_tricep\" },\n    { id: \"tricep_pushdown\", name: \"Cable Pushdown\", category: \"isolation_tricep\" },\n    { id: \"overhead_extension\", name: \"Overhead Extension\", category: \"isolation_tricep\" },\n    { id: \"close_grip_bench\", name: \"Close Grip Bench\", category: \"isolation_tricep\" },\n    { id: \"tricep_kickback\", name: \"Tricep Kickback\", category: \"isolation_tricep\" },\n    { id: \"rope_pushdown\", name: \"Rope Pushdown\", category: \"isolation_tricep\" },\n    { id: \"diamond_pushup\", name: \"Diamond Pushups\", category: \"isolation_tricep\" },\n    { id: \"jm_press\", name: \"JM Press\", category: \"isolation_tricep\" },\n    { id: \"tricep_dips\", name: \"Bench Dips\", category: \"isolation_tricep\" }\n  ],\n  \"core\": [\n    { id: \"plank\", name: \"Weighted Plank\", category: \"core\" },\n    { id: \"pallof_press\", name: \"Pallof Press\", category: \"core\" },\n    { id: \"ab_wheel\", name: \"Ab Wheel Rollout\", category: \"core\" },\n    { id: \"hanging_leg_raise\", name: \"Hanging Leg Raise\", category: \"core\" },\n    { id: \"russian_twist\", name: \"Russian Twist\", category: \"core\" },\n    { id: \"dead_bug\", name: \"Dead Bug\", category: \"core\" },\n    { id: \"bird_dog\", name: \"Bird Dog\", category: \"core\" },\n    { id: \"bicycle_crunch\", name: \"Bicycle Crunch\", category: \"core\" },\n    { id: \"mountain_climber\", name: \"Mountain Climbers\", category: \"core\" },\n    { id: \"side_plank\", name: \"Side Plank\", category: \"core\" },\n    { id: \"v_ups\", name: \"V-Ups\", category: \"core\" },\n    { id: \"toe_touches\", name: \"Toe Touches\", category: \"core\" },\n    { id: \"cable_crunch\", name: \"Cable Crunch\", category: \"core\" },\n    { id: \"hollow_hold\", name: \"Hollow Hold\", category: \"core\" },\n    { id: \"woodchop\", name: \"Cable Woodchop\", category: \"core\" },\n    { id: \"suitcase_carry\", name: \"Suitcase Carry\", category: \"core\" },\n    { id: \"farmers_walk\", name: \"Farmers Walk\", category: \"core\" }\n  ],\n  \"shoulders\": [\n    { id: \"lateral_raise\", name: \"Lateral Raise\", category: \"shoulders\" },\n    { id: \"front_raise\", name: \"Front Raise\", category: \"shoulders\" },\n    { id: \"upright_row\", name: \"Upright Row\", category: \"shoulders\" },\n    { id: \"shrugs\", name: \"Barbell Shrugs\", category: \"shoulders\" },\n    { id: \"cuban_rotation\", name: \"Cuban Rotation\", category: \"shoulders\" },\n    { id: \"y_raise\", name: \"Y Raise\", category: \"shoulders\" },\n    { id: \"prone_y_raise\", name: \"Prone Y Raise\", category: \"shoulders\" },\n    { id: \"reverse_fly_machine\", name: \"Reverse Fly Machine\", category: \"shoulders\" }\n  ],\n  \"mobility\": [\n    { id: \"hip_90_90\", name: \"90/90 Hip Stretch\", category: \"mobility\" },\n    { id: \"world_greatest\", name: \"World's Greatest Stretch\", category: \"mobility\" },\n    { id: \"cat_cow\", name: \"Cat-Cow Stretch\", category: \"mobility\" },\n    { id: \"thoracic_rotation\", name: \"Thoracic Rotation\", category: \"mobility\" },\n    { id: \"hip_circles\", name: \"Hip Circles\", category: \"mobility\" },\n    { id: \"ankle_mobility\", name: \"Ankle Mobility Drill\", category: \"mobility\" },\n    { id: \"foam_roll_quads\", name: \"Foam Roll Quads\", category: \"mobility\" },\n    { id: \"foam_roll_it_band\", name: \"Foam Roll IT Band\", category: \"mobility\" },\n    { id: \"lacrosse_ball_glute\", name: \"Lacrosse Ball Glute Release\", category: \"mobility\" }\n  ]\n};\n\n// Goal-specific workouts - Optimized for muscle building, maintenance, or fat loss\ntype WorkoutExercise = { id: string, sets: string, reps: string, rest: string, category: string };\ntype GoalWorkouts = Record<string, Record<string, Array<WorkoutExercise>>>;\n\nconst GOAL_WORKOUTS: GoalWorkouts = {\n  // MUSCLE BUILDING: Higher volume, longer rest, heavier compound lifts, progressive overload focus\n  \"muscle\": {\n    \"legs_strength\": [\n      { id: \"back_squat\", sets: \"5\", reps: \"5\", rest: \"3-5 min\", category: \"legs_compound\" },\n      { id: \"leg_press\", sets: \"4\", reps: \"8-10\", rest: \"2-3 min\", category: \"legs_compound\" },\n      { id: \"rdl\", sets: \"4\", reps: \"8-10\", rest: \"2-3 min\", category: \"legs_hinge\" },\n      { id: \"split_squat\", sets: \"4\", reps: \"8/leg\", rest: \"2 min\", category: \"legs_unilateral\" },\n      { id: \"standing_calf_raise\", sets: \"5\", reps: \"12-15\", rest: \"90s\", category: \"calves\" },\n      { id: \"plank\", sets: \"3\", reps: \"60s\", rest: \"60s\", category: \"core\" }\n    ],\n    \"legs_explosive\": [\n      { id: \"power_clean\", sets: \"5\", reps: \"3\", rest: \"3 min\", category: \"legs_explosive\" },\n      { id: \"box_jumps\", sets: \"4\", reps: \"5\", rest: \"2-3 min\", category: \"legs_explosive\" },\n      { id: \"trap_bar\", sets: \"5\", reps: \"5\", rest: \"3 min\", category: \"legs_hinge\" },\n      { id: \"front_squat\", sets: \"4\", reps: \"6\", rest: \"2-3 min\", category: \"legs_compound\" },\n      { id: \"skater_jumps\", sets: \"3\", reps: \"8/side\", rest: \"90s\", category: \"legs_explosive\" }\n    ],\n    \"upper_body\": [\n      { id: \"bench_press\", sets: \"5\", reps: \"5\", rest: \"3-4 min\", category: \"upper_push\" },\n      { id: \"pullups\", sets: \"4\", reps: \"6-8\", rest: \"2-3 min\", category: \"upper_pull\" },\n      { id: \"overhead_press\", sets: \"4\", reps: \"6-8\", rest: \"2-3 min\", category: \"upper_push\" },\n      { id: \"barbell_row\", sets: \"4\", reps: \"8-10\", rest: \"2 min\", category: \"upper_pull\" },\n      { id: \"db_press\", sets: \"3\", reps: \"8-10\", rest: \"2 min\", category: \"upper_push\" },\n      { id: \"dips\", sets: \"3\", reps: \"8-10\", rest: \"2 min\", category: \"upper_push\" },\n      { id: \"face_pulls\", sets: \"3\", reps: \"15\", rest: \"60s\", category: \"upper_pull\" },\n      { id: \"lateral_raise\", sets: \"3\", reps: \"12-15\", rest: \"60s\", category: \"shoulders\" }\n    ],\n    \"back_biceps\": [\n      { id: \"pullups\", sets: \"4\", reps: \"6-8\", rest: \"2-3 min\", category: \"upper_pull\" },\n      { id: \"barbell_row\", sets: \"5\", reps: \"5\", rest: \"2-3 min\", category: \"upper_pull\" },\n      { id: \"tbar_row\", sets: \"4\", reps: \"8-10\", rest: \"2 min\", category: \"upper_pull\" },\n      { id: \"lat_pulldown\", sets: \"4\", reps: \"10-12\", rest: \"90s\", category: \"upper_pull\" },\n      { id: \"chest_supported_row\", sets: \"3\", reps: \"10-12\", rest: \"90s\", category: \"upper_pull\" },\n      { id: \"barbell_curl\", sets: \"4\", reps: \"8-10\", rest: \"90s\", category: \"isolation_bicep\" },\n      { id: \"hammer_curl\", sets: \"3\", reps: \"10-12\", rest: \"60s\", category: \"isolation_bicep\" },\n      { id: \"preacher_curl\", sets: \"3\", reps: \"10-12\", rest: \"60s\", category: \"isolation_bicep\" }\n    ],\n    \"chest_triceps\": [\n      { id: \"bench_press\", sets: \"5\", reps: \"5\", rest: \"3-4 min\", category: \"upper_push\" },\n      { id: \"incline_dumbbell_press\", sets: \"4\", reps: \"8-10\", rest: \"2-3 min\", category: \"upper_push\" },\n      { id: \"db_press\", sets: \"4\", reps: \"8-10\", rest: \"2 min\", category: \"upper_push\" },\n      { id: \"dips\", sets: \"4\", reps: \"8-10\", rest: \"2 min\", category: \"upper_push\" },\n      { id: \"cable_fly\", sets: \"3\", reps: \"12-15\", rest: \"90s\", category: \"upper_push\" },\n      { id: \"skull_crusher\", sets: \"4\", reps: \"10-12\", rest: \"90s\", category: \"isolation_tricep\" },\n      { id: \"tricep_pushdown\", sets: \"3\", reps: \"12-15\", rest: \"60s\", category: \"isolation_tricep\" },\n      { id: \"overhead_extension\", sets: \"3\", reps: \"12-15\", rest: \"60s\", category: \"isolation_tricep\" }\n    ],\n    \"full_body\": [\n      { id: \"conventional_deadlift\", sets: \"4\", reps: \"5\", rest: \"3-4 min\", category: \"legs_hinge\" },\n      { id: \"bench_press\", sets: \"4\", reps: \"6-8\", rest: \"2-3 min\", category: \"upper_push\" },\n      { id: \"barbell_row\", sets: \"4\", reps: \"8-10\", rest: \"2 min\", category: \"upper_pull\" },\n      { id: \"split_squat\", sets: \"3\", reps: \"10/leg\", rest: \"90s\", category: \"legs_unilateral\" },\n      { id: \"db_shoulder_press\", sets: \"3\", reps: \"8-10\", rest: \"2 min\", category: \"upper_push\" },\n      { id: \"chin_ups\", sets: \"3\", reps: \"8-10\", rest: \"90s\", category: \"upper_pull\" },\n      { id: \"pallof_press\", sets: \"3\", reps: \"10/side\", rest: \"60s\", category: \"core\" }\n    ],\n    \"skills_cardio\": [\n      { id: \"box_jumps\", sets: \"4\", reps: \"5\", rest: \"90s\", category: \"legs_explosive\" },\n      { id: \"skater_jumps\", sets: \"4\", reps: \"10/side\", rest: \"60s\", category: \"legs_explosive\" },\n      { id: \"lateral_bounds\", sets: \"3\", reps: \"8/side\", rest: \"60s\", category: \"legs_explosive\" },\n      { id: \"medicine_ball_slam\", sets: \"3\", reps: \"10\", rest: \"60s\", category: \"legs_explosive\" },\n      { id: \"farmers_walk\", sets: \"3\", reps: \"40m\", rest: \"90s\", category: \"core\" },\n      { id: \"suitcase_carry\", sets: \"3\", reps: \"30m/side\", rest: \"60s\", category: \"core\" }\n    ],\n    \"active_recovery\": []\n  },\n\n  // MAINTAIN: Moderate volume, balanced rest, mix of strength and conditioning\n  \"maintain\": {\n    \"legs_strength\": [\n      { id: \"back_squat\", sets: \"4\", reps: \"6-8\", rest: \"2-3 min\", category: \"legs_compound\" },\n      { id: \"rdl\", sets: \"3\", reps: \"10-12\", rest: \"90s\", category: \"legs_hinge\" },\n      { id: \"split_squat\", sets: \"3\", reps: \"10/leg\", rest: \"90s\", category: \"legs_unilateral\" },\n      { id: \"standing_calf_raise\", sets: \"3\", reps: \"15-20\", rest: \"60s\", category: \"calves\" },\n      { id: \"plank\", sets: \"3\", reps: \"45s\", rest: \"45s\", category: \"core\" }\n    ],\n    \"legs_explosive\": [\n      { id: \"box_jumps\", sets: \"3\", reps: \"5\", rest: \"2 min\", category: \"legs_explosive\" },\n      { id: \"power_clean\", sets: \"4\", reps: \"3\", rest: \"2-3 min\", category: \"legs_explosive\" },\n      { id: \"trap_bar\", sets: \"3\", reps: \"6\", rest: \"2 min\", category: \"legs_hinge\" },\n      { id: \"skater_jumps\", sets: \"3\", reps: \"8/side\", rest: \"90s\", category: \"legs_explosive\" },\n      { id: \"pallof_press\", sets: \"3\", reps: \"10/side\", rest: \"60s\", category: \"core\" }\n    ],\n    \"upper_body\": [\n      { id: \"bench_press\", sets: \"4\", reps: \"8-10\", rest: \"2 min\", category: \"upper_push\" },\n      { id: \"pullups\", sets: \"3\", reps: \"AMRAP\", rest: \"2 min\", category: \"upper_pull\" },\n      { id: \"db_shoulder_press\", sets: \"3\", reps: \"10-12\", rest: \"90s\", category: \"upper_push\" },\n      { id: \"barbell_row\", sets: \"3\", reps: \"10-12\", rest: \"90s\", category: \"upper_pull\" },\n      { id: \"db_press\", sets: \"3\", reps: \"10-12\", rest: \"90s\", category: \"upper_push\" },\n      { id: \"face_pulls\", sets: \"3\", reps: \"15\", rest: \"60s\", category: \"upper_pull\" },\n      { id: \"lateral_raise\", sets: \"3\", reps: \"12-15\", rest: \"45s\", category: \"shoulders\" }\n    ],\n    \"back_biceps\": [\n      { id: \"pullups\", sets: \"3\", reps: \"8-10\", rest: \"2 min\", category: \"upper_pull\" },\n      { id: \"barbell_row\", sets: \"3\", reps: \"10-12\", rest: \"90s\", category: \"upper_pull\" },\n      { id: \"lat_pulldown\", sets: \"3\", reps: \"12-15\", rest: \"60s\", category: \"upper_pull\" },\n      { id: \"cable_row\", sets: \"3\", reps: \"12-15\", rest: \"60s\", category: \"upper_pull\" },\n      { id: \"barbell_curl\", sets: \"3\", reps: \"12\", rest: \"60s\", category: \"isolation_bicep\" },\n      { id: \"hammer_curl\", sets: \"3\", reps: \"12\", rest: \"60s\", category: \"isolation_bicep\" },\n      { id: \"incline_curl\", sets: \"2\", reps: \"12-15\", rest: \"45s\", category: \"isolation_bicep\" }\n    ],\n    \"chest_triceps\": [\n      { id: \"bench_press\", sets: \"4\", reps: \"8-10\", rest: \"2 min\", category: \"upper_push\" },\n      { id: \"incline_dumbbell_press\", sets: \"3\", reps: \"10-12\", rest: \"90s\", category: \"upper_push\" },\n      { id: \"db_press\", sets: \"3\", reps: \"10-12\", rest: \"90s\", category: \"upper_push\" },\n      { id: \"dips\", sets: \"3\", reps: \"10-12\", rest: \"90s\", category: \"upper_push\" },\n      { id: \"cable_fly\", sets: \"3\", reps: \"12-15\", rest: \"60s\", category: \"upper_push\" },\n      { id: \"skull_crusher\", sets: \"3\", reps: \"12\", rest: \"60s\", category: \"isolation_tricep\" },\n      { id: \"tricep_pushdown\", sets: \"3\", reps: \"15\", rest: \"60s\", category: \"isolation_tricep\" }\n    ],\n    \"full_body\": [\n      { id: \"trap_bar\", sets: \"3\", reps: \"8\", rest: \"2 min\", category: \"legs_hinge\" },\n      { id: \"db_press\", sets: \"3\", reps: \"10\", rest: \"90s\", category: \"upper_push\" },\n      { id: \"walking_lunges\", sets: \"3\", reps: \"10/leg\", rest: \"90s\", category: \"legs_unilateral\" },\n      { id: \"single_arm_row\", sets: \"3\", reps: \"10/arm\", rest: \"90s\", category: \"upper_pull\" },\n      { id: \"db_shoulder_press\", sets: \"3\", reps: \"10\", rest: \"90s\", category: \"upper_push\" },\n      { id: \"ab_wheel\", sets: \"3\", reps: \"10\", rest: \"60s\", category: \"core\" }\n    ],\n    \"skills_cardio\": [\n      { id: \"box_jumps\", sets: \"3\", reps: \"5\", rest: \"90s\", category: \"legs_explosive\" },\n      { id: \"skater_jumps\", sets: \"3\", reps: \"8/side\", rest: \"60s\", category: \"legs_explosive\" },\n      { id: \"kettlebell_swing\", sets: \"3\", reps: \"15\", rest: \"60s\", category: \"legs_hinge\" },\n      { id: \"medicine_ball_slam\", sets: \"3\", reps: \"10\", rest: \"60s\", category: \"legs_explosive\" },\n      { id: \"mountain_climber\", sets: \"3\", reps: \"30s\", rest: \"45s\", category: \"core\" }\n    ],\n    \"active_recovery\": []\n  },\n\n  // FAT LOSS: Circuit-style, shorter rest, supersets, higher reps, metabolic conditioning\n  \"fat\": {\n    \"legs_strength\": [\n      { id: \"goblet_squat\", sets: \"4\", reps: \"15\", rest: \"45s\", category: \"legs_compound\" },\n      { id: \"kettlebell_swing\", sets: \"4\", reps: \"20\", rest: \"30s\", category: \"legs_hinge\" },\n      { id: \"walking_lunges\", sets: \"3\", reps: \"12/leg\", rest: \"45s\", category: \"legs_unilateral\" },\n      { id: \"step_ups\", sets: \"3\", reps: \"15/leg\", rest: \"30s\", category: \"legs_unilateral\" },\n      { id: \"jump_rope\", sets: \"3\", reps: \"60s\", rest: \"30s\", category: \"calves\" },\n      { id: \"mountain_climber\", sets: \"3\", reps: \"30s\", rest: \"30s\", category: \"core\" }\n    ],\n    \"legs_explosive\": [\n      { id: \"jump_squat\", sets: \"4\", reps: \"12\", rest: \"45s\", category: \"legs_explosive\" },\n      { id: \"box_jumps\", sets: \"4\", reps: \"8\", rest: \"45s\", category: \"legs_explosive\" },\n      { id: \"kettlebell_swing\", sets: \"4\", reps: \"20\", rest: \"30s\", category: \"legs_hinge\" },\n      { id: \"lateral_bounds\", sets: \"3\", reps: \"10/side\", rest: \"30s\", category: \"legs_explosive\" },\n      { id: \"tuck_jumps\", sets: \"3\", reps: \"10\", rest: \"45s\", category: \"legs_explosive\" },\n      { id: \"burpee_variant\", sets: \"3\", reps: \"10\", rest: \"30s\", category: \"legs_explosive\" }\n    ],\n    \"upper_body\": [\n      { id: \"pushups\", sets: \"4\", reps: \"15-20\", rest: \"30s\", category: \"upper_push\" },\n      { id: \"inverted_row\", sets: \"4\", reps: \"15\", rest: \"30s\", category: \"upper_pull\" },\n      { id: \"db_press\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"upper_push\" },\n      { id: \"pike_pushup\", sets: \"3\", reps: \"12\", rest: \"30s\", category: \"upper_push\" },\n      { id: \"band_pull_apart\", sets: \"3\", reps: \"20\", rest: \"20s\", category: \"upper_pull\" },\n      { id: \"db_shoulder_press\", sets: \"3\", reps: \"12\", rest: \"30s\", category: \"upper_push\" },\n      { id: \"diamond_pushup\", sets: \"3\", reps: \"12\", rest: \"30s\", category: \"isolation_tricep\" },\n      { id: \"bicycle_crunch\", sets: \"3\", reps: \"20/side\", rest: \"30s\", category: \"core\" }\n    ],\n    \"back_biceps\": [\n      { id: \"chin_ups\", sets: \"4\", reps: \"AMRAP\", rest: \"45s\", category: \"upper_pull\" },\n      { id: \"cable_row\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"upper_pull\" },\n      { id: \"lat_pulldown\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"upper_pull\" },\n      { id: \"straight_arm_pulldown\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"upper_pull\" },\n      { id: \"face_pulls\", sets: \"3\", reps: \"20\", rest: \"20s\", category: \"upper_pull\" },\n      { id: \"cable_curl\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"isolation_bicep\" },\n      { id: \"hammer_curl\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"isolation_bicep\" }\n    ],\n    \"chest_triceps\": [\n      { id: \"pushups\", sets: \"4\", reps: \"20\", rest: \"30s\", category: \"upper_push\" },\n      { id: \"db_press\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"upper_push\" },\n      { id: \"incline_dumbbell_press\", sets: \"3\", reps: \"15\", rest: \"45s\", category: \"upper_push\" },\n      { id: \"cable_fly\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"upper_push\" },\n      { id: \"tricep_dips\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"isolation_tricep\" },\n      { id: \"rope_pushdown\", sets: \"3\", reps: \"20\", rest: \"30s\", category: \"isolation_tricep\" },\n      { id: \"mountain_climber\", sets: \"3\", reps: \"30s\", rest: \"30s\", category: \"core\" }\n    ],\n    \"full_body\": [\n      { id: \"kettlebell_swing\", sets: \"4\", reps: \"20\", rest: \"30s\", category: \"legs_hinge\" },\n      { id: \"db_press\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"upper_push\" },\n      { id: \"goblet_squat\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"legs_compound\" },\n      { id: \"inverted_row\", sets: \"3\", reps: \"12\", rest: \"30s\", category: \"upper_pull\" },\n      { id: \"reverse_lunges\", sets: \"3\", reps: \"10/leg\", rest: \"30s\", category: \"legs_unilateral\" },\n      { id: \"db_shoulder_press\", sets: \"3\", reps: \"12\", rest: \"30s\", category: \"upper_push\" },\n      { id: \"v_ups\", sets: \"3\", reps: \"15\", rest: \"30s\", category: \"core\" }\n    ],\n    \"skills_cardio\": [\n      { id: \"jump_squat\", sets: \"4\", reps: \"15\", rest: \"30s\", category: \"legs_explosive\" },\n      { id: \"burpee_variant\", sets: \"4\", reps: \"10\", rest: \"30s\", category: \"legs_explosive\" },\n      { id: \"skater_jumps\", sets: \"4\", reps: \"12/side\", rest: \"30s\", category: \"legs_explosive\" },\n      { id: \"mountain_climber\", sets: \"4\", reps: \"30s\", rest: \"20s\", category: \"core\" },\n      { id: \"jump_rope\", sets: \"4\", reps: \"60s\", rest: \"30s\", category: \"calves\" },\n      { id: \"tuck_jumps\", sets: \"3\", reps: \"10\", rest: \"30s\", category: \"legs_explosive\" }\n    ],\n    \"active_recovery\": []\n  }\n};\n\n// Helper function to get workouts based on goal\nconst getWorkoutForGoal = (goal: string, workoutType: string): WorkoutExercise[] => {\n  const goalKey = goal === \"muscle\" ? \"muscle\" : goal === \"fat\" ? \"fat\" : \"maintain\";\n  return GOAL_WORKOUTS[goalKey]?.[workoutType] || GOAL_WORKOUTS[\"maintain\"][workoutType] || [];\n};\n\nconst STRETCHES = {\n  pre_game: [\n    { name: \"Leg Swings\", duration: \"10 reps/side\", type: \"Dynamic\", instructions: \"Swing leg forward and back, then side to side to open hips.\" },\n    { name: \"Arm Circles\", duration: \"30 secs\", type: \"Dynamic\", instructions: \"Large circles forward then backward to warm up shoulders.\" },\n    { name: \"Walking Lunges with Twist\", duration: \"10 reps\", type: \"Dynamic\", instructions: \"Lunge forward and twist torso towards the front leg.\" },\n    { name: \"High Knees\", duration: \"30 secs\", type: \"Dynamic\", instructions: \"Run in place driving knees up to chest height rapidly.\" },\n    { name: \"Butt Kicks\", duration: \"30 secs\", type: \"Dynamic\", instructions: \"Jog in place kicking heels up to glutes to warm hamstrings.\" },\n    { name: \"Torso Twists\", duration: \"20 reps\", type: \"Dynamic\", instructions: \"Stand feet wide, twist upper body left and right.\" }\n  ],\n  post_game: [\n    { name: \"Hamstring Stretch\", duration: \"45 secs/leg\", type: \"Static\", instructions: \"Sit with one leg out, reach for toes keeping back straight.\" },\n    { name: \"Quad Stretch\", duration: \"45 secs/leg\", type: \"Static\", instructions: \"Stand on one leg, pull other heel to glute. Keep knees together.\" },\n    { name: \"Pigeon Pose\", duration: \"60 secs/side\", type: \"Static\", instructions: \"Leg bent in front, other leg straight back. Lean forward for deep glute stretch.\" },\n    { name: \"Hip Flexor Lunge\", duration: \"45 secs/side\", type: \"Static\", instructions: \"Kneel on one knee, push hips forward until stretch felt in rear hip.\" },\n    { name: \"Calf Stretch\", duration: \"45 secs/leg\", type: \"Static\", instructions: \"Push against wall with one leg back, heel on ground.\" },\n    { name: \"Chest Opener\", duration: \"30 secs\", type: \"Static\", instructions: \"Clasp hands behind back and lift arms up to open chest.\" }\n  ]\n};\n\nexport default function Workouts() {\n  const { profile, updateProfile } = useUser();\n  const [activeTab, setActiveTab] = useState(\"schedule\");\n  \n  // Local state for current workout session customization\n  // Maps index -> exerciseId\n  const [customWorkout, setCustomWorkout] = useState<Record<number, string>>({});\n\n  const handleScheduleChange = (day: string, type: string) => {\n    updateProfile({\n      schedule: {\n        ...profile.schedule,\n        [day]: type\n      }\n    });\n  };\n\n  const currentDay = DAYS[new Date().getDay() === 0 ? 6 : new Date().getDay() - 1]; // Simple mapping, 0=Sun -> 6\n  const currentWorkoutType = profile.schedule[currentDay] || \"rest\";\n  const baseWorkout = getWorkoutForGoal(profile.goal || \"maintain\", currentWorkoutType);\n\n  const getExerciseName = (id: string, category: string) => {\n    return EXERCISES[category]?.find(e => e.id === id)?.name || id;\n  };\n\n  return (\n    <Layout>\n      <div className=\"relative h-48 w-full overflow-hidden rounded-b-3xl shadow-xl mb-6\">\n         <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/50 to-transparent z-10\" />\n        <img src={gymImage} alt=\"Gym\" className=\"w-full h-full object-cover opacity-70\" />\n        <div className=\"absolute bottom-4 left-6 z-20 w-[90%] pr-6\">\n          <div className=\"flex justify-between items-end\">\n            <div>\n              <h1 className=\"text-3xl font-heading font-bold text-white uppercase\">Training Plan</h1>\n              <p className=\"text-primary font-medium\">Phase 1: Foundation</p>\n            </div>\n             <div className=\"bg-black/30 backdrop-blur-md rounded-lg p-1 border border-white/10\">\n              <Select \n                value={profile.workoutDuration.toString()} \n                onValueChange={(val) => updateProfile({ workoutDuration: parseInt(val) })}\n              >\n                <SelectTrigger className=\"h-8 border-none bg-transparent text-white w-[100px] focus:ring-0 text-xs\">\n                  <SelectValue placeholder=\"Duration\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"30\">30 Mins</SelectItem>\n                  <SelectItem value=\"45\">45 Mins</SelectItem>\n                  <SelectItem value=\"60\">60 Mins</SelectItem>\n                  <SelectItem value=\"90\">90 Mins</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"px-4 pb-20\">\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3 bg-secondary/50 mb-6\">\n            <TabsTrigger value=\"schedule\">Weekly Split</TabsTrigger>\n            <TabsTrigger value=\"today\">Today</TabsTrigger>\n            <TabsTrigger value=\"stretching\">Stretching</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"schedule\" className=\"space-y-4 animate-in slide-in-from-bottom-4 duration-500\">\n             <div className=\"flex justify-between items-center mb-2\">\n               <h2 className=\"text-lg font-bold text-white\">Your 7-Day Split</h2>\n               <Button variant=\"ghost\" size=\"sm\" className=\"text-xs text-primary\" onClick={() => {\n                  updateProfile({\n                    schedule: {\n                      monday: \"legs_strength\",\n                      tuesday: \"upper_body\",\n                      wednesday: \"skills_cardio\",\n                      thursday: \"legs_explosive\",\n                      friday: \"full_body\",\n                      saturday: \"active_recovery\",\n                      sunday: \"rest\",\n                    }\n                  });\n               }}>Reset to Recommended</Button>\n             </div>\n             \n             <div className=\"space-y-3\">\n               {DAYS.map((day) => (\n                 <Card key={day} className=\"bg-card border-white/5\">\n                   <CardContent className=\"p-3 flex items-center justify-between\">\n                     <span className=\"text-sm font-bold text-muted-foreground uppercase w-24\">{day}</span>\n                     <Select \n                       value={profile.schedule[day] || \"rest\"} \n                       onValueChange={(val) => handleScheduleChange(day, val)}\n                     >\n                       <SelectTrigger className=\"w-[180px] h-8 text-xs bg-secondary border-transparent text-white\">\n                         <SelectValue />\n                       </SelectTrigger>\n                       <SelectContent>\n                         {WORKOUT_TYPES.map((type) => (\n                           <SelectItem key={type.id} value={type.id}>{type.label}</SelectItem>\n                         ))}\n                       </SelectContent>\n                     </Select>\n                   </CardContent>\n                 </Card>\n               ))}\n             </div>\n          </TabsContent>\n\n          <TabsContent value=\"today\" className=\"space-y-4 animate-in slide-in-from-bottom-4 duration-500\">\n            <div className=\"flex justify-between items-center mb-2\">\n              <h2 className=\"text-lg font-bold text-white\">{WORKOUT_TYPES.find(w => w.id === currentWorkoutType)?.label || \"Rest Day\"}</h2>\n              <span className=\"text-sm text-muted-foreground flex items-center\"><Clock className=\"w-4 h-4 mr-1\"/> {profile.workoutDuration} min</span>\n            </div>\n\n            {/* Warmup */}\n            {currentWorkoutType !== \"rest\" && (\n              <Card className=\"bg-secondary/30 border-white/5 mb-4\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <h3 className=\"font-bold text-primary\">Warmup</h3>\n                    <span className=\"text-xs text-muted-foreground\">10 mins</span>\n                  </div>\n                  <ul className=\"space-y-2 text-sm text-gray-300\">\n                    <li className=\"flex items-center\"><CheckCircle2 className=\"w-4 h-4 mr-2 text-green-500/50\"/> 5 min Light Cardio (Bike/Jog)</li>\n                    <li className=\"flex items-center\"><CheckCircle2 className=\"w-4 h-4 mr-2 text-green-500/50\"/> Dynamic Stretching (Leg Swings, etc.)</li>\n                    <li className=\"flex items-center\"><CheckCircle2 className=\"w-4 h-4 mr-2 text-green-500/50\"/> Activation (Glute Bridges, Band Pullaparts)</li>\n                  </ul>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Exercises */}\n            {currentWorkoutType === \"rest\" || currentWorkoutType === \"active_recovery\" ? (\n              <Card className=\"bg-card border-white/5\">\n                <CardContent className=\"p-8 text-center text-muted-foreground flex flex-col items-center\">\n                  <div className=\"bg-secondary p-4 rounded-full mb-4\">\n                    <Dumbbell className=\"w-8 h-8 opacity-20\" />\n                  </div>\n                  <h3 className=\"text-xl font-bold text-white mb-2\">Rest & Recover</h3>\n                  <p className=\"max-w-xs mx-auto\">Take today off to let your muscles rebuild. Light walking or mobility work is optional but encouraged.</p>\n                </CardContent>\n              </Card>\n            ) : (\n              baseWorkout.slice(0, Math.ceil(profile.workoutDuration / 12)).map((ex, i) => { // Adjusted scaling logic\n                const currentExerciseId = customWorkout[i] || ex.id;\n                const currentExerciseName = getExerciseName(currentExerciseId, ex.category);\n                \n                return (\n                  <Dialog key={i}>\n                    <DialogTrigger asChild>\n                      <Card className=\"bg-card border-white/5 hover:border-primary/30 transition-colors cursor-pointer group mb-3\">\n                        <CardContent className=\"p-4 flex items-center justify-between\">\n                          <div className=\"flex items-center gap-4\">\n                            <div className=\"h-10 w-10 rounded-lg bg-secondary flex items-center justify-center text-muted-foreground font-bold group-hover:text-primary transition-colors\">\n                              {i + 1}\n                            </div>\n                            <div>\n                              <div className=\"flex items-center gap-2\">\n                                <h4 className=\"font-bold text-white text-lg group-hover:text-primary transition-colors\">{currentExerciseName}</h4>\n                                <RefreshCw className=\"w-3 h-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity\" />\n                              </div>\n                              <p className=\"text-sm text-muted-foreground\">{ex.sets} Sets  {ex.reps}  Rest: {ex.rest}</p>\n                            </div>\n                          </div>\n                          <Button size=\"icon\" variant=\"ghost\" className=\"text-primary opacity-50 group-hover:opacity-100\">\n                            <PlayCircle className=\"w-6 h-6\" />\n                          </Button>\n                        </CardContent>\n                      </Card>\n                    </DialogTrigger>\n                    <DialogContent className=\"bg-card border-white/10 text-white max-h-[80vh] overflow-y-auto\">\n                      <DialogHeader>\n                        <DialogTitle>Substitute Exercise</DialogTitle>\n                      </DialogHeader>\n                      <div className=\"grid gap-2 py-4\">\n                        {EXERCISES[ex.category]?.map((alt) => (\n                          <Button \n                            key={alt.id}\n                            variant=\"ghost\" \n                            className={cn(\n                              \"justify-start h-auto py-3 px-4\",\n                              currentExerciseId === alt.id ? \"bg-primary/20 text-primary border border-primary/50\" : \"hover:bg-white/5\"\n                            )}\n                            onClick={() => {\n                              setCustomWorkout(prev => ({ ...prev, [i]: alt.id }));\n                              // Close dialog logic handled by DialogPrimitive typically, or we can control open state\n                            }}\n                          >\n                            <div className=\"text-left\">\n                              <div className=\"font-bold\">{alt.name}</div>\n                              {currentExerciseId === alt.id && <span className=\"text-[10px] uppercase font-bold text-primary\">Selected</span>}\n                            </div>\n                          </Button>\n                        ))}\n                      </div>\n                    </DialogContent>\n                  </Dialog>\n                );\n              })\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"stretching\" className=\"space-y-6 animate-in slide-in-from-bottom-4 duration-500\">\n             {/* Pre-Game Section */}\n             <div>\n               <div className=\"flex items-center gap-2 mb-3\">\n                 <Activity className=\"w-5 h-5 text-primary\" />\n                 <h2 className=\"text-lg font-bold text-white\">Pre-Game (Dynamic)</h2>\n               </div>\n               <p className=\"text-xs text-muted-foreground mb-4\">Perform these while moving to warm up muscles and joints before skating.</p>\n               \n               <div className=\"grid grid-cols-1 gap-3\">\n                 {STRETCHES.pre_game.map((stretch, i) => (\n                   <Card key={i} className=\"bg-card border-white/5\">\n                     <CardContent className=\"p-4\">\n                       <div className=\"flex justify-between items-start mb-2\">\n                         <h3 className=\"font-bold text-white\">{stretch.name}</h3>\n                         <span className=\"text-xs font-bold text-primary bg-primary/10 px-2 py-1 rounded\">{stretch.duration}</span>\n                       </div>\n                       <p className=\"text-sm text-gray-400\">{stretch.instructions}</p>\n                     </CardContent>\n                   </Card>\n                 ))}\n               </div>\n             </div>\n\n             {/* Post-Game Section */}\n             <div>\n               <div className=\"flex items-center gap-2 mb-3 mt-6\">\n                 <Move className=\"w-5 h-5 text-blue-400\" />\n                 <h2 className=\"text-lg font-bold text-white\">Post-Game (Static)</h2>\n               </div>\n               <p className=\"text-xs text-muted-foreground mb-4\">Hold these stretches to improve flexibility and aid recovery after games.</p>\n               \n               <div className=\"grid grid-cols-1 gap-3\">\n                 {STRETCHES.post_game.map((stretch, i) => (\n                   <Card key={i} className=\"bg-card border-white/5\">\n                     <CardContent className=\"p-4\">\n                       <div className=\"flex justify-between items-start mb-2\">\n                         <h3 className=\"font-bold text-white\">{stretch.name}</h3>\n                         <span className=\"text-xs font-bold text-blue-400 bg-blue-400/10 px-2 py-1 rounded\">{stretch.duration}</span>\n                       </div>\n                       <p className=\"text-sm text-gray-400\">{stretch.instructions}</p>\n                     </CardContent>\n                   </Card>\n                 ))}\n               </div>\n             </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":42496,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1877,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1148,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/spinner.tsx":{"content":"import { Loader2Icon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\n  return (\n    <Loader2Icon\n      role=\"status\"\n      aria-label=\"Loading\"\n      className={cn(\"size-4 animate-spin\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Spinner }\n","path":null,"size_bytes":331,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":724,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":2001,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1267,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, boolean, timestamp, jsonb, serial, real } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// ============================================\n// LOOKUP/REFERENCE TABLES (3NF)\n// ============================================\n\nexport const goals = pgTable(\"goals\", {\n  id: serial(\"id\").primaryKey(),\n  code: text(\"code\").notNull().unique(), // muscle, fatloss, maintain\n  label: text(\"label\").notNull(),\n  description: text(\"description\"),\n});\n\nexport const positions = pgTable(\"positions\", {\n  id: serial(\"id\").primaryKey(),\n  code: text(\"code\").notNull().unique(), // defense, wing, center, goalie\n  label: text(\"label\").notNull(),\n  description: text(\"description\"),\n});\n\nexport const competitionLevels = pgTable(\"competition_levels\", {\n  id: serial(\"id\").primaryKey(),\n  code: text(\"code\").notNull().unique(), // house, a, aa, aaa, junior\n  label: text(\"label\").notNull(),\n  activityMultiplier: real(\"activity_multiplier\").notNull().default(1.65),\n  description: text(\"description\"),\n});\n\nexport const tiers = pgTable(\"tiers\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull().unique(), // Bronze, Silver, Gold, Diamond, Elite\n  minXp: integer(\"min_xp\").notNull().default(0),\n  maxXp: integer(\"max_xp\").notNull().default(100),\n  displayOrder: integer(\"display_order\").notNull().default(0),\n  perks: text(\"perks\"), // JSON string of perks\n});\n\nexport const workoutTypes = pgTable(\"workout_types\", {\n  id: serial(\"id\").primaryKey(),\n  code: text(\"code\").notNull().unique(), // legs_strength, upper_body, etc.\n  name: text(\"name\").notNull(),\n  focusArea: text(\"focus_area\"), // legs, upper, cardio, recovery\n  description: text(\"description\"),\n  xpReward: integer(\"xp_reward\").notNull().default(15),\n});\n\nexport const mealTypes = pgTable(\"meal_types\", {\n  id: serial(\"id\").primaryKey(),\n  code: text(\"code\").notNull().unique(), // breakfast, lunch, snack, dinner\n  name: text(\"name\").notNull(),\n  displayOrder: integer(\"display_order\").notNull().default(0),\n});\n\n// ============================================\n// MEAL CATALOG (3NF - Master meal data)\n// ============================================\n\nexport const mealCatalog = pgTable(\"meal_catalog\", {\n  id: serial(\"id\").primaryKey(),\n  mealTypeId: integer(\"meal_type_id\").references(() => mealTypes.id),\n  code: text(\"code\").notNull().unique(), // oatmeal, chicken_rice, etc.\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  calories: integer(\"calories\").notNull(),\n  protein: integer(\"protein\").notNull(),\n  carbs: integer(\"carbs\").notNull(),\n  fats: integer(\"fats\").notNull(),\n  recipe: text(\"recipe\"),\n  isActive: boolean(\"is_active\").notNull().default(true),\n});\n\n// ============================================\n// USER TABLES\n// ============================================\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const profiles = pgTable(\"profiles\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  firstName: text(\"first_name\"),\n  age: integer(\"age\").notNull().default(13),\n  weight: integer(\"weight\").notNull().default(100), // lbs\n  heightFt: integer(\"height_ft\").notNull().default(5),\n  heightIn: integer(\"height_in\").notNull().default(0),\n  goalId: integer(\"goal_id\").references(() => goals.id),\n  positionId: integer(\"position_id\").references(() => positions.id),\n  levelId: integer(\"level_id\").references(() => competitionLevels.id),\n  workoutDuration: integer(\"workout_duration\").notNull().default(60),\n  livebarnConnected: boolean(\"livebarn_connected\").notNull().default(false),\n  livebarnRink: text(\"livebarn_rink\"),\n  onboardingComplete: boolean(\"onboarding_complete\").notNull().default(false),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const workoutLogs = pgTable(\"workout_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  date: text(\"date\").notNull(), // YYYY-MM-DD format\n  workoutTypeId: integer(\"workout_type_id\").references(() => workoutTypes.id),\n  xpEarned: integer(\"xp_earned\").notNull().default(15),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const mealLogs = pgTable(\"meal_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  date: text(\"date\").notNull(), // YYYY-MM-DD format\n  mealTypeId: integer(\"meal_type_id\").references(() => mealTypes.id),\n  mealCatalogId: integer(\"meal_catalog_id\").references(() => mealCatalog.id),\n  customMealId: varchar(\"custom_meal_id\").references(() => customMeals.id),\n  consumed: boolean(\"consumed\").notNull().default(false),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const customMeals = pgTable(\"custom_meals\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  name: text(\"name\").notNull(),\n  calories: integer(\"calories\").notNull(),\n  protein: integer(\"protein\").notNull(),\n  carbs: integer(\"carbs\").notNull(),\n  fats: integer(\"fats\").notNull(),\n  mealTypeId: integer(\"meal_type_id\").references(() => mealTypes.id),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\n// ============================================\n// USER WORKOUT SCHEDULE (3NF - Replaces JSONB)\n// ============================================\n\nexport const userWorkoutSchedule = pgTable(\"user_workout_schedule\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  dayOfWeek: integer(\"day_of_week\").notNull(), // 0=Sunday, 1=Monday, etc.\n  workoutTypeId: integer(\"workout_type_id\").references(() => workoutTypes.id),\n  isRestDay: boolean(\"is_rest_day\").notNull().default(false),\n});\n\n// ============================================\n// XP/PROGRESS TRACKING (3NF)\n// ============================================\n\nexport const userProgress = pgTable(\"user_progress\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }).unique(),\n  totalXp: integer(\"total_xp\").notNull().default(0),\n  tierId: integer(\"tier_id\").references(() => tiers.id),\n  currentStreak: integer(\"current_streak\").notNull().default(0),\n  longestStreak: integer(\"longest_streak\").notNull().default(0),\n  lastActivityDate: text(\"last_activity_date\"), // YYYY-MM-DD\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const xpEvents = pgTable(\"xp_events\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  xpAmount: integer(\"xp_amount\").notNull(),\n  eventType: text(\"event_type\").notNull(), // workout_completed, meal_logged, streak_bonus, etc.\n  sourceId: varchar(\"source_id\"), // ID of the workout/meal that generated this XP\n  description: text(\"description\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport const insertProfileSchema = createInsertSchema(profiles).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport const insertWorkoutLogSchema = createInsertSchema(workoutLogs).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertMealLogSchema = createInsertSchema(mealLogs).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertCustomMealSchema = createInsertSchema(customMeals).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const updateProfileSchema = createInsertSchema(profiles).omit({\n  id: true,\n  userId: true,\n  updatedAt: true,\n}).partial();\n\n// Lookup table insert schemas\nexport const insertGoalSchema = createInsertSchema(goals).omit({ id: true });\nexport const insertPositionSchema = createInsertSchema(positions).omit({ id: true });\nexport const insertCompetitionLevelSchema = createInsertSchema(competitionLevels).omit({ id: true });\nexport const insertTierSchema = createInsertSchema(tiers).omit({ id: true });\nexport const insertWorkoutTypeSchema = createInsertSchema(workoutTypes).omit({ id: true });\nexport const insertMealTypeSchema = createInsertSchema(mealTypes).omit({ id: true });\nexport const insertMealCatalogSchema = createInsertSchema(mealCatalog).omit({ id: true });\n\n// 3NF tables insert schemas\nexport const insertUserWorkoutScheduleSchema = createInsertSchema(userWorkoutSchedule).omit({ id: true });\nexport const insertUserProgressSchema = createInsertSchema(userProgress).omit({ id: true, updatedAt: true });\nexport const insertXpEventSchema = createInsertSchema(xpEvents).omit({ id: true, createdAt: true });\n\n// Types\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertProfile = z.infer<typeof insertProfileSchema>;\nexport type Profile = typeof profiles.$inferSelect;\nexport type InsertWorkoutLog = z.infer<typeof insertWorkoutLogSchema>;\nexport type WorkoutLog = typeof workoutLogs.$inferSelect;\nexport type InsertMealLog = z.infer<typeof insertMealLogSchema>;\nexport type MealLog = typeof mealLogs.$inferSelect;\nexport type InsertCustomMeal = z.infer<typeof insertCustomMealSchema>;\nexport type CustomMeal = typeof customMeals.$inferSelect;\nexport type UpdateProfile = z.infer<typeof updateProfileSchema>;\n\n// Lookup table types\nexport type Goal = typeof goals.$inferSelect;\nexport type InsertGoal = z.infer<typeof insertGoalSchema>;\nexport type Position = typeof positions.$inferSelect;\nexport type InsertPosition = z.infer<typeof insertPositionSchema>;\nexport type CompetitionLevel = typeof competitionLevels.$inferSelect;\nexport type InsertCompetitionLevel = z.infer<typeof insertCompetitionLevelSchema>;\nexport type Tier = typeof tiers.$inferSelect;\nexport type InsertTier = z.infer<typeof insertTierSchema>;\nexport type WorkoutType = typeof workoutTypes.$inferSelect;\nexport type InsertWorkoutType = z.infer<typeof insertWorkoutTypeSchema>;\nexport type MealType = typeof mealTypes.$inferSelect;\nexport type InsertMealType = z.infer<typeof insertMealTypeSchema>;\nexport type MealCatalogItem = typeof mealCatalog.$inferSelect;\nexport type InsertMealCatalogItem = z.infer<typeof insertMealCatalogSchema>;\n\n// 3NF table types\nexport type UserWorkoutSchedule = typeof userWorkoutSchedule.$inferSelect;\nexport type InsertUserWorkoutSchedule = z.infer<typeof insertUserWorkoutScheduleSchema>;\nexport type UserProgress = typeof userProgress.$inferSelect;\nexport type InsertUserProgress = z.infer<typeof insertUserProgressSchema>;\nexport type XpEvent = typeof xpEvents.$inferSelect;\nexport type InsertXpEvent = z.infer<typeof insertXpEventSchema>;\n","path":null,"size_bytes":11185,"size_tokens":null},"replit.md":{"content":"# Edge Hockey - Elite Training Platform\n\n## Overview\n\nEdge Hockey is a comprehensive hockey training application designed for players at all levels (house, A, AA, AAA, junior). The platform provides AI-powered personalized workout plans, nutrition tracking, skills development drills, game review capabilities, and an AI coaching assistant. Users can track their progress through an XP/tier system (Bronze  Silver  Gold  Diamond  Elite) while managing their training schedule, diet, and skill development.\n\nThe application is built as a full-stack TypeScript project with a React frontend and Express backend, utilizing PostgreSQL for data persistence and a modern component-based UI architecture.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework & Build System**\n- React 18+ with TypeScript for type safety\n- Vite as the build tool and development server\n- Wouter for lightweight client-side routing (no React Router)\n- TanStack Query (React Query) for server state management and data fetching\n\n**UI Component System**\n- Shadcn/ui component library (New York style variant)\n- Radix UI primitives for accessible component foundations\n- Tailwind CSS v4 (via @tailwindcss/vite) for styling with custom design tokens\n- Custom fonts: Inter (body) and Oswald (headings) from Google Fonts\n- Icon library: Lucide React\n\n**State Management Approach**\n- React Context API (UserContext) for global user profile state\n- TanStack Query for server-state caching and synchronization\n- Local React state for UI-specific concerns\n- No Redux or similar state management libraries\n\n**Key Design Patterns**\n- Component composition with shadcn/ui slot-based architecture\n- Custom hooks for reusable logic (use-mobile, use-toast)\n- Path aliases for clean imports (@/, @shared/, @assets/)\n- Mobile-first responsive design with bottom navigation\n\n### Backend Architecture\n\n**Server Framework**\n- Express.js with TypeScript for the REST API\n- Node.js with ES modules (type: \"module\")\n- HTTP server creation for potential WebSocket support (imported but not implemented)\n\n**API Design**\n- RESTful endpoints under `/api` prefix\n- JSON request/response format\n- Raw body preservation for webhook verification (Stripe-ready)\n- Request logging middleware with duration tracking\n\n**Development vs Production**\n- Development: Vite middleware integrated with Express for HMR\n- Production: Prebuilt static files served from `dist/public`\n- Build process uses esbuild for server bundling (allowlist pattern for dependencies)\n\n**Session Management Structure**\n- Currently uses a default user ID system (\"default-user\")\n- Database schema supports user authentication (username/password fields present)\n- Session infrastructure ready (connect-pg-simple imported) but not actively used\n- Design allows for future authentication layer addition\n\n### Data Storage\n\n**ORM & Database**\n- Drizzle ORM for type-safe database operations\n- PostgreSQL as the primary database (node-postgres driver)\n- Database connection via connection pool\n- Schema-first approach with Drizzle Kit for migrations\n\n**Schema Design**\n```\nusers (id, username, password, createdAt)\n   (one-to-one)\nprofiles (id, userId, age, weight, height, goal, position, level, schedule, xp, tier, ...)\n   (one-to-many)\nworkoutLogs (id, userId, date, workoutType, createdAt)\nmealLogs (id, userId, date, mealType, mealId, consumed, createdAt)\n```\n\n**Key Data Patterns**\n- UUID generation for primary keys (gen_random_uuid())\n- Cascade deletes from users to related records\n- JSONB for flexible schedule storage (weekly workout mapping)\n- Date strings in YYYY-MM-DD format for logs\n- Zod schemas generated from Drizzle schemas for validation\n\n### External Dependencies\n\n**UI & Styling**\n- Tailwind CSS v4 with PostCSS and Autoprefixer\n- Radix UI component primitives (20+ components)\n- Class Variance Authority (CVA) for component variants\n- clsx and tailwind-merge (via cn utility) for className management\n- embla-carousel-react for carousel functionality\n- date-fns for date manipulation\n\n**Forms & Validation**\n- React Hook Form for form state management\n- @hookform/resolvers for schema integration\n- Zod for runtime type validation\n- drizzle-zod for schema-to-validator conversion\n\n**Developer Experience**\n- @replit/vite-plugin-runtime-error-modal for error overlays\n- @replit/vite-plugin-cartographer for code navigation (dev only)\n- @replit/vite-plugin-dev-banner for environment indication (dev only)\n- tsx for TypeScript execution\n- drizzle-kit for database migrations\n\n**Asset Management**\n- Static assets served from `client/public`\n- Generated images stored in `attached_assets/generated_images`\n- Custom Vite plugin (vite-plugin-meta-images) for OpenGraph image handling\n- Automatic meta tag updates for Replit deployment domains\n\n**Potential Future Integrations**\n- Stripe (imported in build script allowlist)\n- OpenAI (imported in build script allowlist)\n- Google Generative AI (imported in build script allowlist)\n- Nodemailer (imported in build script allowlist)\n- Express Session with PostgreSQL store\n- Passport.js for authentication strategies\n\n**Notable Architectural Decisions**\n- No authentication currently implemented despite infrastructure presence (deliberate MVP choice)\n- Client and server code share types via `@shared` path alias\n- Build process bundles specific dependencies to reduce syscalls and improve cold start\n- Vite plugin for meta image handling specific to Replit deployment environment\n- Mobile-optimized with fixed bottom navigation (pb-safe for notched devices)","path":null,"size_bytes":5638,"size_tokens":null},"server/seed.ts":{"content":"import { db } from \"../db/index\";\nimport { \n  goals, positions, competitionLevels, tiers, \n  workoutTypes, mealTypes, mealCatalog \n} from \"@shared/schema\";\n\nasync function seed() {\n  console.log(\"Seeding lookup tables...\");\n\n  // Seed goals\n  await db.insert(goals).values([\n    { code: \"muscle\", label: \"Build Muscle\", description: \"Focus on strength and muscle mass gains\" },\n    { code: \"fatloss\", label: \"Fat Loss\", description: \"Focus on reducing body fat while maintaining muscle\" },\n    { code: \"maintain\", label: \"Maintain\", description: \"Maintain current physique and performance\" },\n  ]).onConflictDoNothing();\n\n  // Seed positions\n  await db.insert(positions).values([\n    { code: \"defense\", label: \"Defense\", description: \"Defensive player position\" },\n    { code: \"wing\", label: \"Wing\", description: \"Left or right wing forward position\" },\n    { code: \"center\", label: \"Center\", description: \"Center forward position\" },\n    { code: \"goalie\", label: \"Goalie\", description: \"Goalkeeper position\" },\n  ]).onConflictDoNothing();\n\n  // Seed competition levels\n  await db.insert(competitionLevels).values([\n    { code: \"house\", label: \"House League\", activityMultiplier: 1.55, description: \"Recreational level play\" },\n    { code: \"a\", label: \"A Level\", activityMultiplier: 1.65, description: \"Competitive A level\" },\n    { code: \"aa\", label: \"AA Level\", activityMultiplier: 1.75, description: \"Competitive AA level\" },\n    { code: \"aaa\", label: \"AAA Level\", activityMultiplier: 1.85, description: \"Elite AAA level\" },\n    { code: \"junior\", label: \"Junior\", activityMultiplier: 1.95, description: \"Junior hockey level\" },\n  ]).onConflictDoNothing();\n\n  // Seed tiers\n  await db.insert(tiers).values([\n    { name: \"Bronze\", minXp: 0, maxXp: 99, displayOrder: 1, perks: '[\"Access to basic workouts\"]' },\n    { name: \"Silver\", minXp: 100, maxXp: 299, displayOrder: 2, perks: '[\"Unlock custom meal plans\"]' },\n    { name: \"Gold\", minXp: 300, maxXp: 599, displayOrder: 3, perks: '[\"Advanced drills unlocked\"]' },\n    { name: \"Diamond\", minXp: 600, maxXp: 999, displayOrder: 4, perks: '[\"AI coach priority\"]' },\n    { name: \"Elite\", minXp: 1000, maxXp: 99999, displayOrder: 5, perks: '[\"All features unlocked\"]' },\n  ]).onConflictDoNothing();\n\n  // Seed workout types\n  await db.insert(workoutTypes).values([\n    { code: \"legs_strength\", name: \"Legs (Strength)\", focusArea: \"legs\", xpReward: 15, description: \"Lower body strength training\" },\n    { code: \"legs_speed\", name: \"Legs (Speed)\", focusArea: \"legs\", xpReward: 15, description: \"Lower body speed and agility\" },\n    { code: \"upper_push\", name: \"Upper Body (Push)\", focusArea: \"upper\", xpReward: 15, description: \"Chest, shoulders, triceps\" },\n    { code: \"upper_pull\", name: \"Upper Body (Pull)\", focusArea: \"upper\", xpReward: 15, description: \"Back and biceps\" },\n    { code: \"cardio\", name: \"Cardio\", focusArea: \"cardio\", xpReward: 10, description: \"Cardiovascular conditioning\" },\n    { code: \"recovery\", name: \"Recovery\", focusArea: \"recovery\", xpReward: 5, description: \"Rest and recovery day\" },\n    { code: \"rest\", name: \"Rest Day\", focusArea: \"recovery\", xpReward: 0, description: \"Complete rest\" },\n  ]).onConflictDoNothing();\n\n  // Seed meal types\n  await db.insert(mealTypes).values([\n    { code: \"breakfast\", name: \"Breakfast\", displayOrder: 1 },\n    { code: \"lunch\", name: \"Lunch\", displayOrder: 2 },\n    { code: \"snack\", name: \"Snack\", displayOrder: 3 },\n    { code: \"dinner\", name: \"Dinner\", displayOrder: 4 },\n  ]).onConflictDoNothing();\n\n  // Seed meal catalog\n  const mealTypeRows = await db.select().from(mealTypes);\n  const mealTypeMap: Record<string, number> = Object.fromEntries(mealTypeRows.map((mt) => [mt.code, mt.id]));\n\n  await db.insert(mealCatalog).values([\n    // Breakfast options\n    { mealTypeId: mealTypeMap[\"breakfast\"], code: \"oatmeal\", name: \"Oatmeal with Berries\", calories: 350, protein: 12, carbs: 60, fats: 8, description: \"Steel-cut oats with mixed berries and honey\" },\n    { mealTypeId: mealTypeMap[\"breakfast\"], code: \"eggs_toast\", name: \"Eggs & Toast\", calories: 400, protein: 22, carbs: 35, fats: 18, description: \"Scrambled eggs with whole wheat toast\" },\n    { mealTypeId: mealTypeMap[\"breakfast\"], code: \"protein_smoothie\", name: \"Protein Smoothie\", calories: 380, protein: 30, carbs: 45, fats: 8, description: \"Banana, protein powder, milk, peanut butter\" },\n    \n    // Lunch options\n    { mealTypeId: mealTypeMap[\"lunch\"], code: \"chicken_rice\", name: \"Chicken & Rice\", calories: 550, protein: 45, carbs: 55, fats: 12, description: \"Grilled chicken breast with brown rice and vegetables\" },\n    { mealTypeId: mealTypeMap[\"lunch\"], code: \"turkey_wrap\", name: \"Turkey Wrap\", calories: 480, protein: 35, carbs: 45, fats: 15, description: \"Turkey, lettuce, tomato in whole wheat wrap\" },\n    { mealTypeId: mealTypeMap[\"lunch\"], code: \"salmon_salad\", name: \"Salmon Salad\", calories: 520, protein: 40, carbs: 25, fats: 28, description: \"Grilled salmon over mixed greens\" },\n    \n    // Snack options\n    { mealTypeId: mealTypeMap[\"snack\"], code: \"protein_bar\", name: \"Protein Bar\", calories: 200, protein: 20, carbs: 22, fats: 6, description: \"High protein energy bar\" },\n    { mealTypeId: mealTypeMap[\"snack\"], code: \"greek_yogurt\", name: \"Greek Yogurt\", calories: 180, protein: 18, carbs: 12, fats: 5, description: \"Plain Greek yogurt with nuts\" },\n    { mealTypeId: mealTypeMap[\"snack\"], code: \"trail_mix\", name: \"Trail Mix\", calories: 250, protein: 8, carbs: 28, fats: 14, description: \"Mixed nuts and dried fruit\" },\n    \n    // Dinner options\n    { mealTypeId: mealTypeMap[\"dinner\"], code: \"steak_potato\", name: \"Steak & Potato\", calories: 650, protein: 50, carbs: 45, fats: 28, description: \"Grilled steak with baked potato and veggies\" },\n    { mealTypeId: mealTypeMap[\"dinner\"], code: \"pasta_meatballs\", name: \"Pasta with Meatballs\", calories: 700, protein: 35, carbs: 80, fats: 22, description: \"Whole wheat pasta with lean meatballs\" },\n    { mealTypeId: mealTypeMap[\"dinner\"], code: \"grilled_fish\", name: \"Grilled Fish\", calories: 450, protein: 42, carbs: 30, fats: 15, description: \"White fish with quinoa and vegetables\" },\n  ]).onConflictDoNothing();\n\n  console.log(\"Seeding complete!\");\n}\n\nseed()\n  .then(() => process.exit(0))\n  .catch((err) => {\n    console.error(\"Seeding failed:\", err);\n    process.exit(1);\n  });\n","path":null,"size_bytes":6341,"size_tokens":null},"client/src/hooks/use-auth.tsx":{"content":"import { createContext, ReactNode, useContext } from \"react\";\nimport {\n  useQuery,\n  useMutation,\n  UseMutationResult,\n} from \"@tanstack/react-query\";\nimport { User as SelectUser } from \"@shared/schema\";\nimport { queryClient } from \"../lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ntype AuthContextType = {\n  user: SelectUser | null;\n  isLoading: boolean;\n  error: Error | null;\n  loginMutation: UseMutationResult<SelectUser, Error, LoginData>;\n  logoutMutation: UseMutationResult<void, Error, void>;\n  registerMutation: UseMutationResult<SelectUser, Error, RegisterData>;\n};\n\ntype LoginData = {\n  username: string;\n  password: string;\n};\n\ntype RegisterData = {\n  username: string;\n  password: string;\n};\n\nasync function apiRequest(method: string, url: string, body?: any) {\n  const res = await fetch(url, {\n    method,\n    headers: body ? { \"Content-Type\": \"application/json\" } : undefined,\n    body: body ? JSON.stringify(body) : undefined,\n    credentials: \"include\",\n  });\n  \n  if (!res.ok) {\n    const data = await res.json().catch(() => ({ error: \"Request failed\" }));\n    throw new Error(data.error || \"Request failed\");\n  }\n  \n  return res;\n}\n\nexport const AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const { toast } = useToast();\n  \n  const {\n    data: user,\n    error,\n    isLoading,\n  } = useQuery<SelectUser | null, Error>({\n    queryKey: [\"/api/user\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/user\", { credentials: \"include\" });\n      if (res.status === 401) return null;\n      if (!res.ok) throw new Error(\"Failed to fetch user\");\n      return res.json();\n    },\n    retry: false,\n    staleTime: Infinity,\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: LoginData) => {\n      const res = await apiRequest(\"POST\", \"/api/login\", credentials);\n      return await res.json();\n    },\n    onSuccess: (user: SelectUser) => {\n      queryClient.setQueryData([\"/api/user\"], user);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Login failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (credentials: RegisterData) => {\n      const res = await apiRequest(\"POST\", \"/api/register\", credentials);\n      return await res.json();\n    },\n    onSuccess: (user: SelectUser) => {\n      queryClient.setQueryData([\"/api/user\"], user);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Registration failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", \"/api/logout\");\n    },\n    onSuccess: () => {\n      queryClient.setQueryData([\"/api/user\"], null);\n      queryClient.removeQueries({ predicate: (query) => query.queryKey[0] !== \"/api/user\" });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Logout failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user: user ?? null,\n        isLoading,\n        error,\n        loginMutation,\n        logoutMutation,\n        registerMutation,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":3616,"size_tokens":null},"client/src/pages/AuthPage.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Loader2, Trophy, Target, Zap } from \"lucide-react\";\n\nexport default function AuthPage() {\n  const [, setLocation] = useLocation();\n  const { user, loginMutation, registerMutation } = useAuth();\n  \n  const [loginForm, setLoginForm] = useState({ username: \"\", password: \"\" });\n  const [registerForm, setRegisterForm] = useState({ username: \"\", password: \"\", confirmPassword: \"\" });\n\n  useEffect(() => {\n    if (user) {\n      setLocation(\"/\");\n    }\n  }, [user, setLocation]);\n\n  if (user) {\n    return null;\n  }\n\n  const handleLogin = (e: React.FormEvent) => {\n    e.preventDefault();\n    loginMutation.mutate(loginForm);\n  };\n\n  const handleRegister = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (registerForm.password !== registerForm.confirmPassword) {\n      return;\n    }\n    registerMutation.mutate({\n      username: registerForm.username,\n      password: registerForm.password,\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background flex\">\n      <div className=\"flex-1 flex items-center justify-center p-6\">\n        <Card className=\"w-full max-w-md bg-card border-white/10\">\n          <CardHeader className=\"text-center pb-2\">\n            <h1 className=\"text-3xl font-heading font-bold text-white uppercase italic mb-2\">\n              Edge<span className=\"text-primary\">Hockey</span>\n            </h1>\n            <CardDescription className=\"text-muted-foreground\">\n              Elite training for elite players\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Tabs defaultValue=\"login\" className=\"w-full\">\n              <TabsList className=\"grid w-full grid-cols-2 mb-6\">\n                <TabsTrigger value=\"login\" data-testid=\"tab-login\">Sign In</TabsTrigger>\n                <TabsTrigger value=\"register\" data-testid=\"tab-register\">Sign Up</TabsTrigger>\n              </TabsList>\n              \n              <TabsContent value=\"login\">\n                <form onSubmit={handleLogin} className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"login-username\">Username</Label>\n                    <Input\n                      id=\"login-username\"\n                      data-testid=\"input-login-username\"\n                      type=\"text\"\n                      placeholder=\"Enter your username\"\n                      className=\"bg-secondary border-transparent\"\n                      value={loginForm.username}\n                      onChange={(e) => setLoginForm({ ...loginForm, username: e.target.value })}\n                      required\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"login-password\">Password</Label>\n                    <Input\n                      id=\"login-password\"\n                      data-testid=\"input-login-password\"\n                      type=\"password\"\n                      placeholder=\"Enter your password\"\n                      className=\"bg-secondary border-transparent\"\n                      value={loginForm.password}\n                      onChange={(e) => setLoginForm({ ...loginForm, password: e.target.value })}\n                      required\n                    />\n                  </div>\n                  <Button\n                    type=\"submit\"\n                    data-testid=\"button-login\"\n                    className=\"w-full bg-primary text-primary-foreground font-bold h-12\"\n                    disabled={loginMutation.isPending}\n                  >\n                    {loginMutation.isPending ? (\n                      <Loader2 className=\"w-4 h-4 animate-spin mr-2\" />\n                    ) : null}\n                    Sign In\n                  </Button>\n                </form>\n              </TabsContent>\n              \n              <TabsContent value=\"register\">\n                <form onSubmit={handleRegister} className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"register-username\">Username</Label>\n                    <Input\n                      id=\"register-username\"\n                      data-testid=\"input-register-username\"\n                      type=\"text\"\n                      placeholder=\"Choose a username\"\n                      className=\"bg-secondary border-transparent\"\n                      value={registerForm.username}\n                      onChange={(e) => setRegisterForm({ ...registerForm, username: e.target.value })}\n                      required\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"register-password\">Password</Label>\n                    <Input\n                      id=\"register-password\"\n                      data-testid=\"input-register-password\"\n                      type=\"password\"\n                      placeholder=\"Create a password (min 6 characters)\"\n                      className=\"bg-secondary border-transparent\"\n                      value={registerForm.password}\n                      onChange={(e) => setRegisterForm({ ...registerForm, password: e.target.value })}\n                      required\n                      minLength={6}\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"register-confirm\">Confirm Password</Label>\n                    <Input\n                      id=\"register-confirm\"\n                      data-testid=\"input-register-confirm\"\n                      type=\"password\"\n                      placeholder=\"Confirm your password\"\n                      className=\"bg-secondary border-transparent\"\n                      value={registerForm.confirmPassword}\n                      onChange={(e) => setRegisterForm({ ...registerForm, confirmPassword: e.target.value })}\n                      required\n                    />\n                    {registerForm.password && registerForm.confirmPassword && registerForm.password !== registerForm.confirmPassword && (\n                      <p className=\"text-xs text-red-500\">Passwords do not match</p>\n                    )}\n                  </div>\n                  <Button\n                    type=\"submit\"\n                    data-testid=\"button-register\"\n                    className=\"w-full bg-primary text-primary-foreground font-bold h-12\"\n                    disabled={registerMutation.isPending || registerForm.password !== registerForm.confirmPassword}\n                  >\n                    {registerMutation.isPending ? (\n                      <Loader2 className=\"w-4 h-4 animate-spin mr-2\" />\n                    ) : null}\n                    Create Account\n                  </Button>\n                </form>\n              </TabsContent>\n            </Tabs>\n          </CardContent>\n        </Card>\n      </div>\n      \n      <div className=\"hidden lg:flex flex-1 bg-gradient-to-br from-primary/20 to-primary/5 items-center justify-center p-12\">\n        <div className=\"max-w-md space-y-8\">\n          <h2 className=\"text-4xl font-heading font-bold text-white uppercase italic\">\n            Train Like a Pro\n          </h2>\n          <p className=\"text-lg text-muted-foreground\">\n            Join Edge Hockey and unlock personalized training plans, nutrition tracking, and skill development tools designed for serious hockey players.\n          </p>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center\">\n                <Target className=\"w-6 h-6 text-primary\" />\n              </div>\n              <div>\n                <p className=\"font-bold text-white\">Personalized Workouts</p>\n                <p className=\"text-sm text-muted-foreground\">Custom plans for your position and goals</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center\">\n                <Zap className=\"w-6 h-6 text-primary\" />\n              </div>\n              <div>\n                <p className=\"font-bold text-white\">XP & Progression</p>\n                <p className=\"text-sm text-muted-foreground\">Track your journey from Bronze to Elite</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center\">\n                <Trophy className=\"w-6 h-6 text-primary\" />\n              </div>\n              <div>\n                <p className=\"font-bold text-white\">Skill Development</p>\n                <p className=\"text-sm text-muted-foreground\">Master drills used by the pros</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":9329,"size_tokens":null},"client/src/pages/Profile.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport Layout from \"@/components/layout/Layout\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { User, Save, Trophy, Zap, Target, TrendingUp, Award, LogOut } from \"lucide-react\";\nimport { useUser } from \"@/lib/UserContext\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { cn } from \"@/lib/utils\";\n\nexport default function Profile() {\n  const { profile, updateProfile, xp } = useUser();\n  const { user, logoutMutation } = useAuth();\n  const [isEditing, setIsEditing] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    firstName: profile.firstName || \"\",\n    age: profile.age,\n    weight: profile.weight,\n    heightFt: profile.heightFt,\n    heightIn: profile.heightIn,\n    position: profile.position,\n    level: profile.level,\n    goal: profile.goal\n  });\n  \n  useEffect(() => {\n    setFormData({\n      firstName: profile.firstName || \"\",\n      age: profile.age,\n      weight: profile.weight,\n      heightFt: profile.heightFt,\n      heightIn: profile.heightIn,\n      position: profile.position,\n      level: profile.level,\n      goal: profile.goal\n    });\n  }, [profile]);\n\n  const handleSave = async () => {\n    setIsSaving(true);\n    try {\n      await updateProfile({\n        firstName: formData.firstName,\n        age: formData.age,\n        weight: formData.weight,\n        heightFt: formData.heightFt,\n        heightIn: formData.heightIn,\n        position: formData.position,\n        level: formData.level,\n        goal: formData.goal\n      });\n      setIsEditing(false);\n    } catch (error) {\n      console.error(\"Failed to save profile:\", error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const tierConfig: Record<string, { color: string; bgColor: string; borderColor: string }> = {\n    Bronze: { color: \"text-orange-400\", bgColor: \"bg-orange-500/10\", borderColor: \"border-orange-500/30\" },\n    Silver: { color: \"text-gray-300\", bgColor: \"bg-gray-500/10\", borderColor: \"border-gray-500/30\" },\n    Gold: { color: \"text-yellow-400\", bgColor: \"bg-yellow-500/10\", borderColor: \"border-yellow-500/30\" },\n    Diamond: { color: \"text-cyan-400\", bgColor: \"bg-cyan-500/10\", borderColor: \"border-cyan-500/30\" },\n    Elite: { color: \"text-purple-400\", bgColor: \"bg-purple-500/10\", borderColor: \"border-purple-500/30\" }\n  };\n\n  const currentTier = tierConfig[profile.tier] || tierConfig.Bronze;\n\n  const positionLabels: Record<string, string> = {\n    defense: \"Defense\",\n    wing: \"Wing\",\n    center: \"Center\",\n    goalie: \"Goalie\"\n  };\n\n  const levelLabels: Record<string, string> = {\n    house: \"House League\",\n    a: \"A Level\",\n    aa: \"AA Level\",\n    aaa: \"AAA Level\",\n    junior: \"Junior\"\n  };\n\n  const goalLabels: Record<string, string> = {\n    muscle: \"Build Muscle\",\n    fatloss: \"Fat Loss\",\n    maintain: \"Maintain\"\n  };\n\n  return (\n    <Layout>\n      <div className=\"p-6 space-y-6\">\n        <div className={cn(\n          \"relative rounded-2xl p-6 border overflow-hidden\",\n          currentTier.bgColor,\n          currentTier.borderColor\n        )}>\n          <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-white/5 to-transparent rounded-bl-full\" />\n          \n          <div className=\"flex items-start gap-4 relative z-10\">\n            <div className={cn(\n              \"w-20 h-20 rounded-2xl flex items-center justify-center text-3xl font-bold border-2\",\n              currentTier.bgColor,\n              currentTier.borderColor,\n              currentTier.color\n            )}>\n              {profile.firstName ? profile.firstName.charAt(0).toUpperCase() : \"P\"}\n            </div>\n            \n            <div className=\"flex-1\">\n              <h1 className=\"text-2xl font-heading font-bold text-white\" data-testid=\"text-player-name\">\n                {profile.firstName || \"Player\"}\n              </h1>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <Trophy className={cn(\"w-4 h-4\", currentTier.color)} />\n                <span className={cn(\"font-bold text-sm\", currentTier.color)} data-testid=\"text-tier\">\n                  {profile.tier}\n                </span>\n              </div>\n              \n              <div className=\"flex items-center gap-4 mt-3\">\n                <div className=\"flex items-center gap-1.5\">\n                  <Zap className=\"w-4 h-4 text-yellow-400\" />\n                  <span className=\"text-white font-bold\" data-testid=\"text-xp\">{xp}</span>\n                  <span className=\"text-muted-foreground text-sm\">XP</span>\n                </div>\n                <div className=\"flex items-center gap-1.5\">\n                  <Award className=\"w-4 h-4 text-primary\" />\n                  <span className=\"text-white font-bold\">{profile.workoutHistory?.length || 0}</span>\n                  <span className=\"text-muted-foreground text-sm\">Workouts</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-3 gap-3\">\n          <Card className=\"bg-card border-white/5 text-center\">\n            <CardContent className=\"p-4\">\n              <p className=\"text-2xl font-bold text-white\" data-testid=\"text-age-chip\">{profile.age}</p>\n              <p className=\"text-xs text-muted-foreground uppercase\">Years Old</p>\n            </CardContent>\n          </Card>\n          <Card className=\"bg-card border-white/5 text-center\">\n            <CardContent className=\"p-4\">\n              <p className=\"text-2xl font-bold text-white\" data-testid=\"text-weight-chip\">{profile.weight}</p>\n              <p className=\"text-xs text-muted-foreground uppercase\">Pounds</p>\n            </CardContent>\n          </Card>\n          <Card className=\"bg-card border-white/5 text-center\">\n            <CardContent className=\"p-4\">\n              <p className=\"text-2xl font-bold text-white\" data-testid=\"text-height-chip\">{profile.heightFt}'{profile.heightIn}\"</p>\n              <p className=\"text-xs text-muted-foreground uppercase\">Height</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Card className=\"bg-card border-white/10\">\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <User className=\"w-5 h-5 text-primary\" />\n              Personal Info\n            </CardTitle>\n            {!isEditing ? (\n              <Button \n                data-testid=\"button-edit-profile\"\n                variant=\"outline\" \n                size=\"sm\"\n                onClick={() => setIsEditing(true)}\n              >\n                Edit\n              </Button>\n            ) : (\n              <Button \n                data-testid=\"button-save-profile\"\n                size=\"sm\"\n                onClick={handleSave}\n                disabled={isSaving}\n              >\n                <Save className=\"w-4 h-4 mr-2\" />\n                {isSaving ? \"Saving...\" : \"Save\"}\n              </Button>\n            )}\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs text-muted-foreground\">First Name</Label>\n                {isEditing ? (\n                  <Input\n                    data-testid=\"input-edit-first-name\"\n                    value={formData.firstName}\n                    onChange={(e) => setFormData({ ...formData, firstName: e.target.value })}\n                    className=\"bg-secondary border-transparent h-10\"\n                  />\n                ) : (\n                  <p data-testid=\"text-first-name\" className=\"text-white font-medium\">{profile.firstName || \"Not set\"}</p>\n                )}\n              </div>\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs text-muted-foreground\">Age</Label>\n                {isEditing ? (\n                  <Input\n                    data-testid=\"input-edit-age\"\n                    type=\"number\"\n                    value={formData.age}\n                    onChange={(e) => setFormData({ ...formData, age: parseInt(e.target.value) || 0 })}\n                    className=\"bg-secondary border-transparent h-10\"\n                  />\n                ) : (\n                  <p data-testid=\"text-age\" className=\"text-white font-medium\">{profile.age} years</p>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs text-muted-foreground\">Weight (lbs)</Label>\n                {isEditing ? (\n                  <Input\n                    data-testid=\"input-edit-weight\"\n                    type=\"number\"\n                    value={formData.weight}\n                    onChange={(e) => setFormData({ ...formData, weight: parseInt(e.target.value) || 0 })}\n                    className=\"bg-secondary border-transparent h-10\"\n                  />\n                ) : (\n                  <p data-testid=\"text-weight\" className=\"text-white font-medium\">{profile.weight} lbs</p>\n                )}\n              </div>\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs text-muted-foreground\">Height</Label>\n                {isEditing ? (\n                  <div className=\"flex gap-2\">\n                    <Input\n                      data-testid=\"input-edit-height-ft\"\n                      type=\"number\"\n                      value={formData.heightFt}\n                      onChange={(e) => setFormData({ ...formData, heightFt: parseInt(e.target.value) || 0 })}\n                      placeholder=\"Ft\"\n                      className=\"bg-secondary border-transparent h-10\"\n                    />\n                    <Input\n                      data-testid=\"input-edit-height-in\"\n                      type=\"number\"\n                      value={formData.heightIn}\n                      onChange={(e) => setFormData({ ...formData, heightIn: parseInt(e.target.value) || 0 })}\n                      placeholder=\"In\"\n                      className=\"bg-secondary border-transparent h-10\"\n                    />\n                  </div>\n                ) : (\n                  <p data-testid=\"text-height\" className=\"text-white font-medium\">{profile.heightFt}'{profile.heightIn}\"</p>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card className=\"bg-card border-white/10\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <Target className=\"w-5 h-5 text-primary\" />\n              Hockey Info\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs text-muted-foreground\">Position</Label>\n                {isEditing ? (\n                  <Select value={formData.position} onValueChange={(v: any) => setFormData({ ...formData, position: v })}>\n                    <SelectTrigger data-testid=\"select-edit-position\" className=\"bg-secondary border-transparent h-10\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"defense\">Defense</SelectItem>\n                      <SelectItem value=\"wing\">Wing</SelectItem>\n                      <SelectItem value=\"center\">Center</SelectItem>\n                      <SelectItem value=\"goalie\">Goalie</SelectItem>\n                    </SelectContent>\n                  </Select>\n                ) : (\n                  <p data-testid=\"text-position\" className=\"text-white font-medium\">{positionLabels[profile.position]}</p>\n                )}\n              </div>\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs text-muted-foreground\">Level</Label>\n                {isEditing ? (\n                  <Select value={formData.level} onValueChange={(v: any) => setFormData({ ...formData, level: v })}>\n                    <SelectTrigger data-testid=\"select-edit-level\" className=\"bg-secondary border-transparent h-10\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"house\">House League</SelectItem>\n                      <SelectItem value=\"a\">A Level</SelectItem>\n                      <SelectItem value=\"aa\">AA Level</SelectItem>\n                      <SelectItem value=\"aaa\">AAA Level</SelectItem>\n                      <SelectItem value=\"junior\">Junior</SelectItem>\n                    </SelectContent>\n                  </Select>\n                ) : (\n                  <p data-testid=\"text-level\" className=\"text-white font-medium\">{levelLabels[profile.level]}</p>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label className=\"text-xs text-muted-foreground\">Training Goal</Label>\n              {isEditing ? (\n                <Select value={formData.goal} onValueChange={(v: any) => setFormData({ ...formData, goal: v })}>\n                  <SelectTrigger data-testid=\"select-edit-goal\" className=\"bg-secondary border-transparent h-10\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"muscle\">Build Muscle</SelectItem>\n                    <SelectItem value=\"fatloss\">Fat Loss</SelectItem>\n                    <SelectItem value=\"maintain\">Maintain</SelectItem>\n                  </SelectContent>\n                </Select>\n              ) : (\n                <div className=\"flex items-center gap-2\">\n                  <TrendingUp className=\"w-4 h-4 text-primary\" />\n                  <p data-testid=\"text-goal\" className=\"text-white font-medium\">{goalLabels[profile.goal]}</p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-card border-white/10\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Signed in as</p>\n                <p className=\"text-white font-medium\">{user?.username}</p>\n              </div>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => logoutMutation.mutate()}\n                disabled={logoutMutation.isPending}\n                data-testid=\"button-logout\"\n                className=\"text-red-400 border-red-400/30 hover:bg-red-500/10 hover:text-red-300\"\n              >\n                <LogOut className=\"w-4 h-4 mr-2\" />\n                Sign Out\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":15346,"size_tokens":null},"client/src/lib/protected-route.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { Loader2 } from \"lucide-react\";\nimport { Redirect, Route } from \"wouter\";\n\nexport function ProtectedRoute({\n  path,\n  component: Component,\n}: {\n  path: string;\n  component: () => React.JSX.Element;\n}) {\n  const { user, isLoading } = useAuth();\n\n  if (isLoading) {\n    return (\n      <Route path={path}>\n        <div className=\"flex items-center justify-center min-h-screen bg-background\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n        </div>\n      </Route>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Route path={path}>\n        <Redirect to=\"/auth\" />\n      </Route>\n    );\n  }\n\n  return <Route path={path} component={Component} />;\n}\n","path":null,"size_bytes":721,"size_tokens":null},"server/auth.ts":{"content":"import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Express } from \"express\";\nimport session from \"express-session\";\nimport { scrypt, randomBytes, timingSafeEqual } from \"crypto\";\nimport { promisify } from \"util\";\nimport { storage } from \"./storage\";\nimport { User as SelectUser } from \"@shared/schema\";\n\ndeclare global {\n  namespace Express {\n    interface User extends SelectUser {}\n  }\n}\n\nconst scryptAsync = promisify(scrypt);\n\nasync function hashPassword(password: string) {\n  const salt = randomBytes(16).toString(\"hex\");\n  const buf = (await scryptAsync(password, salt, 64)) as Buffer;\n  return `${buf.toString(\"hex\")}.${salt}`;\n}\n\nasync function comparePasswords(supplied: string, stored: string) {\n  const [hashed, salt] = stored.split(\".\");\n  const hashedBuf = Buffer.from(hashed, \"hex\");\n  const suppliedBuf = (await scryptAsync(supplied, salt, 64)) as Buffer;\n  return timingSafeEqual(hashedBuf, suppliedBuf);\n}\n\nexport function setupAuth(app: Express) {\n  const sessionSettings: session.SessionOptions = {\n    secret: process.env.SESSION_SECRET!,\n    resave: false,\n    saveUninitialized: false,\n    store: storage.sessionStore,\n    cookie: {\n      secure: process.env.NODE_ENV === \"production\",\n      httpOnly: true,\n      sameSite: \"lax\",\n      maxAge: 7 * 24 * 60 * 60 * 1000,\n    },\n  };\n\n  app.set(\"trust proxy\", 1);\n  app.use(session(sessionSettings));\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  passport.use(\n    new LocalStrategy(async (username, password, done) => {\n      try {\n        const user = await storage.getUserByUsername(username);\n        if (!user || !(await comparePasswords(password, user.password))) {\n          return done(null, false);\n        } else {\n          return done(null, user);\n        }\n      } catch (err) {\n        return done(err);\n      }\n    }),\n  );\n\n  passport.serializeUser((user, done) => done(null, user.id));\n  passport.deserializeUser(async (id: string, done) => {\n    try {\n      const user = await storage.getUser(id);\n      done(null, user);\n    } catch (err) {\n      done(err);\n    }\n  });\n\n  app.post(\"/api/register\", async (req, res, next) => {\n    try {\n      const { username, password } = req.body;\n      \n      if (!username || !password) {\n        return res.status(400).json({ error: \"Username and password are required\" });\n      }\n      \n      if (password.length < 6) {\n        return res.status(400).json({ error: \"Password must be at least 6 characters\" });\n      }\n\n      const existingUser = await storage.getUserByUsername(username);\n      if (existingUser) {\n        return res.status(400).json({ error: \"Username already exists\" });\n      }\n\n      const user = await storage.createUser({\n        username,\n        password: await hashPassword(password),\n      });\n\n      const goals = await storage.getGoals();\n      const positions = await storage.getPositions();\n      const levels = await storage.getCompetitionLevels();\n      \n      const defaultGoal = goals.find(g => g.code === \"muscle\");\n      const defaultPosition = positions.find(p => p.code === \"defense\");\n      const defaultLevel = levels.find(l => l.code === \"aa\");\n\n      await storage.createProfile({\n        userId: user.id,\n        age: 13,\n        weight: 130,\n        heightFt: 5,\n        heightIn: 6,\n        goalId: defaultGoal?.id ?? null,\n        positionId: defaultPosition?.id ?? null,\n        levelId: defaultLevel?.id ?? null,\n        workoutDuration: 60,\n        onboardingComplete: false,\n      });\n\n      await storage.initUserProgress(user.id);\n\n      req.login(user, (err) => {\n        if (err) return next(err);\n        res.status(201).json(user);\n      });\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      res.status(500).json({ error: \"Registration failed\" });\n    }\n  });\n\n  app.post(\"/api/login\", (req, res, next) => {\n    passport.authenticate(\"local\", (err: any, user: SelectUser | false) => {\n      if (err) return next(err);\n      if (!user) {\n        return res.status(401).json({ error: \"Invalid username or password\" });\n      }\n      req.login(user, (err) => {\n        if (err) return next(err);\n        res.status(200).json(user);\n      });\n    })(req, res, next);\n  });\n\n  app.post(\"/api/logout\", (req, res, next) => {\n    req.logout((err) => {\n      if (err) return next(err);\n      res.sendStatus(200);\n    });\n  });\n\n  app.get(\"/api/user\", (req, res) => {\n    if (!req.isAuthenticated()) return res.sendStatus(401);\n    res.json(req.user);\n  });\n}\n\nexport function requireAuth(req: any, res: any, next: any) {\n  if (!req.isAuthenticated()) {\n    return res.status(401).json({ error: \"Authentication required\" });\n  }\n  next();\n}\n","path":null,"size_bytes":4720,"size_tokens":null}},"version":2}